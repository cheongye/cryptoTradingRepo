2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:31:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4e3d5bf8]
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:31:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60351.99, BidQty - 6.25888, Ask - 60352.0, askQuantity - 0.13505
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2621.39, BidQty - 46.5782, Ask - 2621.4, askQuantity - 0.3763
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022808422980084, BidQty - 2.0231328491405174, Ask - 23.022900064469614, AskQty - 0.005865898719180806
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343501458112407, BidQty - 6.25888, Ask - 0.043435187472691456, AskQty - 0.3763
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.09, BidQty - 0.6162, Ask - 2620.61, askQuantity - 0.5
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60351.62, BidQty - 0.01202, Ask - 60351.63, askQuantity - 0.178385
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.029607610441843, BidQty - 0.01202, Ask - 23.03418203191493, AskQty - 0.007744360088534478
2024-08-11 23:31:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04341374044081329, BidQty - 0.01202, Ask - 0.04342236380730128, AskQty - 0.5
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8c2b9681-296d-4a21-bbc3-898d41c9cb9c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 319b441e-c8e9-43ef-922f-5103315c3723, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f7f652b0-1fcc-4ae1-9f28-97c751768496, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1285251284<open>)] for JPA transaction
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9012744c-529b-4f60-a128-ea9791b68fb0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1285251284<open>)]
2024-08-11 23:31:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:31:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:31:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:31:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60351.63, askSource=HUOBI, bidQuantity=6.25888, symbol=BTCUSDT, priceDate=2024-08-11T23:31:13.715186700, askQuantity=0.178385, bidSource=BINANCE, priceId=319b441e-c8e9-43ef-922f-5103315c3723, bidPrice=60351.99}
2024-08-11 23:31:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04342236380730128, askSource=HUOBI, bidQuantity=6.25888, symbol=ETHBTC, priceDate=2024-08-11T23:31:13.715186700, askQuantity=0.5, bidSource=BINANCE, priceId=9012744c-529b-4f60-a128-ea9791b68fb0, bidPrice=0.04343501458112407}
2024-08-11 23:31:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.61, askSource=HUOBI, bidQuantity=46.5782, symbol=ETHUSDT, priceDate=2024-08-11T23:31:13.715186700, askQuantity=0.5, bidSource=BINANCE, priceId=8c2b9681-296d-4a21-bbc3-898d41c9cb9c, bidPrice=2621.39}
2024-08-11 23:31:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.022900064469614, askSource=BINANCE, bidQuantity=0.01202, symbol=BTCETH, priceDate=2024-08-11T23:31:13.715186700, askQuantity=0.005865898719180806, bidSource=HUOBI, priceId=f7f652b0-1fcc-4ae1-9f28-97c751768496, bidPrice=23.029607610441843}
2024-08-11 23:31:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1285251284<open>)] after transaction
2024-08-11 23:31:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:31:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@78f12b7e]
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:31:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60351.99, BidQty - 1.41013, Ask - 60352.0, askQuantity - 5.13762
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2621.32, BidQty - 22.5394, Ask - 2621.33, askQuantity - 8.049
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023423224088535, BidQty - 0.9789769219208845, Ask - 23.02351487037065, AskQty - 0.2231466406813362
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343385471898197, BidQty - 1.41013, Ask - 0.043434027610357175, AskQty - 8.049
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2621.26, BidQty - 0.1029, Ask - 2621.44, askQuantity - 3.0
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60354.44, BidQty - 0.213258, Ask - 60354.45, askQuantity - 0.013468
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023391723632812, BidQty - 0.004469367556057185, Ask - 23.024976538000807, AskQty - 5.849300205701486E-4
2024-08-11 23:31:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343109745843099, BidQty - 0.213258, Ask - 0.04343408703651297, AskQty - 0.3100790397338868
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c0258605-39e9-4b16-ae00-3cf4474f8eb0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0badfe11-44a4-4373-9245-16797c8999c0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3b4a6bee-f2c3-416c-a4a2-59282794bcb4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811862290<open>)] for JPA transaction
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 88b4853b-2f06-4bcb-86bb-c8a163298e19, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1811862290<open>)]
2024-08-11 23:31:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:31:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:31:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:31:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60352.0, askSource=BINANCE, bidQuantity=0.213258, symbol=BTCUSDT, priceDate=2024-08-11T23:31:23.748627900, askQuantity=5.13762, bidSource=HUOBI, priceId=0badfe11-44a4-4373-9245-16797c8999c0, bidPrice=60354.44}
2024-08-11 23:31:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02351487037065, askSource=BINANCE, bidQuantity=0.9789769219208845, symbol=BTCETH, priceDate=2024-08-11T23:31:23.748627900, askQuantity=0.2231466406813362, bidSource=BINANCE, priceId=3b4a6bee-f2c3-416c-a4a2-59282794bcb4, bidPrice=23.023423224088535}
2024-08-11 23:31:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043434027610357175, askSource=BINANCE, bidQuantity=1.41013, symbol=ETHBTC, priceDate=2024-08-11T23:31:23.748627900, askQuantity=8.049, bidSource=BINANCE, priceId=88b4853b-2f06-4bcb-86bb-c8a163298e19, bidPrice=0.04343385471898197}
2024-08-11 23:31:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2621.33, askSource=BINANCE, bidQuantity=22.5394, symbol=ETHUSDT, priceDate=2024-08-11T23:31:23.748627900, askQuantity=8.049, bidSource=BINANCE, priceId=c0258605-39e9-4b16-ae00-3cf4474f8eb0, bidPrice=2621.32}
2024-08-11 23:31:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1811862290<open>)] after transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:31:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@36a61358]
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:31:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60336.01, BidQty - 0.15079, Ask - 60336.02, askQuantity - 2.50932
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.32, BidQty - 0.1994, Ask - 2620.33, askQuantity - 19.2746
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.026111214999638, BidQty - 0.008659734079200796, Ask - 23.02620290651523, AskQty - 0.10897671709867508
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04342878433148226, BidQty - 0.15079, Ask - 0.0434289572678074, AskQty - 19.2746
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2621.19, BidQty - 0.0985, Ask - 2621.2, askQuantity - 3.1525
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60345.36, BidQty - 0.343506, Ask - 60345.37, askQuantity - 0.179382
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02203570883565, BidQty - 0.004278509565607032, Ask - 23.02212735436958, AskQty - 0.007791721296596574
2024-08-11 23:31:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043436472425307855, BidQty - 0.343506, Ask - 0.043436645336112, AskQty - 3.1525
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4c6fa810-4165-4c24-a338-e44051305863, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 07c4b79e-2acc-41b5-97c2-31e0ae8eff0a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d42a43ea-46f8-46fb-967f-e14affc7cc23, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(611943591<open>)] for JPA transaction
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 33782719-a5e3-4014-a7c1-38aa8e6a54da, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(611943591<open>)]
2024-08-11 23:31:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:31:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:31:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:31:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02212735436958, askSource=HUOBI, bidQuantity=0.008659734079200796, symbol=BTCETH, priceDate=2024-08-11T23:31:33.843529700, askQuantity=0.007791721296596574, bidSource=BINANCE, priceId=d42a43ea-46f8-46fb-967f-e14affc7cc23, bidPrice=23.026111214999638}
2024-08-11 23:31:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.33, askSource=BINANCE, bidQuantity=0.0985, symbol=ETHUSDT, priceDate=2024-08-11T23:31:33.843529700, askQuantity=19.2746, bidSource=HUOBI, priceId=4c6fa810-4165-4c24-a338-e44051305863, bidPrice=2621.19}
2024-08-11 23:31:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60336.02, askSource=BINANCE, bidQuantity=0.343506, symbol=BTCUSDT, priceDate=2024-08-11T23:31:33.843529700, askQuantity=2.50932, bidSource=HUOBI, priceId=07c4b79e-2acc-41b5-97c2-31e0ae8eff0a, bidPrice=60345.36}
2024-08-11 23:31:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434289572678074, askSource=BINANCE, bidQuantity=0.343506, symbol=ETHBTC, priceDate=2024-08-11T23:31:33.843529700, askQuantity=19.2746, bidSource=HUOBI, priceId=33782719-a5e3-4014-a7c1-38aa8e6a54da, bidPrice=0.043436472425307855}
2024-08-11 23:31:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(611943591<open>)] after transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:31:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6724f055]
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:31:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60330.0, BidQty - 1.74866, Ask - 60330.01, askQuantity - 4.52741
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.43, BidQty - 21.3464, Ask - 2620.44, askQuantity - 8.0627
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022851124238677, BidQty - 0.9271831661859771, Ask - 23.02294279946421, AskQty - 0.19664775434812623
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434349339574119, BidQty - 1.74866, Ask - 0.04343510691198409, AskQty - 8.0627
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.49, BidQty - 1.1439, Ask - 2619.5, askQuantity - 0.0899
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60324.92, BidQty - 0.378129, Ask - 60324.93, askQuantity - 0.004451
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02917350639435, BidQty - 0.04967177826344402, Ask - 23.029265238653327, AskQty - 1.9327581465904725E-4
2024-08-11 23:31:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043423009359480395, BidQty - 0.378129, Ask - 0.04342318232664047, AskQty - 0.0899
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a4a332b9-1ef0-4d8a-805c-4714221a494f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a6c3f556-1376-403a-999d-cef63a0f739a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d7031f90-ab12-4d5a-9900-7a1f99f0636b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(562145876<open>)] for JPA transaction
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b0afb259-9a61-49c0-971c-fa7d41bd430a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(562145876<open>)]
2024-08-11 23:31:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:31:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:31:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:31:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02294279946421, askSource=BINANCE, bidQuantity=0.04967177826344402, symbol=BTCETH, priceDate=2024-08-11T23:31:43.767921600, askQuantity=0.19664775434812623, bidSource=HUOBI, priceId=d7031f90-ab12-4d5a-9900-7a1f99f0636b, bidPrice=23.02917350639435}
2024-08-11 23:31:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.5, askSource=HUOBI, bidQuantity=21.3464, symbol=ETHUSDT, priceDate=2024-08-11T23:31:43.767921600, askQuantity=0.0899, bidSource=BINANCE, priceId=a4a332b9-1ef0-4d8a-805c-4714221a494f, bidPrice=2620.43}
2024-08-11 23:31:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60324.93, askSource=HUOBI, bidQuantity=1.74866, symbol=BTCUSDT, priceDate=2024-08-11T23:31:43.767921600, askQuantity=0.004451, bidSource=BINANCE, priceId=a6c3f556-1376-403a-999d-cef63a0f739a, bidPrice=60330.0}
2024-08-11 23:31:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04342318232664047, askSource=HUOBI, bidQuantity=1.74866, symbol=ETHBTC, priceDate=2024-08-11T23:31:43.767921600, askQuantity=0.0899, bidSource=BINANCE, priceId=b0afb259-9a61-49c0-971c-fa7d41bd430a, bidPrice=0.0434349339574119}
2024-08-11 23:31:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(562145876<open>)] after transaction
2024-08-11 23:31:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:31:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@40abf431]
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:31:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60307.66, BidQty - 0.8429, Ask - 60307.67, askQuantity - 6.05557
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.93, BidQty - 13.4297, Ask - 2618.94, askQuantity - 7.1014
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.027507312118644, BidQty - 0.5832025072436902, Ask - 23.027599057630407, AskQty - 0.2629700988298835
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04342615126732636, BidQty - 0.8429, Ask - 0.04342632428451046, AskQty - 7.1014
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:31:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.39, BidQty - 0.0991, Ask - 2620.4, askQuantity - 1.0409
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60321.19, BidQty - 0.631285, Ask - 60321.2, askQuantity - 0.039875
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019840482369105, BidQty - 0.00430498204693906, Ask - 23.01993214750476, AskQty - 0.0017321945062432444
2024-08-11 23:31:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344061457663309, BidQty - 0.631285, Ask - 0.043440787557407275, AskQty - 0.917916139234468
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0e4c5d20-e54f-46bf-a1ac-9b136dad8607, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 16bf4215-4afd-4d05-8b39-b73b788ce9ab, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2b0bfd28-bfe7-4304-8c48-bfc87a7541a4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(281628053<open>)] for JPA transaction
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c13d9430-aae7-4bb2-ab1b-305bc30c62f9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:31:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(281628053<open>)]
2024-08-11 23:31:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:31:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:31:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:31:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01993214750476, askSource=HUOBI, bidQuantity=0.5832025072436902, symbol=BTCETH, priceDate=2024-08-11T23:31:53.749790300, askQuantity=0.0017321945062432444, bidSource=BINANCE, priceId=2b0bfd28-bfe7-4304-8c48-bfc87a7541a4, bidPrice=23.027507312118644}
2024-08-11 23:31:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04342632428451046, askSource=BINANCE, bidQuantity=0.631285, symbol=ETHBTC, priceDate=2024-08-11T23:31:53.749790300, askQuantity=7.1014, bidSource=HUOBI, priceId=c13d9430-aae7-4bb2-ab1b-305bc30c62f9, bidPrice=0.04344061457663309}
2024-08-11 23:31:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60307.67, askSource=BINANCE, bidQuantity=0.631285, symbol=BTCUSDT, priceDate=2024-08-11T23:31:53.749790300, askQuantity=6.05557, bidSource=HUOBI, priceId=16bf4215-4afd-4d05-8b39-b73b788ce9ab, bidPrice=60321.19}
2024-08-11 23:31:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.94, askSource=BINANCE, bidQuantity=0.0991, symbol=ETHUSDT, priceDate=2024-08-11T23:31:53.749790300, askQuantity=7.1014, bidSource=HUOBI, priceId=0e4c5d20-e54f-46bf-a1ac-9b136dad8607, bidPrice=2620.39}
2024-08-11 23:31:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:31:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(281628053<open>)] after transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@54cb3d62]
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60301.99, BidQty - 4.72498, Ask - 60302.0, askQuantity - 0.15328
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.25, BidQty - 23.1283, Ask - 2618.26, askQuantity - 4.4696
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.031322328569352, BidQty - 1.0042106862145015, Ask - 23.03141411247971, AskQty - 0.0066552578687274055
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04341895791184372, BidQty - 4.72498, Ask - 0.04341913094410318, AskQty - 3.53024108652311
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.4, BidQty - 0.5, Ask - 2618.6, askQuantity - 0.5892
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60307.12, BidQty - 0.017196, Ask - 60307.13, askQuantity - 0.39650400165817873
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.03029099518827, BidQty - 0.017196, Ask - 23.032053926061714, AskQty - 0.01721531231782669
2024-08-11 23:32:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043417751765006896, BidQty - 0.017196, Ask - 0.04342107532244949, AskQty - 0.5892
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ac6905b3-2206-464d-8204-f538d007f431, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1f805885-ef3f-4559-b3ef-2bc6a1e196b8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a4a0246d-1d50-4cb3-98f0-0c161a2b8123, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1249466864<open>)] for JPA transaction
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3226927c-2452-4b11-8fdf-900c0854dab1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1249466864<open>)]
2024-08-11 23:32:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.03141411247971, askSource=BINANCE, bidQuantity=1.0042106862145015, symbol=BTCETH, priceDate=2024-08-11T23:32:03.752595800, askQuantity=0.0066552578687274055, bidSource=BINANCE, priceId=a4a0246d-1d50-4cb3-98f0-0c161a2b8123, bidPrice=23.031322328569352}
2024-08-11 23:32:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04341913094410318, askSource=BINANCE, bidQuantity=4.72498, symbol=ETHBTC, priceDate=2024-08-11T23:32:03.752595800, askQuantity=3.53024108652311, bidSource=BINANCE, priceId=3226927c-2452-4b11-8fdf-900c0854dab1, bidPrice=0.04341895791184372}
2024-08-11 23:32:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.26, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:32:03.752595800, askQuantity=4.4696, bidSource=HUOBI, priceId=ac6905b3-2206-464d-8204-f538d007f431, bidPrice=2618.4}
2024-08-11 23:32:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60302.0, askSource=BINANCE, bidQuantity=0.017196, symbol=BTCUSDT, priceDate=2024-08-11T23:32:03.752595800, askQuantity=0.15328, bidSource=HUOBI, priceId=1f805885-ef3f-4559-b3ef-2bc6a1e196b8, bidPrice=60307.12}
2024-08-11 23:32:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1249466864<open>)] after transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@14ceb3da]
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60309.99, BidQty - 2.72646, Ask - 60310.0, askQuantity - 0.97659
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.25, BidQty - 26.8629, Ask - 2619.26, askQuantity - 3.377
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.025583561769352, BidQty - 1.1666544705777602, Ask - 23.02567528872769, AskQty - 0.04241308833526778
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04342977947272426, BidQty - 2.72646, Ask - 0.043429952483825654, AskQty - 3.377
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.72, BidQty - 0.5, Ask - 2618.94, askQuantity - 0.0099
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60312.76, BidQty - 0.025535, Ask - 60312.77, askQuantity - 0.516265
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02945466486441, BidQty - 0.02171132609417974, Ask - 23.031393199731166, AskQty - 0.0099
2024-08-11 23:32:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043418997336716586, BidQty - 0.025535, Ask - 0.04342265218835948, AskQty - 0.0099
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7e7ed02e-c64b-439c-b763-8d1840784a18, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9a25ecf3-aacd-4061-a51d-c101cd729319, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0533467e-5a13-4343-ab5c-eab8cc40c4b0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1457038484<open>)] for JPA transaction
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ea13bef8-56c3-46a1-a78d-a4196032fb63, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1457038484<open>)]
2024-08-11 23:32:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.94, askSource=HUOBI, bidQuantity=26.8629, symbol=ETHUSDT, priceDate=2024-08-11T23:32:13.808257500, askQuantity=0.0099, bidSource=BINANCE, priceId=7e7ed02e-c64b-439c-b763-8d1840784a18, bidPrice=2619.25}
2024-08-11 23:32:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02567528872769, askSource=BINANCE, bidQuantity=0.02171132609417974, symbol=BTCETH, priceDate=2024-08-11T23:32:13.808257500, askQuantity=0.04241308833526778, bidSource=HUOBI, priceId=0533467e-5a13-4343-ab5c-eab8cc40c4b0, bidPrice=23.02945466486441}
2024-08-11 23:32:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60310.0, askSource=BINANCE, bidQuantity=0.025535, symbol=BTCUSDT, priceDate=2024-08-11T23:32:13.808257500, askQuantity=0.97659, bidSource=HUOBI, priceId=9a25ecf3-aacd-4061-a51d-c101cd729319, bidPrice=60312.76}
2024-08-11 23:32:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04342265218835948, askSource=HUOBI, bidQuantity=2.72646, symbol=ETHBTC, priceDate=2024-08-11T23:32:13.808257500, askQuantity=0.0099, bidSource=BINANCE, priceId=ea13bef8-56c3-46a1-a78d-a4196032fb63, bidPrice=0.04342977947272426}
2024-08-11 23:32:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1457038484<open>)] after transaction
2024-08-11 23:32:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@58b847f7]
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60319.99, BidQty - 8.39343, Ask - 60320.0, askQuantity - 0.31195
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.25, BidQty - 36.4762, Ask - 2620.26, askQuantity - 6.0892
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02061245830566, BidQty - 1.5845017184518766, Ask - 23.020704131285182, AskQty - 0.013550845283488063
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343915782493369, BidQty - 8.39343, Ask - 0.043439330808907634, AskQty - 6.0892
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.04, BidQty - 0.0784, Ask - 2620.05, askQuantity - 3.4377
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60316.68, BidQty - 0.06725, Ask - 60316.69, askQuantity - 0.42444
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02119425201809, BidQty - 0.0034055574676855557, Ask - 23.021285934565885, AskQty - 0.018436850191878896
2024-08-11 23:32:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343806001290853, BidQty - 0.06725, Ask - 0.043438233006193316, AskQty - 3.4377
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3998aab0-493f-4d92-b8fd-543af793768a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8686d5a4-fab4-4fe8-8039-80dca49ded16, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1f451230-c3c1-442e-8c0e-a414fa73e6c2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1734503377<open>)] for JPA transaction
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 360971af-9320-4a28-9dd9-0252e2ce6cdb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1734503377<open>)]
2024-08-11 23:32:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.020704131285182, askSource=BINANCE, bidQuantity=0.0034055574676855557, symbol=BTCETH, priceDate=2024-08-11T23:32:23.819383200, askQuantity=0.013550845283488063, bidSource=HUOBI, priceId=1f451230-c3c1-442e-8c0e-a414fa73e6c2, bidPrice=23.02119425201809}
2024-08-11 23:32:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.05, askSource=HUOBI, bidQuantity=36.4762, symbol=ETHUSDT, priceDate=2024-08-11T23:32:23.819383200, askQuantity=3.4377, bidSource=BINANCE, priceId=3998aab0-493f-4d92-b8fd-543af793768a, bidPrice=2620.25}
2024-08-11 23:32:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043438233006193316, askSource=HUOBI, bidQuantity=8.39343, symbol=ETHBTC, priceDate=2024-08-11T23:32:23.819383200, askQuantity=3.4377, bidSource=BINANCE, priceId=360971af-9320-4a28-9dd9-0252e2ce6cdb, bidPrice=0.04343915782493369}
2024-08-11 23:32:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60316.69, askSource=HUOBI, bidQuantity=8.39343, symbol=BTCUSDT, priceDate=2024-08-11T23:32:23.819383200, askQuantity=0.42444, bidSource=BINANCE, priceId=8686d5a4-fab4-4fe8-8039-80dca49ded16, bidPrice=60319.99}
2024-08-11 23:32:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1734503377<open>)] after transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1fbdab60]
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60322.0, BidQty - 0.24029, Ask - 60322.01, askQuantity - 7.48144
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.37, BidQty - 4.6417, Ask - 2620.38, askQuantity - 12.1617
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020325296331066, BidQty - 0.20163485703391798, Ask - 23.020416964016533, AskQty - 0.32499150696072626
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343969970496672, BidQty - 0.24029, Ask - 0.04343987268326647, AskQty - 12.1617
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.6, BidQty - 0.3063, Ask - 2620.61, askQuantity - 0.9293
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60327.5, BidQty - 0.217128, Ask - 60327.51, askQuantity - 0.016575
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020403646479252, BidQty - 0.013305587717044468, Ask - 23.02049530641838, AskQty - 7.200105722911487E-4
2024-08-11 23:32:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043439551872769155, BidQty - 0.217128, Ask - 0.043439724835274134, AskQty - 0.3815631904403936
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7f8cb394-3a56-4faa-887a-5629e519f312, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3c0d9e3e-c120-4f32-bca1-2013796cffa7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1c833308-9481-4b74-b676-dd39882daacf, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929633083<open>)] for JPA transaction
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cac62d53-e80e-479e-9446-644823ed4474, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1929633083<open>)]
2024-08-11 23:32:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043439724835274134, askSource=HUOBI, bidQuantity=0.24029, symbol=ETHBTC, priceDate=2024-08-11T23:32:33.736014800, askQuantity=0.3815631904403936, bidSource=BINANCE, priceId=cac62d53-e80e-479e-9446-644823ed4474, bidPrice=0.04343969970496672}
2024-08-11 23:32:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60322.01, askSource=BINANCE, bidQuantity=0.217128, symbol=BTCUSDT, priceDate=2024-08-11T23:32:33.736014800, askQuantity=7.48144, bidSource=HUOBI, priceId=3c0d9e3e-c120-4f32-bca1-2013796cffa7, bidPrice=60327.5}
2024-08-11 23:32:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.020416964016533, askSource=BINANCE, bidQuantity=0.013305587717044468, symbol=BTCETH, priceDate=2024-08-11T23:32:33.736014800, askQuantity=0.32499150696072626, bidSource=HUOBI, priceId=1c833308-9481-4b74-b676-dd39882daacf, bidPrice=23.020403646479252}
2024-08-11 23:32:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.38, askSource=BINANCE, bidQuantity=0.3063, symbol=ETHUSDT, priceDate=2024-08-11T23:32:33.736014800, askQuantity=12.1617, bidSource=HUOBI, priceId=7f8cb394-3a56-4faa-887a-5629e519f312, bidPrice=2620.6}
2024-08-11 23:32:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1929633083<open>)] after transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5e46ff99]
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60323.99, BidQty - 3.71128, Ask - 60324.0, askQuantity - 1.30005
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.99, BidQty - 32.982, Ask - 2621.0, askQuantity - 25.0864
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01563906905761, BidQty - 1.4330256005943904, Ask - 23.01573069717931, AskQty - 0.05648528031131887
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344854452622505, BidQty - 3.71128, Ask - 0.043448717500284714, AskQty - 25.0864
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2621.13, BidQty - 0.1029, Ask - 2621.14, askQuantity - 3.9016
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60331.87, BidQty - 0.119846, Ask - 60331.88, askQuantity - 0.3335232528489084
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017416086130464, BidQty - 0.004470527865289109, Ask - 23.017507716137693, AskQty - 0.014489981146615344
2024-08-11 23:32:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344519017143176, BidQty - 0.119846, Ask - 0.04344536312234313, AskQty - 3.9016
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8d960da6-2fb5-4acb-8097-73396b5cfacf, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c55665e7-2815-4276-9483-eea7147867a1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f88f21e8-b730-4025-ac1b-ce85fd4ca387, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1811253707<open>)] for JPA transaction
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d2e794cd-9c27-4983-a7a7-860e3952fb69, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1811253707<open>)]
2024-08-11 23:32:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60324.0, askSource=BINANCE, bidQuantity=0.119846, symbol=BTCUSDT, priceDate=2024-08-11T23:32:43.791558200, askQuantity=1.30005, bidSource=HUOBI, priceId=c55665e7-2815-4276-9483-eea7147867a1, bidPrice=60331.87}
2024-08-11 23:32:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01573069717931, askSource=BINANCE, bidQuantity=0.004470527865289109, symbol=BTCETH, priceDate=2024-08-11T23:32:43.791558200, askQuantity=0.05648528031131887, bidSource=HUOBI, priceId=f88f21e8-b730-4025-ac1b-ce85fd4ca387, bidPrice=23.017416086130464}
2024-08-11 23:32:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2621.0, askSource=BINANCE, bidQuantity=0.1029, symbol=ETHUSDT, priceDate=2024-08-11T23:32:43.791558200, askQuantity=25.0864, bidSource=HUOBI, priceId=8d960da6-2fb5-4acb-8097-73396b5cfacf, bidPrice=2621.13}
2024-08-11 23:32:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344536312234313, askSource=HUOBI, bidQuantity=3.71128, symbol=ETHBTC, priceDate=2024-08-11T23:32:43.791558200, askQuantity=3.9016, bidSource=BINANCE, priceId=d2e794cd-9c27-4983-a7a7-860e3952fb69, bidPrice=0.04344854452622505}
2024-08-11 23:32:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1811253707<open>)] after transaction
2024-08-11 23:32:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:32:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7cbc7b2]
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:32:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60329.99, BidQty - 2.99784, Ask - 60330.0, askQuantity - 0.6862
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2621.38, BidQty - 25.6291, Ask - 2621.39, askQuantity - 5.1465
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01450375564109, BidQty - 1.1136064575677869, Ask - 23.014595365799693, AskQty - 0.029815862025526274
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345068788330847, BidQty - 2.99784, Ask - 0.04345086084052061, AskQty - 5.1465
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:32:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2621.4, BidQty - 0.0708, Ask - 2621.41, askQuantity - 3.9299
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60331.88, BidQty - 0.013918, Ask - 60331.89, askQuantity - 0.308483
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01504915293678, BidQty - 0.0030762480466380296, Ask - 23.015140764476996, AskQty - 0.013403480915316925
2024-08-11 23:32:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344965821558052, BidQty - 0.013918, Ask - 0.04344983116720381, AskQty - 3.9299
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1e745d63-faf1-42a4-b2d1-1d767223fc1c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 55b61eda-61a4-4c15-b63b-d5dad918b0a3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0e261ea9-1071-4013-9102-1a80f3443237, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(696015769<open>)] for JPA transaction
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5ddbdba1-f94d-429c-b48c-0b288122a20d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:32:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(696015769<open>)]
2024-08-11 23:32:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:32:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:32:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:32:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60330.0, askSource=BINANCE, bidQuantity=0.013918, symbol=BTCUSDT, priceDate=2024-08-11T23:32:53.759395900, askQuantity=0.6862, bidSource=HUOBI, priceId=55b61eda-61a4-4c15-b63b-d5dad918b0a3, bidPrice=60331.88}
2024-08-11 23:32:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344983116720381, askSource=HUOBI, bidQuantity=2.99784, symbol=ETHBTC, priceDate=2024-08-11T23:32:53.759395900, askQuantity=3.9299, bidSource=BINANCE, priceId=5ddbdba1-f94d-429c-b48c-0b288122a20d, bidPrice=0.04345068788330847}
2024-08-11 23:32:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.014595365799693, askSource=BINANCE, bidQuantity=0.0030762480466380296, symbol=BTCETH, priceDate=2024-08-11T23:32:53.759395900, askQuantity=0.029815862025526274, bidSource=HUOBI, priceId=0e261ea9-1071-4013-9102-1a80f3443237, bidPrice=23.01504915293678}
2024-08-11 23:32:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2621.39, askSource=BINANCE, bidQuantity=0.0708, symbol=ETHUSDT, priceDate=2024-08-11T23:32:53.759395900, askQuantity=5.1465, bidSource=HUOBI, priceId=1e745d63-faf1-42a4-b2d1-1d767223fc1c, bidPrice=2621.4}
2024-08-11 23:32:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:32:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(696015769<open>)] after transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@34a2660f]
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60337.8, BidQty - 1.09048, Ask - 60337.81, askQuantity - 2.55687
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2621.49, BidQty - 2.3206, Ask - 2621.5, askQuantity - 11.2442
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016517261110053, BidQty - 0.10082324678725443, Ask - 23.01660887510538, AskQty - 0.11108804141714788
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043446886786245635, BidQty - 1.09048, Ask - 0.043447059720440585, AskQty - 11.2442
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2621.58, BidQty - 2.0102, Ask - 2621.59, askQuantity - 0.4327
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60344.25, BidQty - 0.001983, Ask - 60344.26, askQuantity - 0.518524
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01818743586907, BidQty - 0.001983, Ask - 23.018279053090122, AskQty - 0.022526618901615496
2024-08-11 23:33:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344373433363836, BidQty - 0.001983, Ask - 0.043443907248826526, AskQty - 0.4327
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0744d490-32a8-455f-84fa-0402f8875e6f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 19283d1c-f41d-4a97-9405-07b0f2dee68d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0666e44e-104c-40a8-9f76-d9158ab2a883, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1371889288<open>)] for JPA transaction
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 10e0df62-449b-4173-b146-33a56fb46c7e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1371889288<open>)]
2024-08-11 23:33:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01660887510538, askSource=BINANCE, bidQuantity=0.001983, symbol=BTCETH, priceDate=2024-08-11T23:33:03.725796200, askQuantity=0.11108804141714788, bidSource=HUOBI, priceId=0666e44e-104c-40a8-9f76-d9158ab2a883, bidPrice=23.01818743586907}
2024-08-11 23:33:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2621.5, askSource=BINANCE, bidQuantity=2.0102, symbol=ETHUSDT, priceDate=2024-08-11T23:33:03.725796200, askQuantity=11.2442, bidSource=HUOBI, priceId=0744d490-32a8-455f-84fa-0402f8875e6f, bidPrice=2621.58}
2024-08-11 23:33:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043443907248826526, askSource=HUOBI, bidQuantity=1.09048, symbol=ETHBTC, priceDate=2024-08-11T23:33:03.725796200, askQuantity=0.4327, bidSource=BINANCE, priceId=10e0df62-449b-4173-b146-33a56fb46c7e, bidPrice=0.043446886786245635}
2024-08-11 23:33:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60337.81, askSource=BINANCE, bidQuantity=0.001983, symbol=BTCUSDT, priceDate=2024-08-11T23:33:03.725796200, askQuantity=2.55687, bidSource=HUOBI, priceId=19283d1c-f41d-4a97-9405-07b0f2dee68d, bidPrice=60344.25}
2024-08-11 23:33:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1371889288<open>)] after transaction
2024-08-11 23:33:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6b778ca7]
2024-08-11 23:33:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60324.0, BidQty - 0.52092, Ask - 60324.01, askQuantity - 4.72677
2024-08-11 23:33:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.59, BidQty - 28.2526, Ask - 2620.6, askQuantity - 4.8404
2024-08-11 23:33:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01915591849195, BidQty - 0.52092, Ask - 23.01924757401959, AskQty - 0.20533990022049264
2024-08-11 23:33:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344190646477249, BidQty - 0.52092, Ask - 0.04344207943770307, AskQty - 4.8404
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:14 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.18, BidQty - 5.7483, Ask - 2620.19, askQuantity - 0.2008
2024-08-11 23:33:14 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60329.06, BidQty - 0.03565, Ask - 60329.07, askQuantity - 0.6405420006630302
2024-08-11 23:33:14 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02468904926742, BidQty - 0.03565, Ask - 23.02478074025449, AskQty - 0.027819678627521664
2024-08-11 23:33:14 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043431466787072964, BidQty - 0.03565, Ask - 0.04343163974376528, AskQty - 0.2008
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f5c37242-9c4c-47e6-85b6-2ca120d723e1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a359e5bf-8a2b-4867-b8e0-82ba310c1f2c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6623c854-ea54-411f-b0a8-d40fc312cf99, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1776591974<open>)] for JPA transaction
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 42deb2d7-4371-41cf-9fdd-911090f55e23, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:14 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1776591974<open>)]
2024-08-11 23:33:14 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:14 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.19, askSource=HUOBI, bidQuantity=28.2526, symbol=ETHUSDT, priceDate=2024-08-11T23:33:14.038292800, askQuantity=0.2008, bidSource=BINANCE, priceId=f5c37242-9c4c-47e6-85b6-2ca120d723e1, bidPrice=2620.59}
2024-08-11 23:33:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01924757401959, askSource=BINANCE, bidQuantity=0.03565, symbol=BTCETH, priceDate=2024-08-11T23:33:14.038292800, askQuantity=0.20533990022049264, bidSource=HUOBI, priceId=6623c854-ea54-411f-b0a8-d40fc312cf99, bidPrice=23.02468904926742}
2024-08-11 23:33:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343163974376528, askSource=HUOBI, bidQuantity=0.52092, symbol=ETHBTC, priceDate=2024-08-11T23:33:14.038292800, askQuantity=0.2008, bidSource=BINANCE, priceId=42deb2d7-4371-41cf-9fdd-911090f55e23, bidPrice=0.04344190646477249}
2024-08-11 23:33:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60324.01, askSource=BINANCE, bidQuantity=0.03565, symbol=BTCUSDT, priceDate=2024-08-11T23:33:14.038292800, askQuantity=4.72677, bidSource=HUOBI, priceId=a359e5bf-8a2b-4867-b8e0-82ba310c1f2c, bidPrice=60329.06}
2024-08-11 23:33:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1776591974<open>)] after transaction
2024-08-11 23:33:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1f77070e]
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60295.19, BidQty - 0.1719, Ask - 60295.2, askQuantity - 6.02944
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.86, BidQty - 4.9658, Ask - 2618.87, askQuantity - 15.0778
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02336122067915, BidQty - 0.1719, Ask - 23.023452952811528, AskQty - 0.26188252528227784
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343397152675504, BidQty - 0.1719, Ask - 0.04343414458101882, AskQty - 15.0778
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.81, BidQty - 2.3226, Ask - 2619.82, askQuantity - 0.2482
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60316.68, BidQty - 0.006962, Ask - 60316.69, askQuantity - 0.470263
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02321533540472, BidQty - 0.006962, Ask - 23.023307033716186, AskQty - 0.020425519205878172
2024-08-11 23:33:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343424680631513, BidQty - 0.006962, Ask - 0.04343441979896772, AskQty - 0.2482
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 921a995d-74be-4d0f-8bff-6fe80a412ddd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1ce831af-d8da-4e55-a123-890273e4ba73, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 11df7597-d9c2-42a1-99c7-817ce9a8860c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877800222<open>)] for JPA transaction
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 829d942b-121c-452c-b6ec-f6ae2c20181a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(877800222<open>)]
2024-08-11 23:33:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60295.2, askSource=BINANCE, bidQuantity=0.006962, symbol=BTCUSDT, priceDate=2024-08-11T23:33:23.842961700, askQuantity=6.02944, bidSource=HUOBI, priceId=1ce831af-d8da-4e55-a123-890273e4ba73, bidPrice=60316.68}
2024-08-11 23:33:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343414458101882, askSource=BINANCE, bidQuantity=0.006962, symbol=ETHBTC, priceDate=2024-08-11T23:33:23.842961700, askQuantity=15.0778, bidSource=HUOBI, priceId=829d942b-121c-452c-b6ec-f6ae2c20181a, bidPrice=0.04343424680631513}
2024-08-11 23:33:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.87, askSource=BINANCE, bidQuantity=2.3226, symbol=ETHUSDT, priceDate=2024-08-11T23:33:23.842961700, askQuantity=15.0778, bidSource=HUOBI, priceId=921a995d-74be-4d0f-8bff-6fe80a412ddd, bidPrice=2619.81}
2024-08-11 23:33:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.023307033716186, askSource=HUOBI, bidQuantity=0.1719, symbol=BTCETH, priceDate=2024-08-11T23:33:23.842961700, askQuantity=0.020425519205878172, bidSource=BINANCE, priceId=11df7597-d9c2-42a1-99c7-817ce9a8860c, bidPrice=23.02336122067915}
2024-08-11 23:33:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(877800222<open>)] after transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@94b909c]
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60313.28, BidQty - 5.39151, Ask - 60313.29, askQuantity - 0.44162
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.42, BidQty - 27.9886, Ask - 2620.43, askQuantity - 4.3337
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016558351110316, BidQty - 1.2160202048039834, Ask - 23.016650002671327, AskQty - 0.019186979858004764
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344680915267597, BidQty - 5.39151, Ask - 0.043446982157163395, AskQty - 4.3337
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.39, BidQty - 8.5234, Ask - 2619.4, askQuantity - 0.5553
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60304.29, BidQty - 0.031344, Ask - 60304.3, askQuantity - 0.574339
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022176834389555, BidQty - 0.031344, Ask - 23.022268543439505, AskQty - 0.024947107141779275
2024-08-11 23:33:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043436206041691884, BidQty - 0.031344, Ask - 0.04343637907021209, AskQty - 0.5553
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e6cc4278-da2c-49d6-82fc-008c3d245bbf, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7fcfbe79-060c-453e-b4b2-4828a365168d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 91392a68-49d8-40c8-8029-06d2cf791774, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1679590407<open>)] for JPA transaction
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1802afed-a2e8-41e1-a381-596aff7eded0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1679590407<open>)]
2024-08-11 23:33:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60304.3, askSource=HUOBI, bidQuantity=5.39151, symbol=BTCUSDT, priceDate=2024-08-11T23:33:33.881120200, askQuantity=0.574339, bidSource=BINANCE, priceId=7fcfbe79-060c-453e-b4b2-4828a365168d, bidPrice=60313.28}
2024-08-11 23:33:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.016650002671327, askSource=BINANCE, bidQuantity=0.031344, symbol=BTCETH, priceDate=2024-08-11T23:33:33.881120200, askQuantity=0.019186979858004764, bidSource=HUOBI, priceId=91392a68-49d8-40c8-8029-06d2cf791774, bidPrice=23.022176834389555}
2024-08-11 23:33:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343637907021209, askSource=HUOBI, bidQuantity=5.39151, symbol=ETHBTC, priceDate=2024-08-11T23:33:33.881120200, askQuantity=0.5553, bidSource=BINANCE, priceId=1802afed-a2e8-41e1-a381-596aff7eded0, bidPrice=0.04344680915267597}
2024-08-11 23:33:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.4, askSource=HUOBI, bidQuantity=27.9886, symbol=ETHUSDT, priceDate=2024-08-11T23:33:33.881120200, askQuantity=0.5553, bidSource=BINANCE, priceId=e6cc4278-da2c-49d6-82fc-008c3d245bbf, bidPrice=2620.42}
2024-08-11 23:33:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1679590407<open>)] after transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1d2b5eb0]
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60308.0, BidQty - 2.65756, Ask - 60308.01, askQuantity - 1.89391
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.42, BidQty - 5.8129, Ask - 2620.43, askQuantity - 12.8522
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014543414630424, BidQty - 0.2525750737381442, Ask - 23.014635058502073, AskQty - 0.08229155036287883
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345061294511293, BidQty - 2.65756, Ask - 0.04345078596537773, AskQty - 12.8522
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.3, BidQty - 2.5702, Ask - 2620.31, askQuantity - 0.1526
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60314.89, BidQty - 0.162137, Ask - 60314.9, askQuantity - 0.371102
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018226851021446, BidQty - 0.11165933921126274, Ask - 23.01831851314735, AskQty - 0.0161220290608125
2024-08-11 23:33:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344365985850926, BidQty - 0.162137, Ask - 0.04344383285785649, AskQty - 0.1526
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d37c5815-c9b5-4d67-97af-a9fbfe172b47, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9dfe894e-3ab0-4eda-85f1-bbfc679de3c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 28f3fc93-8099-47a5-908a-b185f42e4ec8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1965606659<open>)] for JPA transaction
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ecbaff45-de62-4e04-aa9c-ef795860de85, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1965606659<open>)]
2024-08-11 23:33:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60308.01, askSource=BINANCE, bidQuantity=0.162137, symbol=BTCUSDT, priceDate=2024-08-11T23:33:43.792172800, askQuantity=1.89391, bidSource=HUOBI, priceId=9dfe894e-3ab0-4eda-85f1-bbfc679de3c9, bidPrice=60314.89}
2024-08-11 23:33:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.31, askSource=HUOBI, bidQuantity=5.8129, symbol=ETHUSDT, priceDate=2024-08-11T23:33:43.792172800, askQuantity=0.1526, bidSource=BINANCE, priceId=d37c5815-c9b5-4d67-97af-a9fbfe172b47, bidPrice=2620.42}
2024-08-11 23:33:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344383285785649, askSource=HUOBI, bidQuantity=2.65756, symbol=ETHBTC, priceDate=2024-08-11T23:33:43.792172800, askQuantity=0.1526, bidSource=BINANCE, priceId=ecbaff45-de62-4e04-aa9c-ef795860de85, bidPrice=0.04345061294511293}
2024-08-11 23:33:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.014635058502073, askSource=BINANCE, bidQuantity=0.11165933921126274, symbol=BTCETH, priceDate=2024-08-11T23:33:43.792172800, askQuantity=0.08229155036287883, bidSource=HUOBI, priceId=28f3fc93-8099-47a5-908a-b185f42e4ec8, bidPrice=23.018226851021446}
2024-08-11 23:33:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1965606659<open>)] after transaction
2024-08-11 23:33:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:33:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@255b0b3f]
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:33:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60295.82, BidQty - 0.55055, Ask - 60295.83, askQuantity - 1.84683
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.2, BidQty - 7.0899, Ask - 2619.21, askQuantity - 20.6148
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020613085625055, BidQty - 0.3079805031095025, Ask - 23.020704795357364, AskQty - 0.08022473753160043
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343915657185579, BidQty - 0.55055, Ask - 0.043439329625171365, AskQty - 20.6148
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:33:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.3, BidQty - 0.1054, Ask - 2620.31, askQuantity - 0.9389
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60314.89, BidQty - 0.015307, Ask - 60314.9, askQuantity - 0.371513
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018226851021446, BidQty - 0.004578979983218074, Ask - 23.01831851314735, AskQty - 0.01613988440501435
2024-08-11 23:33:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344365985850926, BidQty - 0.015307, Ask - 0.04344383285785649, AskQty - 0.9389
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c3d4320f-eba7-4efd-98db-962b6739753f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 86097246-d513-411b-83ee-8e958e57a1c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 762a6220-e339-4fba-bb62-8b0ff6fd4185, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1270542645<open>)] for JPA transaction
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7253949f-2d0f-4f58-ad16-593b00fa3212, using strategy: org.hibernate.id.Assigned
2024-08-11 23:33:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1270542645<open>)]
2024-08-11 23:33:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:33:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:33:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:33:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60295.83, askSource=BINANCE, bidQuantity=0.015307, symbol=BTCUSDT, priceDate=2024-08-11T23:33:53.856009800, askQuantity=1.84683, bidSource=HUOBI, priceId=86097246-d513-411b-83ee-8e958e57a1c9, bidPrice=60314.89}
2024-08-11 23:33:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043439329625171365, askSource=BINANCE, bidQuantity=0.015307, symbol=ETHBTC, priceDate=2024-08-11T23:33:53.856009800, askQuantity=20.6148, bidSource=HUOBI, priceId=7253949f-2d0f-4f58-ad16-593b00fa3212, bidPrice=0.04344365985850926}
2024-08-11 23:33:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.21, askSource=BINANCE, bidQuantity=0.1054, symbol=ETHUSDT, priceDate=2024-08-11T23:33:53.856009800, askQuantity=20.6148, bidSource=HUOBI, priceId=c3d4320f-eba7-4efd-98db-962b6739753f, bidPrice=2620.3}
2024-08-11 23:33:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01831851314735, askSource=HUOBI, bidQuantity=0.3079805031095025, symbol=BTCETH, priceDate=2024-08-11T23:33:53.856009800, askQuantity=0.01613988440501435, bidSource=BINANCE, priceId=762a6220-e339-4fba-bb62-8b0ff6fd4185, bidPrice=23.020613085625055}
2024-08-11 23:33:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:33:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1270542645<open>)] after transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@10498b65]
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60278.14, BidQty - 1.78193, Ask - 60278.15, askQuantity - 5.28377
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.86, BidQty - 4.7038, Ask - 2618.87, askQuantity - 15.3942
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01685077915284, BidQty - 0.20436331821121223, Ask - 23.01694248642539, AskQty - 0.2295600296658076
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344625705997945, BidQty - 1.78193, Ask - 0.04344643016523071, AskQty - 15.3942
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.3, BidQty - 0.0979, Ask - 2619.31, askQuantity - 0.5633
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60289.61, BidQty - 0.008266, Ask - 60289.62, askQuantity - 0.321449
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01736335141698, BidQty - 0.004253310794347483, Ask - 23.017455045241093, AskQty - 0.013965444892503884
2024-08-11 23:34:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344528958716277, BidQty - 0.008266, Ask - 0.04344546265932057, AskQty - 0.5633
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4db77254-17f1-4826-933d-0317b4e9bf38, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0074d667-e6b9-4909-97e6-ef28950edf34, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 85eaad37-c04b-4f92-9105-261ea0b8c34e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1210707761<open>)] for JPA transaction
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1689f476-c67e-42b4-8a48-6fa9cb42ec07, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1210707761<open>)]
2024-08-11 23:34:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60278.15, askSource=BINANCE, bidQuantity=0.008266, symbol=BTCUSDT, priceDate=2024-08-11T23:34:03.872686, askQuantity=5.28377, bidSource=HUOBI, priceId=0074d667-e6b9-4909-97e6-ef28950edf34, bidPrice=60289.61}
2024-08-11 23:34:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01694248642539, askSource=BINANCE, bidQuantity=0.004253310794347483, symbol=BTCETH, priceDate=2024-08-11T23:34:03.872686, askQuantity=0.2295600296658076, bidSource=HUOBI, priceId=85eaad37-c04b-4f92-9105-261ea0b8c34e, bidPrice=23.01736335141698}
2024-08-11 23:34:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344546265932057, askSource=HUOBI, bidQuantity=1.78193, symbol=ETHBTC, priceDate=2024-08-11T23:34:03.872686, askQuantity=0.5633, bidSource=BINANCE, priceId=1689f476-c67e-42b4-8a48-6fa9cb42ec07, bidPrice=0.04344625705997945}
2024-08-11 23:34:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.87, askSource=BINANCE, bidQuantity=0.0979, symbol=ETHUSDT, priceDate=2024-08-11T23:34:03.872686, askQuantity=15.3942, bidSource=HUOBI, priceId=4db77254-17f1-4826-933d-0317b4e9bf38, bidPrice=2619.3}
2024-08-11 23:34:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1210707761<open>)] after transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@53c69036]
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60251.99, BidQty - 5.38099, Ask - 60252.0, askQuantity - 0.0882
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.99, BidQty - 60.311, Ask - 2617.0, askQuantity - 6.4709
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023305311425297, BidQty - 2.6195630550957736, Ask - 23.02339710889228, AskQty - 0.003830885580561641
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343407687711611, BidQty - 5.38099, Ask - 0.04343425005547535, AskQty - 2.0306555284677112
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.77, BidQty - 0.0108, Ask - 2618.06, askQuantity - 0.5
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60255.17, BidQty - 0.049787, Ask - 60255.18, askQuantity - 0.0562
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01519827658648, BidQty - 4.6925513611529104E-4, Ask - 23.017751750535762, AskQty - 0.0024415938015619567
2024-08-11 23:34:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344472956515938, BidQty - 0.049787, Ask - 0.04344954964030472, AskQty - 0.5
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cf9d530f-dcf0-4ee9-b968-430741acccbb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a86a3752-a941-4359-8ae8-38dcfaa5a85b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5d958f94-8d00-4082-a69f-e200200c997c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(842795603<open>)] for JPA transaction
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8ecb7e33-fea9-4dbc-a191-3affcce77374, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(842795603<open>)]
2024-08-11 23:34:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60252.0, askSource=BINANCE, bidQuantity=0.049787, symbol=BTCUSDT, priceDate=2024-08-11T23:34:13.987927600, askQuantity=0.0882, bidSource=HUOBI, priceId=a86a3752-a941-4359-8ae8-38dcfaa5a85b, bidPrice=60255.17}
2024-08-11 23:34:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.017751750535762, askSource=HUOBI, bidQuantity=2.6195630550957736, symbol=BTCETH, priceDate=2024-08-11T23:34:13.987927600, askQuantity=0.0024415938015619567, bidSource=BINANCE, priceId=5d958f94-8d00-4082-a69f-e200200c997c, bidPrice=23.023305311425297}
2024-08-11 23:34:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343425005547535, askSource=BINANCE, bidQuantity=0.049787, symbol=ETHBTC, priceDate=2024-08-11T23:34:13.987927600, askQuantity=2.0306555284677112, bidSource=HUOBI, priceId=8ecb7e33-fea9-4dbc-a191-3affcce77374, bidPrice=0.04344472956515938}
2024-08-11 23:34:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.0, askSource=BINANCE, bidQuantity=0.0108, symbol=ETHUSDT, priceDate=2024-08-11T23:34:13.987927600, askQuantity=6.4709, bidSource=HUOBI, priceId=cf9d530f-dcf0-4ee9-b968-430741acccbb, bidPrice=2617.77}
2024-08-11 23:34:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(842795603<open>)] after transaction
2024-08-11 23:34:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1ba56af4]
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60285.96, BidQty - 4.28998, Ask - 60285.97, askQuantity - 0.12958
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.84, BidQty - 45.7901, Ask - 2618.85, askQuantity - 4.5194
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0200126009508, BidQty - 1.9891431335753798, Ask - 23.02010432099708, AskQty - 0.005628992735789107
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344028967270495, BidQty - 4.28998, Ask - 0.043440462754511994, AskQty - 2.9829332328312046
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.28, BidQty - 0.5459, Ask - 2617.29, askQuantity - 0.0349
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60264.86, BidQty - 0.267575, Ask - 60264.87, askQuantity - 0.006967
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.025671591608113, BidQty - 0.023708320420888728, Ask - 23.025763387944735, AskQty - 3.025741158986985E-4
2024-08-11 23:34:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04342961330539666, BidQty - 0.267575, Ask - 0.04342978644603173, AskQty - 0.0349
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d8350cb7-8ec5-4746-a1e2-7cf348203669, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c787b7d5-a574-432a-a888-637df05dda87, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4a610443-9980-404e-9f32-1b46939c6770, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1164067056<open>)] for JPA transaction
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b85f194a-cf94-47f9-bf3f-70068ebc7c66, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1164067056<open>)]
2024-08-11 23:34:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60264.87, askSource=HUOBI, bidQuantity=4.28998, symbol=BTCUSDT, priceDate=2024-08-11T23:34:23.764306, askQuantity=0.006967, bidSource=BINANCE, priceId=c787b7d5-a574-432a-a888-637df05dda87, bidPrice=60285.96}
2024-08-11 23:34:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02010432099708, askSource=BINANCE, bidQuantity=0.023708320420888728, symbol=BTCETH, priceDate=2024-08-11T23:34:23.764306, askQuantity=0.005628992735789107, bidSource=HUOBI, priceId=4a610443-9980-404e-9f32-1b46939c6770, bidPrice=23.025671591608113}
2024-08-11 23:34:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04342978644603173, askSource=HUOBI, bidQuantity=4.28998, symbol=ETHBTC, priceDate=2024-08-11T23:34:23.764306, askQuantity=0.0349, bidSource=BINANCE, priceId=b85f194a-cf94-47f9-bf3f-70068ebc7c66, bidPrice=0.04344028967270495}
2024-08-11 23:34:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.29, askSource=HUOBI, bidQuantity=45.7901, symbol=ETHUSDT, priceDate=2024-08-11T23:34:23.764306, askQuantity=0.0349, bidSource=BINANCE, priceId=d8350cb7-8ec5-4746-a1e2-7cf348203669, bidPrice=2618.84}
2024-08-11 23:34:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1164067056<open>)] after transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3560d6e3]
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60285.96, BidQty - 2.44472, Ask - 60285.97, askQuantity - 0.63421
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.19, BidQty - 30.2566, Ask - 2619.2, askQuantity - 6.4314
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016936469150888, BidQty - 1.314536365017659, Ask - 23.01702816519611, AskQty - 0.02755394812258972
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344609533528282, BidQty - 2.44472, Ask - 0.043446268418052894, AskQty - 6.4314
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.9, BidQty - 1.1045, Ask - 2619.05, askQuantity - 3.1527
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60292.69, BidQty - 0.04977, Ask - 60292.7, askQuantity - 0.757286
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02082434470514, BidQty - 0.04797829927641312, Ask - 23.022146702814158, AskQty - 0.032893804812191195
2024-08-11 23:34:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434364359201031, BidQty - 0.04977, Ask - 0.043438930988151304, AskQty - 3.1527
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a0f2f7e7-2702-4cf6-b10c-268ae8842346, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 50b0ceb5-8df5-429b-b4ce-3f07c70a3db5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cc7f20f6-2fb7-4887-a4c1-7bc3ab8a8acf, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1686930357<open>)] for JPA transaction
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 52aeb4e6-06d1-4902-9512-9261ec4ea3cd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1686930357<open>)]
2024-08-11 23:34:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01702816519611, askSource=BINANCE, bidQuantity=0.04797829927641312, symbol=BTCETH, priceDate=2024-08-11T23:34:33.868291800, askQuantity=0.02755394812258972, bidSource=HUOBI, priceId=cc7f20f6-2fb7-4887-a4c1-7bc3ab8a8acf, bidPrice=23.02082434470514}
2024-08-11 23:34:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60285.97, askSource=BINANCE, bidQuantity=0.04977, symbol=BTCUSDT, priceDate=2024-08-11T23:34:33.868291800, askQuantity=0.63421, bidSource=HUOBI, priceId=50b0ceb5-8df5-429b-b4ce-3f07c70a3db5, bidPrice=60292.69}
2024-08-11 23:34:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.05, askSource=HUOBI, bidQuantity=30.2566, symbol=ETHUSDT, priceDate=2024-08-11T23:34:33.868291800, askQuantity=3.1527, bidSource=BINANCE, priceId=a0f2f7e7-2702-4cf6-b10c-268ae8842346, bidPrice=2619.19}
2024-08-11 23:34:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043438930988151304, askSource=HUOBI, bidQuantity=2.44472, symbol=ETHBTC, priceDate=2024-08-11T23:34:33.868291800, askQuantity=3.1527, bidSource=BINANCE, priceId=52aeb4e6-06d1-4902-9512-9261ec4ea3cd, bidPrice=0.04344609533528282}
2024-08-11 23:34:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1686930357<open>)] after transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@51581228]
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60283.99, BidQty - 0.01041, Ask - 60284.0, askQuantity - 3.98347
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.32, BidQty - 0.308, Ask - 2618.33, askQuantity - 16.0138
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02383198450921, BidQty - 0.01041, Ask - 23.023923737358306, AskQty - 0.17301438475217304
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343308340521532, BidQty - 0.01041, Ask - 0.04343325649148306, AskQty - 16.0138
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.08, BidQty - 1.0, Ask - 2619.28, askQuantity - 0.5
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60292.69, BidQty - 0.308812, Ask - 60292.7, askQuantity - 0.241873
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01880287712654, BidQty - 0.043442745712622875, Ask - 23.02056447302106, AskQty - 0.010506823161676289
2024-08-11 23:34:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343942135615091, BidQty - 0.308812, Ask - 0.043442745712622875, AskQty - 0.5
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f00c263f-138b-470c-afbb-749b8cd0132b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 57f4d850-e080-455f-8d0c-cc7d4e340478, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 794e29f6-6c56-4315-8439-017158575c9d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(302596749<open>)] for JPA transaction
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 186f0c4f-7085-413d-a447-5db66178f080, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(302596749<open>)]
2024-08-11 23:34:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60284.0, askSource=BINANCE, bidQuantity=0.308812, symbol=BTCUSDT, priceDate=2024-08-11T23:34:43.737941700, askQuantity=3.98347, bidSource=HUOBI, priceId=57f4d850-e080-455f-8d0c-cc7d4e340478, bidPrice=60292.69}
2024-08-11 23:34:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343325649148306, askSource=BINANCE, bidQuantity=0.308812, symbol=ETHBTC, priceDate=2024-08-11T23:34:43.737941700, askQuantity=16.0138, bidSource=HUOBI, priceId=186f0c4f-7085-413d-a447-5db66178f080, bidPrice=0.04343942135615091}
2024-08-11 23:34:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.33, askSource=BINANCE, bidQuantity=1.0, symbol=ETHUSDT, priceDate=2024-08-11T23:34:43.737941700, askQuantity=16.0138, bidSource=HUOBI, priceId=f00c263f-138b-470c-afbb-749b8cd0132b, bidPrice=2619.08}
2024-08-11 23:34:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02056447302106, askSource=HUOBI, bidQuantity=0.01041, symbol=BTCETH, priceDate=2024-08-11T23:34:43.737941700, askQuantity=0.010506823161676289, bidSource=BINANCE, priceId=794e29f6-6c56-4315-8439-017158575c9d, bidPrice=23.02383198450921}
2024-08-11 23:34:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(302596749<open>)] after transaction
2024-08-11 23:34:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:34:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5aa72ea3]
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:34:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60249.99, BidQty - 2.28003, Ask - 60250.0, askQuantity - 5.18086
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.4, BidQty - 5.055, Ask - 2617.41, askQuantity - 26.3845
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018934748472727, BidQty - 0.21960182151067575, Ask - 23.019026514862077, AskQty - 0.22506859691286307
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043442323651452286, BidQty - 2.28003, Ask - 0.04344249683692893, AskQty - 26.3845
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:34:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.05, BidQty - 0.1212, Ask - 2617.06, askQuantity - 1.0286
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60256.54, BidQty - 0.162187, Ask - 60256.55, askQuantity - 0.045161
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.024516060006267, BidQty - 0.005263954286123963, Ask - 23.024607859995033, AskQty - 0.001961423198805773
2024-08-11 23:34:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343179289222499, BidQty - 0.162187, Ask - 0.0434319660571284, AskQty - 1.0286
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 54dc7a38-8e91-487d-b2ca-297e8253ebbb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1dba4200-2f49-4456-8b65-24a336c80244, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9775a937-b84f-4060-9287-e4b2ab054e27, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1357693986<open>)] for JPA transaction
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bc0d5b1e-7ef8-4958-bb4b-48363d0045bc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:34:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1357693986<open>)]
2024-08-11 23:34:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:34:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:34:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:34:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434319660571284, askSource=HUOBI, bidQuantity=2.28003, symbol=ETHBTC, priceDate=2024-08-11T23:34:53.879249300, askQuantity=1.0286, bidSource=BINANCE, priceId=bc0d5b1e-7ef8-4958-bb4b-48363d0045bc, bidPrice=0.043442323651452286}
2024-08-11 23:34:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019026514862077, askSource=BINANCE, bidQuantity=0.005263954286123963, symbol=BTCETH, priceDate=2024-08-11T23:34:53.879249300, askQuantity=0.22506859691286307, bidSource=HUOBI, priceId=9775a937-b84f-4060-9287-e4b2ab054e27, bidPrice=23.024516060006267}
2024-08-11 23:34:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60250.0, askSource=BINANCE, bidQuantity=0.162187, symbol=BTCUSDT, priceDate=2024-08-11T23:34:53.879249300, askQuantity=5.18086, bidSource=HUOBI, priceId=1dba4200-2f49-4456-8b65-24a336c80244, bidPrice=60256.54}
2024-08-11 23:34:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.06, askSource=HUOBI, bidQuantity=5.055, symbol=ETHUSDT, priceDate=2024-08-11T23:34:53.879249300, askQuantity=1.0286, bidSource=BINANCE, priceId=54dc7a38-8e91-487d-b2ca-297e8253ebbb, bidPrice=2617.4}
2024-08-11 23:34:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:34:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1357693986<open>)] after transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@77757478]
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60272.0, BidQty - 0.56563, Ask - 60272.01, askQuantity - 2.07459
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.54, BidQty - 26.4638, Ask - 2618.55, askQuantity - 4.0832
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017318745107023, BidQty - 0.56563, Ask - 23.017410465373835, AskQty - 0.09013133788967716
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344537373152148, BidQty - 0.56563, Ask - 0.043445546854260685, AskQty - 4.0832
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.64, BidQty - 0.0223, Ask - 2618.72, askQuantity - 0.5
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60283.95, BidQty - 0.177773, Ask - 60283.96, askQuantity - 0.702599
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020387823058595, BidQty - 9.68706529681615E-4, Ask - 23.0210949195002, AskQty - 0.030519790759598403
2024-08-11 23:35:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343842043555201, BidQty - 0.177773, Ask - 0.04343975469424283, AskQty - 0.5
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 614a4f32-00c2-4514-9698-dcc0f1d4e5c7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6e0da330-b073-4ed6-a083-f1327df36767, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: efb0df2f-5880-4084-879a-e99c5e39a597, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2125529963<open>)] for JPA transaction
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: afda8732-7857-4168-9ad5-5100ca0280ed, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2125529963<open>)]
2024-08-11 23:35:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60272.01, askSource=BINANCE, bidQuantity=0.177773, symbol=BTCUSDT, priceDate=2024-08-11T23:35:03.740183300, askQuantity=2.07459, bidSource=HUOBI, priceId=6e0da330-b073-4ed6-a083-f1327df36767, bidPrice=60283.95}
2024-08-11 23:35:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343975469424283, askSource=HUOBI, bidQuantity=0.56563, symbol=ETHBTC, priceDate=2024-08-11T23:35:03.740183300, askQuantity=0.5, bidSource=BINANCE, priceId=afda8732-7857-4168-9ad5-5100ca0280ed, bidPrice=0.04344537373152148}
2024-08-11 23:35:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.017410465373835, askSource=BINANCE, bidQuantity=9.68706529681615E-4, symbol=BTCETH, priceDate=2024-08-11T23:35:03.740183300, askQuantity=0.09013133788967716, bidSource=HUOBI, priceId=efb0df2f-5880-4084-879a-e99c5e39a597, bidPrice=23.020387823058595}
2024-08-11 23:35:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.55, askSource=BINANCE, bidQuantity=0.0223, symbol=ETHUSDT, priceDate=2024-08-11T23:35:03.740183300, askQuantity=4.0832, bidSource=HUOBI, priceId=614a4f32-00c2-4514-9698-dcc0f1d4e5c7, bidPrice=2618.64}
2024-08-11 23:35:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2125529963<open>)] after transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5a1cbc9b]
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60267.99, BidQty - 1.5472, Ask - 60268.0, askQuantity - 2.42009
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.4, BidQty - 6.3283, Ask - 2618.41, askQuantity - 16.0399
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017017961281848, BidQty - 0.2749400469967556, Ask - 23.017109685304003, AskQty - 0.10514308847149399
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344594146147209, BidQty - 1.5472, Ask - 0.04344611459582442, AskQty - 16.0399
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.78, BidQty - 0.5095, Ask - 2618.97, askQuantity - 0.5
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60278.28, BidQty - 0.072788, Ask - 60281.28, askQuantity - 0.311143
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016025384025017, BidQty - 0.022136750003483842, Ask - 23.018840834281608, AskQty - 0.013516883940420645
2024-08-11 23:35:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043442674077259144, BidQty - 0.072788, Ask - 0.043447988230586536, AskQty - 0.5
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f63f8fc8-d242-4b84-b85a-e5da24c3c3e9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 775f6775-f6c8-420d-b285-5635dd19a886, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: eb60fc2d-26dd-4fbc-8d4c-1434edbf758e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1699273962<open>)] for JPA transaction
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1a6d44dc-235c-4b8f-92ce-619fe774f470, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1699273962<open>)]
2024-08-11 23:35:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60268.0, askSource=BINANCE, bidQuantity=0.072788, symbol=BTCUSDT, priceDate=2024-08-11T23:35:13.752928700, askQuantity=2.42009, bidSource=HUOBI, priceId=775f6775-f6c8-420d-b285-5635dd19a886, bidPrice=60278.28}
2024-08-11 23:35:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.017109685304003, askSource=BINANCE, bidQuantity=0.2749400469967556, symbol=BTCETH, priceDate=2024-08-11T23:35:13.752928700, askQuantity=0.10514308847149399, bidSource=BINANCE, priceId=eb60fc2d-26dd-4fbc-8d4c-1434edbf758e, bidPrice=23.017017961281848}
2024-08-11 23:35:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344611459582442, askSource=BINANCE, bidQuantity=1.5472, symbol=ETHBTC, priceDate=2024-08-11T23:35:13.752928700, askQuantity=16.0399, bidSource=BINANCE, priceId=1a6d44dc-235c-4b8f-92ce-619fe774f470, bidPrice=0.04344594146147209}
2024-08-11 23:35:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.41, askSource=BINANCE, bidQuantity=0.5095, symbol=ETHUSDT, priceDate=2024-08-11T23:35:13.752928700, askQuantity=16.0399, bidSource=HUOBI, priceId=f63f8fc8-d242-4b84-b85a-e5da24c3c3e9, bidPrice=2618.78}
2024-08-11 23:35:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1699273962<open>)] after transaction
2024-08-11 23:35:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7615ad52]
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60252.99, BidQty - 1.74922, Ask - 60253.0, askQuantity - 3.8044
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.67, BidQty - 14.1603, Ask - 2617.68, askQuantity - 11.5171
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017706518749428, BidQty - 0.6151916129639375, Ask - 23.017798270981444, AskQty - 0.16528079511393623
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344464176057624, BidQty - 1.74922, Ask - 0.043444814937814706, AskQty - 11.5171
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.17, BidQty - 1.3243, Ask - 2618.18, askQuantity - 3.3876
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60263.89, BidQty - 0.001528, Ask - 60263.9, askQuantity - 0.578618
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017473970468036, BidQty - 0.001528, Ask - 23.017565704289638, AskQty - 0.025138105716025677
2024-08-11 23:35:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344508071996668, BidQty - 0.001528, Ask - 0.04344525386595521, AskQty - 3.3876
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 815f0b49-bf62-4f4d-a3aa-963fe7701f9e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e84a139e-9601-40b0-9d36-afeba9406167, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2205964d-7ae7-4c58-9191-b25257754124, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1279525107<open>)] for JPA transaction
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3c4600d9-f780-46a0-9e0a-e3f1260b442a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1279525107<open>)]
2024-08-11 23:35:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60253.0, askSource=BINANCE, bidQuantity=0.001528, symbol=BTCUSDT, priceDate=2024-08-11T23:35:23.752086400, askQuantity=3.8044, bidSource=HUOBI, priceId=e84a139e-9601-40b0-9d36-afeba9406167, bidPrice=60263.89}
2024-08-11 23:35:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.017565704289638, askSource=HUOBI, bidQuantity=0.6151916129639375, symbol=BTCETH, priceDate=2024-08-11T23:35:23.752086400, askQuantity=0.025138105716025677, bidSource=BINANCE, priceId=2205964d-7ae7-4c58-9191-b25257754124, bidPrice=23.017706518749428}
2024-08-11 23:35:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043444814937814706, askSource=BINANCE, bidQuantity=0.001528, symbol=ETHBTC, priceDate=2024-08-11T23:35:23.752086400, askQuantity=11.5171, bidSource=HUOBI, priceId=3c4600d9-f780-46a0-9e0a-e3f1260b442a, bidPrice=0.04344508071996668}
2024-08-11 23:35:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.68, askSource=BINANCE, bidQuantity=1.3243, symbol=ETHUSDT, priceDate=2024-08-11T23:35:23.752086400, askQuantity=11.5171, bidSource=HUOBI, priceId=815f0b49-bf62-4f4d-a3aa-963fe7701f9e, bidPrice=2618.17}
2024-08-11 23:35:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1279525107<open>)] after transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4769903]
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60262.88, BidQty - 1.24904, Ask - 60262.89, askQuantity - 2.32382
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.99, BidQty - 5.9755, Ask - 2619.0, askQuantity - 18.3099
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00988163421153, BidQty - 0.2596927743911343, Ask - 23.009973310321918, AskQty - 0.10099185986267833
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345941590255628, BidQty - 1.24904, Ask - 0.043459589053825506, AskQty - 18.3099
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.97, BidQty - 0.121, Ask - 2618.98, askQuantity - 0.9545
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60263.89, BidQty - 0.314625, Ask - 60263.9, askQuantity - 0.205217
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010442996891918, BidQty - 0.005258481986476479, Ask - 23.01053467584585, AskQty - 0.00891839337464054
2024-08-11 23:35:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345835566566385, BidQty - 0.314625, Ask - 0.043458528813855195, AskQty - 0.9545
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f43d5252-c6b0-4f78-9d54-825e362d5bf5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 724e983d-04de-45b3-bd01-7d75915cdc32, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 092b85f1-f296-4d53-9eec-a62be8fd1d36, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1205721980<open>)] for JPA transaction
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 682f4883-acc7-4f32-83c2-0b7d5dc4df61, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1205721980<open>)]
2024-08-11 23:35:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043458528813855195, askSource=HUOBI, bidQuantity=1.24904, symbol=ETHBTC, priceDate=2024-08-11T23:35:33.913305700, askQuantity=0.9545, bidSource=BINANCE, priceId=682f4883-acc7-4f32-83c2-0b7d5dc4df61, bidPrice=0.04345941590255628}
2024-08-11 23:35:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.009973310321918, askSource=BINANCE, bidQuantity=0.005258481986476479, symbol=BTCETH, priceDate=2024-08-11T23:35:33.913305700, askQuantity=0.10099185986267833, bidSource=HUOBI, priceId=092b85f1-f296-4d53-9eec-a62be8fd1d36, bidPrice=23.010442996891918}
2024-08-11 23:35:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60262.89, askSource=BINANCE, bidQuantity=0.314625, symbol=BTCUSDT, priceDate=2024-08-11T23:35:33.913305700, askQuantity=2.32382, bidSource=HUOBI, priceId=724e983d-04de-45b3-bd01-7d75915cdc32, bidPrice=60263.89}
2024-08-11 23:35:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.98, askSource=HUOBI, bidQuantity=5.9755, symbol=ETHUSDT, priceDate=2024-08-11T23:35:33.913305700, askQuantity=0.9545, bidSource=BINANCE, priceId=f43d5252-c6b0-4f78-9d54-825e362d5bf5, bidPrice=2618.99}
2024-08-11 23:35:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1205721980<open>)] after transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6aaf75c2]
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60249.99, BidQty - 5.59701, Ask - 60250.0, askQuantity - 0.19493
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.64, BidQty - 6.2687, Ask - 2618.65, askQuantity - 18.6792
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.008034674355105, BidQty - 0.2724569955115345, Ask - 23.00812635566554, AskQty - 0.00847222398672199
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346290456431535, BidQty - 5.59701, Ask - 0.04346307775320793, AskQty - 4.48495619907204
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.76, BidQty - 0.5, Ask - 2619.01, askQuantity - 3.0
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60260.18, BidQty - 0.152554, Ask - 60260.19, askQuantity - 0.01241
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00876285313916, BidQty - 0.02173085111926317, Ask - 23.010963203959125, AskQty - 5.393081502066289E-4
2024-08-11 23:35:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345754635025213, BidQty - 0.152554, Ask - 0.04346170223852634, AskQty - 0.28553874700745696
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4a158c67-5f08-4c69-9d8f-ba7afd70c05b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e38c53a5-6786-47cd-a358-a8c6d9c060fd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9883bbb1-4366-4205-984c-82a0bc31747c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1108178991<open>)] for JPA transaction
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 509ba714-ab48-4fc2-abbe-3e556eb35e04, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1108178991<open>)]
2024-08-11 23:35:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.65, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:35:43.770150900, askQuantity=18.6792, bidSource=HUOBI, priceId=4a158c67-5f08-4c69-9d8f-ba7afd70c05b, bidPrice=2618.76}
2024-08-11 23:35:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00812635566554, askSource=BINANCE, bidQuantity=0.02173085111926317, symbol=BTCETH, priceDate=2024-08-11T23:35:43.770150900, askQuantity=0.00847222398672199, bidSource=HUOBI, priceId=9883bbb1-4366-4205-984c-82a0bc31747c, bidPrice=23.00876285313916}
2024-08-11 23:35:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60250.0, askSource=BINANCE, bidQuantity=0.152554, symbol=BTCUSDT, priceDate=2024-08-11T23:35:43.770150900, askQuantity=0.19493, bidSource=HUOBI, priceId=e38c53a5-6786-47cd-a358-a8c6d9c060fd, bidPrice=60260.18}
2024-08-11 23:35:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346170223852634, askSource=HUOBI, bidQuantity=5.59701, symbol=ETHBTC, priceDate=2024-08-11T23:35:43.770150900, askQuantity=0.28553874700745696, bidSource=BINANCE, priceId=509ba714-ab48-4fc2-abbe-3e556eb35e04, bidPrice=0.04346290456431535}
2024-08-11 23:35:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1108178991<open>)] after transaction
2024-08-11 23:35:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:35:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3736693e]
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:35:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60255.99, BidQty - 3.1598, Ask - 60256.0, askQuantity - 0.74674
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.65, BidQty - 7.5225, Ask - 2618.66, askQuantity - 14.1472
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010238060687527, BidQty - 0.32691969462289144, Ask - 23.010329750062056, AskQty - 0.032452381522172065
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345874269782263, BidQty - 3.1598, Ask - 0.04345891586877919, AskQty - 14.1472
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:35:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.51, BidQty - 0.5309, Ask - 2618.53, askQuantity - 2.7854
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60257.34, BidQty - 0.079763, Ask - 60257.35, askQuantity - 0.033191
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011895987443335, BidQty - 0.02307067615331178, Ask - 23.01207556969421, AskQty - 0.0014423296977049275
2024-08-11 23:35:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345544568421944, BidQty - 0.079763, Ask - 0.043455784805635306, AskQty - 0.7637878397192316
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5d9f038a-d4fd-4db3-a4f0-99c251b27cea, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b668a685-5a94-48cc-b167-27793346a52e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3b46f3ca-eac5-42e3-ba95-cbf650ac12f8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(267752832<open>)] for JPA transaction
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9587f1bc-8312-4654-bb66-892cf5128a8f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:35:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(267752832<open>)]
2024-08-11 23:35:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:35:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:35:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:35:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.53, askSource=HUOBI, bidQuantity=7.5225, symbol=ETHUSDT, priceDate=2024-08-11T23:35:53.807206500, askQuantity=2.7854, bidSource=BINANCE, priceId=5d9f038a-d4fd-4db3-a4f0-99c251b27cea, bidPrice=2618.65}
2024-08-11 23:35:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.010329750062056, askSource=BINANCE, bidQuantity=0.02307067615331178, symbol=BTCETH, priceDate=2024-08-11T23:35:53.807206500, askQuantity=0.032452381522172065, bidSource=HUOBI, priceId=3b46f3ca-eac5-42e3-ba95-cbf650ac12f8, bidPrice=23.011895987443335}
2024-08-11 23:35:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60256.0, askSource=BINANCE, bidQuantity=0.079763, symbol=BTCUSDT, priceDate=2024-08-11T23:35:53.807206500, askQuantity=0.74674, bidSource=HUOBI, priceId=b668a685-5a94-48cc-b167-27793346a52e, bidPrice=60257.34}
2024-08-11 23:35:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043455784805635306, askSource=HUOBI, bidQuantity=3.1598, symbol=ETHBTC, priceDate=2024-08-11T23:35:53.807206500, askQuantity=0.7637878397192316, bidSource=BINANCE, priceId=9587f1bc-8312-4654-bb66-892cf5128a8f, bidPrice=0.04345874269782263}
2024-08-11 23:35:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:35:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(267752832<open>)] after transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@386e353a]
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60262.88, BidQty - 0.24015, Ask - 60262.89, askQuantity - 3.23751
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.4, BidQty - 9.798, Ask - 2618.41, askQuantity - 17.8107
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015066395255136, BidQty - 0.24015, Ask - 23.015158111824014, AskQty - 0.14066859694249645
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344962546602063, BidQty - 0.24015, Ask - 0.04344979861566523, AskQty - 17.8107
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.99, BidQty - 0.0894, Ask - 2619.3, askQuantity - 0.3323
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60265.49, BidQty - 0.112256, Ask - 60265.5, askQuantity - 0.080319
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.008242660252737, BidQty - 0.003885564026775523, Ask - 23.010969877700948, AskQty - 0.003490465652985539
2024-08-11 23:36:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043457533746505045, BidQty - 0.112256, Ask - 0.04346268486326089, AskQty - 0.3323
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6130a92f-e73e-4097-ada1-554b2fa120a3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e694073a-98e3-4209-862f-55a9a1accf28, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 190f8e9a-6483-44f8-94a6-9be955a8832d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(101209832<open>)] for JPA transaction
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d3b7dfc4-ae2a-4a13-9e01-f25fe042141f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(101209832<open>)]
2024-08-11 23:36:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60262.89, askSource=BINANCE, bidQuantity=0.112256, symbol=BTCUSDT, priceDate=2024-08-11T23:36:03.782441300, askQuantity=3.23751, bidSource=HUOBI, priceId=e694073a-98e3-4209-862f-55a9a1accf28, bidPrice=60265.49}
2024-08-11 23:36:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.010969877700948, askSource=HUOBI, bidQuantity=0.24015, symbol=BTCETH, priceDate=2024-08-11T23:36:03.782441300, askQuantity=0.003490465652985539, bidSource=BINANCE, priceId=190f8e9a-6483-44f8-94a6-9be955a8832d, bidPrice=23.015066395255136}
2024-08-11 23:36:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.41, askSource=BINANCE, bidQuantity=0.0894, symbol=ETHUSDT, priceDate=2024-08-11T23:36:03.782441300, askQuantity=17.8107, bidSource=HUOBI, priceId=6130a92f-e73e-4097-ada1-554b2fa120a3, bidPrice=2618.99}
2024-08-11 23:36:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344979861566523, askSource=BINANCE, bidQuantity=0.112256, symbol=ETHBTC, priceDate=2024-08-11T23:36:03.782441300, askQuantity=17.8107, bidSource=HUOBI, priceId=d3b7dfc4-ae2a-4a13-9e01-f25fe042141f, bidPrice=0.043457533746505045}
2024-08-11 23:36:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(101209832<open>)] after transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3ffcd74b]
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60274.0, BidQty - 3.00439, Ask - 60274.01, askQuantity - 0.31141
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.57, BidQty - 12.307, Ask - 2618.58, askQuantity - 4.4819
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017818817832566, BidQty - 0.5346727288714869, Ask - 23.017910538958287, AskQty - 0.013529029903601901
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344442986288784, BidQty - 3.00439, Ask - 0.04344460297972592, AskQty - 4.4819
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.68, BidQty - 1.1527, Ask - 2618.69, askQuantity - 0.1052
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60269.72, BidQty - 0.049775, Ask - 60269.73, askQuantity - 0.006966
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015217532430338, BidQty - 0.049775, Ask - 23.015309239769657, AskQty - 3.026681035405335E-4
2024-08-11 23:36:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344934015798643, BidQty - 0.049775, Ask - 0.04344951328793298, AskQty - 0.1052
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 43c3eb76-de9b-486e-9eca-3637c3d75a3e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: dbd30ca4-6c4f-4602-9b5d-12e04be2efae, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a697f609-68a8-46e3-9b3a-efb9c5278ef1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2069241731<open>)] for JPA transaction
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ff336d4d-973d-4fd2-a787-595e91750bfd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2069241731<open>)]
2024-08-11 23:36:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344460297972592, askSource=BINANCE, bidQuantity=0.049775, symbol=ETHBTC, priceDate=2024-08-11T23:36:13.743689100, askQuantity=4.4819, bidSource=HUOBI, priceId=ff336d4d-973d-4fd2-a787-595e91750bfd, bidPrice=0.04344934015798643}
2024-08-11 23:36:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.58, askSource=BINANCE, bidQuantity=1.1527, symbol=ETHUSDT, priceDate=2024-08-11T23:36:13.743689100, askQuantity=4.4819, bidSource=HUOBI, priceId=43c3eb76-de9b-486e-9eca-3637c3d75a3e, bidPrice=2618.68}
2024-08-11 23:36:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60269.73, askSource=HUOBI, bidQuantity=3.00439, symbol=BTCUSDT, priceDate=2024-08-11T23:36:13.743689100, askQuantity=0.006966, bidSource=BINANCE, priceId=dbd30ca4-6c4f-4602-9b5d-12e04be2efae, bidPrice=60274.0}
2024-08-11 23:36:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.015309239769657, askSource=HUOBI, bidQuantity=0.5346727288714869, symbol=BTCETH, priceDate=2024-08-11T23:36:13.743689100, askQuantity=3.026681035405335E-4, bidSource=BINANCE, priceId=a697f609-68a8-46e3-9b3a-efb9c5278ef1, bidPrice=23.017818817832566}
2024-08-11 23:36:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2069241731<open>)] after transaction
2024-08-11 23:36:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@674103cd]
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60298.96, BidQty - 2.28946, Ask - 60298.97, askQuantity - 0.60053
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.78, BidQty - 24.9012, Ask - 2619.79, askQuantity - 4.3867
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016715080216354, BidQty - 1.0818746251676645, Ask - 23.016806754765668, AskQty - 0.02609093461132089
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344651326548364, BidQty - 2.28946, Ask - 0.04344668631100768, AskQty - 4.3867
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.45, BidQty - 0.5, Ask - 2619.76, askQuantity - 0.289
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60294.46, BidQty - 0.217031, Ask - 60294.47, askQuantity - 0.040132
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015260939933427, BidQty - 0.021724715670394926, Ask - 23.017988509038158, AskQty - 0.001743505953365209
2024-08-11 23:36:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344428270121621, BidQty - 0.217031, Ask - 0.04344943134078985, AskQty - 0.289
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0f21655f-c33b-4fee-a770-bc061407ca13, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: abe1a496-535a-480a-a615-f4c2f41d5076, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c88890ac-5f36-4559-bd88-e853cf7ccc3f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1200349814<open>)] for JPA transaction
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3acd5e56-a735-4619-b14c-45ca0bb02a20, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1200349814<open>)]
2024-08-11 23:36:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.016806754765668, askSource=BINANCE, bidQuantity=1.0818746251676645, symbol=BTCETH, priceDate=2024-08-11T23:36:23.801377400, askQuantity=0.02609093461132089, bidSource=BINANCE, priceId=c88890ac-5f36-4559-bd88-e853cf7ccc3f, bidPrice=23.016715080216354}
2024-08-11 23:36:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60294.47, askSource=HUOBI, bidQuantity=2.28946, symbol=BTCUSDT, priceDate=2024-08-11T23:36:23.801377400, askQuantity=0.040132, bidSource=BINANCE, priceId=abe1a496-535a-480a-a615-f4c2f41d5076, bidPrice=60298.96}
2024-08-11 23:36:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344668631100768, askSource=BINANCE, bidQuantity=2.28946, symbol=ETHBTC, priceDate=2024-08-11T23:36:23.801377400, askQuantity=4.3867, bidSource=BINANCE, priceId=3acd5e56-a735-4619-b14c-45ca0bb02a20, bidPrice=0.04344651326548364}
2024-08-11 23:36:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.76, askSource=HUOBI, bidQuantity=24.9012, symbol=ETHUSDT, priceDate=2024-08-11T23:36:23.801377400, askQuantity=0.289, bidSource=BINANCE, priceId=0f21655f-c33b-4fee-a770-bc061407ca13, bidPrice=2619.78}
2024-08-11 23:36:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1200349814<open>)] after transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@63710682]
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60303.63, BidQty - 1.32213, Ask - 60303.64, askQuantity - 0.08658
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.44, BidQty - 25.0819, Ask - 2620.45, askQuantity - 0.2962
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012700108759947, BidQty - 1.0899155632090471, Ask - 23.012791744897804, AskQty - 0.003762255399508222
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345409331841328, BidQty - 1.32213, Ask - 0.04345426635179341, AskQty - 0.2962
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.07, BidQty - 1.051, Ask - 2620.08, askQuantity - 0.0973
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60306.84, BidQty - 0.137867, Ask - 60306.85, askQuantity - 0.040128
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017175048090134, BidQty - 0.04566155480870826, Ask - 23.01726671424809, AskQty - 0.001743386845109635
2024-08-11 23:36:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344564506353756, BidQty - 0.137867, Ask - 0.04344581808630663, AskQty - 0.0973
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a8c62a0a-9c2a-4480-a7b3-ee1ff8e5ab2c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b21f38c6-c193-47e9-9413-43e7ce43aa03, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: af901c12-0970-41a5-9912-698f8f0e29f6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1646482090<open>)] for JPA transaction
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 28d138e7-77cb-4f20-ac19-ef5efc469dac, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1646482090<open>)]
2024-08-11 23:36:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60303.64, askSource=BINANCE, bidQuantity=0.137867, symbol=BTCUSDT, priceDate=2024-08-11T23:36:33.859159300, askQuantity=0.08658, bidSource=HUOBI, priceId=b21f38c6-c193-47e9-9413-43e7ce43aa03, bidPrice=60306.84}
2024-08-11 23:36:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.08, askSource=HUOBI, bidQuantity=25.0819, symbol=ETHUSDT, priceDate=2024-08-11T23:36:33.859159300, askQuantity=0.0973, bidSource=BINANCE, priceId=a8c62a0a-9c2a-4480-a7b3-ee1ff8e5ab2c, bidPrice=2620.44}
2024-08-11 23:36:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344581808630663, askSource=HUOBI, bidQuantity=1.32213, symbol=ETHBTC, priceDate=2024-08-11T23:36:33.859159300, askQuantity=0.0973, bidSource=BINANCE, priceId=28d138e7-77cb-4f20-ac19-ef5efc469dac, bidPrice=0.04345409331841328}
2024-08-11 23:36:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012791744897804, askSource=BINANCE, bidQuantity=0.04566155480870826, symbol=BTCETH, priceDate=2024-08-11T23:36:33.859159300, askQuantity=0.003762255399508222, bidSource=HUOBI, priceId=af901c12-0970-41a5-9912-698f8f0e29f6, bidPrice=23.017175048090134}
2024-08-11 23:36:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1646482090<open>)] after transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@80fb8b3]
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60305.99, BidQty - 3.02606, Ask - 60306.0, askQuantity - 2.24721
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.79, BidQty - 31.9025, Ask - 2620.8, askQuantity - 7.6579
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010527319902316, BidQty - 1.3864306348341187, Ask - 23.01061893551181, AskQty - 0.09765969382648493
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434581965310251, BidQty - 3.02606, Ask - 0.0434583695583142, AskQty - 7.6579
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.72, BidQty - 0.0892, Ask - 2620.83, askQuantity - 0.1569
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60306.84, BidQty - 0.01392, Ask - 60306.85, askQuantity - 0.552876
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01058824876089, BidQty - 0.0038764763002007733, Ask - 23.011557892487563, AskQty - 0.024026013474754526
2024-08-11 23:36:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345642327529957, BidQty - 0.01392, Ask - 0.043458254486555756, AskQty - 0.1569
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3a0577a1-0fe9-41e7-92e1-5f02a2d4c52c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5a9f9072-0a81-462d-a810-9b6e60990c6e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5831dd1f-c4ff-40e8-8c4d-d6b6171e723a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1385679652<open>)] for JPA transaction
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 13f808ab-1822-4bb8-88bf-060a27bcd932, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1385679652<open>)]
2024-08-11 23:36:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.8, askSource=BINANCE, bidQuantity=31.9025, symbol=ETHUSDT, priceDate=2024-08-11T23:36:43.815792700, askQuantity=7.6579, bidSource=BINANCE, priceId=3a0577a1-0fe9-41e7-92e1-5f02a2d4c52c, bidPrice=2620.79}
2024-08-11 23:36:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01061893551181, askSource=BINANCE, bidQuantity=0.0038764763002007733, symbol=BTCETH, priceDate=2024-08-11T23:36:43.815792700, askQuantity=0.09765969382648493, bidSource=HUOBI, priceId=5831dd1f-c4ff-40e8-8c4d-d6b6171e723a, bidPrice=23.01058824876089}
2024-08-11 23:36:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60306.0, askSource=BINANCE, bidQuantity=0.01392, symbol=BTCUSDT, priceDate=2024-08-11T23:36:43.815792700, askQuantity=2.24721, bidSource=HUOBI, priceId=5a9f9072-0a81-462d-a810-9b6e60990c6e, bidPrice=60306.84}
2024-08-11 23:36:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043458254486555756, askSource=HUOBI, bidQuantity=3.02606, symbol=ETHBTC, priceDate=2024-08-11T23:36:43.815792700, askQuantity=0.1569, bidSource=BINANCE, priceId=13f808ab-1822-4bb8-88bf-060a27bcd932, bidPrice=0.0434581965310251}
2024-08-11 23:36:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1385679652<open>)] after transaction
2024-08-11 23:36:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:36:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6f9a1558]
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:36:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60305.99, BidQty - 1.83023, Ask - 60306.0, askQuantity - 0.2873
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2620.99, BidQty - 5.7085, Ask - 2621.0, askQuantity - 15.28
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00877146127432, BidQty - 0.24810103440802483, Ask - 23.00886306319368, AskQty - 0.012486492670712699
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346151295061851, BidQty - 1.83023, Ask - 0.04346168597845753, AskQty - 6.6104200408241125
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:36:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2620.91, BidQty - 0.1526, Ask - 2620.92, askQuantity - 0.3932342459899577
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60306.84, BidQty - 0.273601, Ask - 60306.85, askQuantity - 0.049743
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.009798086168214, BidQty - 0.006631957370009771, Ask - 23.009889694800663, AskQty - 0.002161809581001163
2024-08-11 23:36:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345957382950693, BidQty - 0.273601, Ask - 0.04345974685458565, AskQty - 0.3932342459899577
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 08ccc849-3f40-4893-9285-fb28fca5418b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2ef9f973-0d03-43d1-af3c-4fdb5fd3b864, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8e43019e-e89a-4e37-a656-a4c7d686b937, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1741041159<open>)] for JPA transaction
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 732e22a4-9b74-426c-a702-3bce2d72ba18, using strategy: org.hibernate.id.Assigned
2024-08-11 23:36:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1741041159<open>)]
2024-08-11 23:36:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:36:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:36:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:36:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60306.0, askSource=BINANCE, bidQuantity=0.273601, symbol=BTCUSDT, priceDate=2024-08-11T23:36:53.735728400, askQuantity=0.2873, bidSource=HUOBI, priceId=2ef9f973-0d03-43d1-af3c-4fdb5fd3b864, bidPrice=60306.84}
2024-08-11 23:36:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00886306319368, askSource=BINANCE, bidQuantity=0.006631957370009771, symbol=BTCETH, priceDate=2024-08-11T23:36:53.735728400, askQuantity=0.012486492670712699, bidSource=HUOBI, priceId=8e43019e-e89a-4e37-a656-a4c7d686b937, bidPrice=23.009798086168214}
2024-08-11 23:36:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345974685458565, askSource=HUOBI, bidQuantity=1.83023, symbol=ETHBTC, priceDate=2024-08-11T23:36:53.735728400, askQuantity=0.3932342459899577, bidSource=BINANCE, priceId=732e22a4-9b74-426c-a702-3bce2d72ba18, bidPrice=0.04346151295061851}
2024-08-11 23:36:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2620.92, askSource=HUOBI, bidQuantity=5.7085, symbol=ETHUSDT, priceDate=2024-08-11T23:36:53.735728400, askQuantity=0.3932342459899577, bidSource=BINANCE, priceId=08ccc849-3f40-4893-9285-fb28fca5418b, bidPrice=2620.99}
2024-08-11 23:36:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:36:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1741041159<open>)] after transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5abf395a]
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60288.0, BidQty - 1.11962, Ask - 60288.01, askQuantity - 5.36521
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.37, BidQty - 8.2841, Ask - 2619.38, askQuantity - 25.7
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01613358886454, BidQty - 0.3599257871881635, Ask - 23.01622527554336, AskQty - 0.2331055564398294
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344761089311125, BidQty - 1.11962, Ask - 0.04344778397027601, AskQty - 25.7
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.68, BidQty - 1.3739, Ask - 2619.69, askQuantity - 0.1445000125969103
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60294.46, BidQty - 0.006934, Ask - 60294.47, askQuantity - 0.3411950013268215
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01587592425058, BidQty - 0.006934, Ask - 23.015967599096076, AskQty - 0.014824273620380902
2024-08-11 23:37:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344809731307033, BidQty - 0.006934, Ask - 0.04344827037177213, AskQty - 0.1445000125969103
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 582ede5c-3643-4dff-b9c3-ebca58406317, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 68d8ab84-d382-45b6-a142-4f4b817d79d7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1989177b-0709-4226-aba5-4023376c9cf6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(955507583<open>)] for JPA transaction
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: af365cc5-6532-4c53-9a51-d5beb21870c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(955507583<open>)]
2024-08-11 23:37:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.015967599096076, askSource=HUOBI, bidQuantity=0.3599257871881635, symbol=BTCETH, priceDate=2024-08-11T23:37:03.805966900, askQuantity=0.014824273620380902, bidSource=BINANCE, priceId=1989177b-0709-4226-aba5-4023376c9cf6, bidPrice=23.01613358886454}
2024-08-11 23:37:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344778397027601, askSource=BINANCE, bidQuantity=0.006934, symbol=ETHBTC, priceDate=2024-08-11T23:37:03.805966900, askQuantity=25.7, bidSource=HUOBI, priceId=af365cc5-6532-4c53-9a51-d5beb21870c9, bidPrice=0.04344809731307033}
2024-08-11 23:37:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.38, askSource=BINANCE, bidQuantity=1.3739, symbol=ETHUSDT, priceDate=2024-08-11T23:37:03.805966900, askQuantity=25.7, bidSource=HUOBI, priceId=582ede5c-3643-4dff-b9c3-ebca58406317, bidPrice=2619.68}
2024-08-11 23:37:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60288.01, askSource=BINANCE, bidQuantity=0.006934, symbol=BTCUSDT, priceDate=2024-08-11T23:37:03.805966900, askQuantity=5.36521, bidSource=HUOBI, priceId=68d8ab84-d382-45b6-a142-4f4b817d79d7, bidPrice=60294.46}
2024-08-11 23:37:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(955507583<open>)] after transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@157c72ad]
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60272.0, BidQty - 0.84287, Ask - 60272.01, askQuantity - 6.48037
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.61, BidQty - 11.6565, Ask - 2618.62, askQuantity - 5.4862
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0167034544913, BidQty - 0.5064365547849747, Ask - 23.01679516995658, AskQty - 0.281549622879675
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344653513297466, BidQty - 0.84287, Ask - 0.04344670825590655, AskQty - 5.4862
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.18, BidQty - 3.4601, Ask - 2619.19, askQuantity - 0.6527
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60284.31, BidQty - 0.348338, Ask - 60284.32, askQuantity - 0.063967
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01639438146908, BidQty - 0.15033197392489026, Ask - 23.016486075794717, AskQty - 0.002779181834679399
2024-08-11 23:37:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344711858738723, BidQty - 0.348338, Ask - 0.04344729167506438, AskQty - 0.6527
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 17c0d7ed-845a-46ff-b773-429e88f17a20, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 62d8cadb-92e1-4dd9-a794-ba8e18394f04, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: adac7cee-0533-4b5b-84b8-e0aaaabce433, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1091490907<open>)] for JPA transaction
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5a49b658-ea30-48f1-aab4-70380d411db8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1091490907<open>)]
2024-08-11 23:37:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.016486075794717, askSource=HUOBI, bidQuantity=0.5064365547849747, symbol=BTCETH, priceDate=2024-08-11T23:37:13.742966300, askQuantity=0.002779181834679399, bidSource=BINANCE, priceId=adac7cee-0533-4b5b-84b8-e0aaaabce433, bidPrice=23.0167034544913}
2024-08-11 23:37:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344670825590655, askSource=BINANCE, bidQuantity=0.348338, symbol=ETHBTC, priceDate=2024-08-11T23:37:13.742966300, askQuantity=5.4862, bidSource=HUOBI, priceId=5a49b658-ea30-48f1-aab4-70380d411db8, bidPrice=0.04344711858738723}
2024-08-11 23:37:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.62, askSource=BINANCE, bidQuantity=3.4601, symbol=ETHUSDT, priceDate=2024-08-11T23:37:13.742966300, askQuantity=5.4862, bidSource=HUOBI, priceId=17c0d7ed-845a-46ff-b773-429e88f17a20, bidPrice=2619.18}
2024-08-11 23:37:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60272.01, askSource=BINANCE, bidQuantity=0.348338, symbol=BTCUSDT, priceDate=2024-08-11T23:37:13.742966300, askQuantity=6.48037, bidSource=HUOBI, priceId=62d8cadb-92e1-4dd9-a794-ba8e18394f04, bidPrice=60284.31}
2024-08-11 23:37:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1091490907<open>)] after transaction
2024-08-11 23:37:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@12916e6]
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60261.96, BidQty - 0.15397, Ask - 60261.97, askQuantity - 6.25595
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.36, BidQty - 5.9005, Ask - 2618.37, askQuantity - 14.2804
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01506662541963, BidQty - 0.15397, Ask - 23.015158343390517, AskQty - 0.27181868169925416
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344962502885319, BidQty - 0.15397, Ask - 0.043449798181141135, AskQty - 14.2804
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.02, BidQty - 5.367, Ask - 2618.03, askQuantity - 0.5
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60269.24, BidQty - 0.007309, Ask - 60269.25, askQuantity - 0.8294860331844183
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020836277659154, BidQty - 0.007309, Ask - 23.020928029579608, AskQty - 0.03603182426523427
2024-08-11 23:37:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043438735341820245, BidQty - 0.007309, Ask - 0.043438908471386074, AskQty - 0.5
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 84e9bbc0-35f3-4f07-9447-7bd4d35096e6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: be5d664f-657f-4ec8-b557-a42c6c03a2ad, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1a8af0bc-6d5a-4d20-bd83-3f040ed512be, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1618154014<open>)] for JPA transaction
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7250ac3e-48c7-41db-b17c-280a1221f16b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1618154014<open>)]
2024-08-11 23:37:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.03, askSource=HUOBI, bidQuantity=5.9005, symbol=ETHUSDT, priceDate=2024-08-11T23:37:23.736713300, askQuantity=0.5, bidSource=BINANCE, priceId=84e9bbc0-35f3-4f07-9447-7bd4d35096e6, bidPrice=2618.36}
2024-08-11 23:37:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043438908471386074, askSource=HUOBI, bidQuantity=0.15397, symbol=ETHBTC, priceDate=2024-08-11T23:37:23.736713300, askQuantity=0.5, bidSource=BINANCE, priceId=7250ac3e-48c7-41db-b17c-280a1221f16b, bidPrice=0.04344962502885319}
2024-08-11 23:37:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60261.97, askSource=BINANCE, bidQuantity=0.007309, symbol=BTCUSDT, priceDate=2024-08-11T23:37:23.736713300, askQuantity=6.25595, bidSource=HUOBI, priceId=be5d664f-657f-4ec8-b557-a42c6c03a2ad, bidPrice=60269.24}
2024-08-11 23:37:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.015158343390517, askSource=BINANCE, bidQuantity=0.007309, symbol=BTCETH, priceDate=2024-08-11T23:37:23.736713300, askQuantity=0.27181868169925416, bidSource=HUOBI, priceId=1a8af0bc-6d5a-4d20-bd83-3f040ed512be, bidPrice=23.020836277659154}
2024-08-11 23:37:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1618154014<open>)] after transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@260123ce]
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60276.99, BidQty - 2.33472, Ask - 60277.0, askQuantity - 1.02275
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.99, BidQty - 34.7814, Ask - 2619.0, askQuantity - 5.8826
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015269186712484, BidQty - 1.511231509735307, Ask - 23.01536088339398, AskQty - 0.04443771293362311
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344924266303896, BidQty - 2.33472, Ask - 0.043449415772088155, AskQty - 5.8826
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.44, BidQty - 0.1527, Ask - 2618.45, askQuantity - 0.5
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60267.62, BidQty - 0.016591, Ask - 60267.63, askQuantity - 0.222201
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01652504344173, BidQty - 0.006634363776103984, Ask - 23.0166167641802, AskQty - 0.009653938381847768
2024-08-11 23:37:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043446871894580893, BidQty - 0.016591, Ask - 0.04344704503015051, AskQty - 0.5
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 691c5e09-7532-4901-a89b-a52f30eb02b2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 08ebd49d-5fac-4826-9605-11d72ac82088, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f9fb472a-fd73-41d9-9c78-29a2255f7d4f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1142590867<open>)] for JPA transaction
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a668adae-f3e0-4bd3-8da5-04646a9c4ae6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1142590867<open>)]
2024-08-11 23:37:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.45, askSource=HUOBI, bidQuantity=34.7814, symbol=ETHUSDT, priceDate=2024-08-11T23:37:33.813435300, askQuantity=0.5, bidSource=BINANCE, priceId=691c5e09-7532-4901-a89b-a52f30eb02b2, bidPrice=2618.99}
2024-08-11 23:37:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344704503015051, askSource=HUOBI, bidQuantity=2.33472, symbol=ETHBTC, priceDate=2024-08-11T23:37:33.813435300, askQuantity=0.5, bidSource=BINANCE, priceId=a668adae-f3e0-4bd3-8da5-04646a9c4ae6, bidPrice=0.04344924266303896}
2024-08-11 23:37:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60267.63, askSource=HUOBI, bidQuantity=2.33472, symbol=BTCUSDT, priceDate=2024-08-11T23:37:33.813435300, askQuantity=0.222201, bidSource=BINANCE, priceId=08ebd49d-5fac-4826-9605-11d72ac82088, bidPrice=60276.99}
2024-08-11 23:37:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01536088339398, askSource=BINANCE, bidQuantity=0.006634363776103984, symbol=BTCETH, priceDate=2024-08-11T23:37:33.813435300, askQuantity=0.04443771293362311, bidSource=HUOBI, priceId=f9fb472a-fd73-41d9-9c78-29a2255f7d4f, bidPrice=23.01652504344173}
2024-08-11 23:37:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1142590867<open>)] after transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@49d5b3a6]
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60276.09, BidQty - 1.71916, Ask - 60276.1, askQuantity - 2.39899
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.79, BidQty - 9.1927, Ask - 2618.8, askQuantity - 22.1323
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016683213685656, BidQty - 0.3993929062087472, Ask - 23.016774922769677, AskQty - 0.10422789500481948
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344657335162693, BidQty - 1.71916, Ask - 0.043446746462818014, AskQty - 22.1323
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.3, BidQty - 0.0885, Ask - 2619.31, askQuantity - 0.0973
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60280.62, BidQty - 0.054382, Ask - 60280.63, askQuantity - 0.438499
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01393114980663, BidQty - 0.0038454968611802594, Ask - 23.01402283052724, AskQty - 0.01905355718246475
2024-08-11 23:37:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345176883519632, BidQty - 0.054382, Ask - 0.04345194193424022, AskQty - 0.0973
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1e0dc547-e813-415e-bb18-dba37624fa53, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a9d87b3c-4d21-4cb3-9660-d83fc1a16305, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1fc8b102-c858-4c20-8fde-e8393e9d2ff8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1495360801<open>)] for JPA transaction
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 31ce086c-5a2d-4bcf-841b-9d3ad3d4f6d0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1495360801<open>)]
2024-08-11 23:37:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.8, askSource=BINANCE, bidQuantity=0.0885, symbol=ETHUSDT, priceDate=2024-08-11T23:37:43.728613700, askQuantity=22.1323, bidSource=HUOBI, priceId=1e0dc547-e813-415e-bb18-dba37624fa53, bidPrice=2619.3}
2024-08-11 23:37:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60276.1, askSource=BINANCE, bidQuantity=0.054382, symbol=BTCUSDT, priceDate=2024-08-11T23:37:43.728613700, askQuantity=2.39899, bidSource=HUOBI, priceId=a9d87b3c-4d21-4cb3-9660-d83fc1a16305, bidPrice=60280.62}
2024-08-11 23:37:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01402283052724, askSource=HUOBI, bidQuantity=0.3993929062087472, symbol=BTCETH, priceDate=2024-08-11T23:37:43.728613700, askQuantity=0.01905355718246475, bidSource=BINANCE, priceId=1fc8b102-c858-4c20-8fde-e8393e9d2ff8, bidPrice=23.016683213685656}
2024-08-11 23:37:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043446746462818014, askSource=BINANCE, bidQuantity=0.054382, symbol=ETHBTC, priceDate=2024-08-11T23:37:43.728613700, askQuantity=22.1323, bidSource=HUOBI, priceId=31ce086c-5a2d-4bcf-841b-9d3ad3d4f6d0, bidPrice=0.04345176883519632}
2024-08-11 23:37:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1495360801<open>)] after transaction
2024-08-11 23:37:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:37:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4e945564]
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:37:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60264.0, BidQty - 0.05944, Ask - 60264.01, askQuantity - 3.57425
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 2.7513, Ask - 2618.01, askQuantity - 20.4627
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019010622572104, BidQty - 0.05944, Ask - 23.019102368220015, AskQty - 0.15527321364774765
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434421804987753, BidQty - 0.05944, Ask - 0.04344235364396655, AskQty - 20.4627
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:37:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.39, BidQty - 0.1527, Ask - 2618.4, askQuantity - 0.4249
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.93, BidQty - 0.143675, Ask - 60272.94, askQuantity - 0.237437
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01899251451268, BidQty - 0.006633652619841113, Ask - 23.019084246426242, AskQty - 0.010314789131407891
2024-08-11 23:37:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344221469866908, BidQty - 0.143675, Ask - 0.04344238781821292, AskQty - 0.4249
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 352d605a-4591-42a2-ba9c-931fa89b0c80, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 827e15f5-56d2-4114-b4fd-637925276aba, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 628eedae-584d-46e6-a873-b32af733b1e3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(537304184<open>)] for JPA transaction
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2f94ae75-868f-4623-9c03-25003827d0bd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:37:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(537304184<open>)]
2024-08-11 23:37:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:37:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:37:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:37:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60264.01, askSource=BINANCE, bidQuantity=0.143675, symbol=BTCUSDT, priceDate=2024-08-11T23:37:53.764368, askQuantity=3.57425, bidSource=HUOBI, priceId=827e15f5-56d2-4114-b4fd-637925276aba, bidPrice=60272.93}
2024-08-11 23:37:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344235364396655, askSource=BINANCE, bidQuantity=0.143675, symbol=ETHBTC, priceDate=2024-08-11T23:37:53.764368, askQuantity=20.4627, bidSource=HUOBI, priceId=2f94ae75-868f-4623-9c03-25003827d0bd, bidPrice=0.04344221469866908}
2024-08-11 23:37:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.01, askSource=BINANCE, bidQuantity=0.1527, symbol=ETHUSDT, priceDate=2024-08-11T23:37:53.764368, askQuantity=20.4627, bidSource=HUOBI, priceId=352d605a-4591-42a2-ba9c-931fa89b0c80, bidPrice=2618.39}
2024-08-11 23:37:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019084246426242, askSource=HUOBI, bidQuantity=0.05944, symbol=BTCETH, priceDate=2024-08-11T23:37:53.764368, askQuantity=0.010314789131407891, bidSource=BINANCE, priceId=628eedae-584d-46e6-a873-b32af733b1e3, bidPrice=23.019010622572104}
2024-08-11 23:37:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:37:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(537304184<open>)] after transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@60f84a00]
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60253.99, BidQty - 0.09308, Ask - 60254.0, askQuantity - 2.65378
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.56, BidQty - 0.1294, Ask - 2617.57, askQuantity - 12.9933
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0190558418686, BidQty - 0.005621429518609474, Ask - 23.019147603111296, AskQty - 0.1152857632157201
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043442095130613735, BidQty - 0.09308, Ask - 0.043442268304555436, AskQty - 12.9933
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.17, BidQty - 0.1528, Ask - 2617.18, askQuantity - 0.6877
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60246.47, BidQty - 0.033197, Ask - 60246.48, askQuantity - 0.1124
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019612712920015, BidQty - 0.0066378180165576495, Ask - 23.01970448996435, AskQty - 0.00488277336700833
2024-08-11 23:38:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043441044190465565, BidQty - 0.033197, Ask - 0.043441217385848496, AskQty - 0.6877
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 915f9aa0-0cee-4780-99cc-244e7409a16e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: aac7880c-3b56-4d33-a7bc-27c5efedf53c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7cbb9f53-bcb0-4f57-abef-46b3e16c31b8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(280823450<open>)] for JPA transaction
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 26a7e51e-f37c-4f98-b8a8-a0f590b2c1d2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(280823450<open>)]
2024-08-11 23:38:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.48, askSource=HUOBI, bidQuantity=0.09308, symbol=BTCUSDT, priceDate=2024-08-11T23:38:03.740076500, askQuantity=0.1124, bidSource=BINANCE, priceId=aac7880c-3b56-4d33-a7bc-27c5efedf53c, bidPrice=60253.99}
2024-08-11 23:38:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019147603111296, askSource=BINANCE, bidQuantity=0.0066378180165576495, symbol=BTCETH, priceDate=2024-08-11T23:38:03.740076500, askQuantity=0.1152857632157201, bidSource=HUOBI, priceId=7cbb9f53-bcb0-4f57-abef-46b3e16c31b8, bidPrice=23.019612712920015}
2024-08-11 23:38:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043441217385848496, askSource=HUOBI, bidQuantity=0.09308, symbol=ETHBTC, priceDate=2024-08-11T23:38:03.740076500, askQuantity=0.6877, bidSource=BINANCE, priceId=26a7e51e-f37c-4f98-b8a8-a0f590b2c1d2, bidPrice=0.043442095130613735}
2024-08-11 23:38:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.18, askSource=HUOBI, bidQuantity=0.1294, symbol=ETHUSDT, priceDate=2024-08-11T23:38:03.740076500, askQuantity=0.6877, bidSource=BINANCE, priceId=915f9aa0-0cee-4780-99cc-244e7409a16e, bidPrice=2617.56}
2024-08-11 23:38:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(280823450<open>)] after transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@514444e3]
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60216.35, BidQty - 0.39222, Ask - 60216.36, askQuantity - 3.63478
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.0, BidQty - 17.0172, Ask - 2616.01, askQuantity - 15.3971
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01839442509776, BidQty - 0.39222, Ask - 23.01848623853211, AskQty - 0.15790699537467892
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344334330404561, BidQty - 0.39222, Ask - 0.043443516586442056, AskQty - 15.3971
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.47, BidQty - 0.1528, Ask - 2616.48, askQuantity - 0.3579
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60240.1, BidQty - 0.003412, Ask - 60240.11, askQuantity - 0.1616
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023336696630587, BidQty - 0.003412, Ask - 23.023428512461447, AskQty - 0.007018937249616576
2024-08-11 23:38:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043434017633765934, BidQty - 0.003412, Ask - 0.04343419084629674, AskQty - 0.3579
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0c5d7a08-62d0-4e82-839b-98eb106c253e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8d5de0cd-82d5-436d-b807-47544a9a568b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a24be063-123b-47ae-b688-09b9651e9296, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(596935767<open>)] for JPA transaction
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: eea41632-8fe4-482a-9a8b-2bac593973f2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(596935767<open>)]
2024-08-11 23:38:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.01, askSource=BINANCE, bidQuantity=0.1528, symbol=ETHUSDT, priceDate=2024-08-11T23:38:13.769531600, askQuantity=15.3971, bidSource=HUOBI, priceId=0c5d7a08-62d0-4e82-839b-98eb106c253e, bidPrice=2616.47}
2024-08-11 23:38:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01848623853211, askSource=BINANCE, bidQuantity=0.003412, symbol=BTCETH, priceDate=2024-08-11T23:38:13.769531600, askQuantity=0.15790699537467892, bidSource=HUOBI, priceId=a24be063-123b-47ae-b688-09b9651e9296, bidPrice=23.023336696630587}
2024-08-11 23:38:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343419084629674, askSource=HUOBI, bidQuantity=0.39222, symbol=ETHBTC, priceDate=2024-08-11T23:38:13.769531600, askQuantity=0.3579, bidSource=BINANCE, priceId=eea41632-8fe4-482a-9a8b-2bac593973f2, bidPrice=0.04344334330404561}
2024-08-11 23:38:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60216.36, askSource=BINANCE, bidQuantity=0.003412, symbol=BTCUSDT, priceDate=2024-08-11T23:38:13.769531600, askQuantity=3.63478, bidSource=HUOBI, priceId=8d5de0cd-82d5-436d-b807-47544a9a568b, bidPrice=60240.1}
2024-08-11 23:38:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(596935767<open>)] after transaction
2024-08-11 23:38:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@44a24923]
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60216.36, BidQty - 0.52298, Ask - 60216.37, askQuantity - 3.16877
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.88, BidQty - 4.2444, Ask - 2616.89, askQuantity - 12.0409
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01065768908896, BidQty - 0.1844536587067036, Ask - 23.010749442083704, AskQty - 0.13770824839823456
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345795005577387, BidQty - 0.52298, Ask - 0.04345812334056724, AskQty - 12.0409
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.5, BidQty - 0.1011, Ask - 2616.51, askQuantity - 0.7949
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60229.25, BidQty - 0.086524, Ask - 60229.26, askQuantity - 0.451652
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018925973911813, BidQty - 0.004392038104409402, Ask - 23.0190177718326, AskQty - 0.019620819814156774
2024-08-11 23:38:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043442340151614016, BidQty - 0.086524, Ask - 0.04344251339673, AskQty - 0.7949
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8c023be8-468f-4b5a-8c0f-53478a6cabed, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 682dd1c7-1146-4156-8098-015e0283f6e6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ad6d6fc6-ab2a-426a-af20-bfc4f803d504, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1757155184<open>)] for JPA transaction
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8f4df508-6478-4b31-b985-0ae732eb986b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1757155184<open>)]
2024-08-11 23:38:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60216.37, askSource=BINANCE, bidQuantity=0.086524, symbol=BTCUSDT, priceDate=2024-08-11T23:38:23.728994, askQuantity=3.16877, bidSource=HUOBI, priceId=682dd1c7-1146-4156-8098-015e0283f6e6, bidPrice=60229.25}
2024-08-11 23:38:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.010749442083704, askSource=BINANCE, bidQuantity=0.004392038104409402, symbol=BTCETH, priceDate=2024-08-11T23:38:23.728994, askQuantity=0.13770824839823456, bidSource=HUOBI, priceId=ad6d6fc6-ab2a-426a-af20-bfc4f803d504, bidPrice=23.018925973911813}
2024-08-11 23:38:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344251339673, askSource=HUOBI, bidQuantity=0.52298, symbol=ETHBTC, priceDate=2024-08-11T23:38:23.728994, askQuantity=0.7949, bidSource=BINANCE, priceId=8f4df508-6478-4b31-b985-0ae732eb986b, bidPrice=0.04345795005577387}
2024-08-11 23:38:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.51, askSource=HUOBI, bidQuantity=4.2444, symbol=ETHUSDT, priceDate=2024-08-11T23:38:23.728994, askQuantity=0.7949, bidSource=BINANCE, priceId=8c023be8-468f-4b5a-8c0f-53478a6cabed, bidPrice=2616.88}
2024-08-11 23:38:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1757155184<open>)] after transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@d921f29]
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60219.99, BidQty - 1.0857, Ask - 60220.0, askQuantity - 2.56871
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.8, BidQty - 18.0073, Ask - 2616.81, askQuantity - 13.2588
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012748346268932, BidQty - 0.7824923702743889, Ask - 23.012840110058086, AskQty - 0.1116207294586516
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345400199269346, BidQty - 1.0857, Ask - 0.0434541752663858, AskQty - 13.2588
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.76, BidQty - 0.5059, Ask - 2616.77, askQuantity - 0.1569
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60219.78, BidQty - 0.355413, Ask - 60219.79, askQuantity - 0.2
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013019868005212, BidQty - 0.02198320789282193, Ask - 23.0131116342347, AskQty - 0.00869069785862754
2024-08-11 23:38:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345348929313769, BidQty - 0.355413, Ask - 0.04345366256734914, AskQty - 0.1569
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 66a8b65a-08df-4d89-a9cc-b4f871766746, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c060060e-dd65-4029-a4d2-9566dfe07d75, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 36da9c22-13cb-472c-80d3-894ed409e3a6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1513698428<open>)] for JPA transaction
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3d590006-7ec0-4db9-b755-dc6553287aed, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1513698428<open>)]
2024-08-11 23:38:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.77, askSource=HUOBI, bidQuantity=18.0073, symbol=ETHUSDT, priceDate=2024-08-11T23:38:33.731547200, askQuantity=0.1569, bidSource=BINANCE, priceId=66a8b65a-08df-4d89-a9cc-b4f871766746, bidPrice=2616.8}
2024-08-11 23:38:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012840110058086, askSource=BINANCE, bidQuantity=0.02198320789282193, symbol=BTCETH, priceDate=2024-08-11T23:38:33.731547200, askQuantity=0.1116207294586516, bidSource=HUOBI, priceId=36da9c22-13cb-472c-80d3-894ed409e3a6, bidPrice=23.013019868005212}
2024-08-11 23:38:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345366256734914, askSource=HUOBI, bidQuantity=1.0857, symbol=ETHBTC, priceDate=2024-08-11T23:38:33.731547200, askQuantity=0.1569, bidSource=BINANCE, priceId=3d590006-7ec0-4db9-b755-dc6553287aed, bidPrice=0.04345400199269346}
2024-08-11 23:38:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60219.79, askSource=HUOBI, bidQuantity=1.0857, symbol=BTCUSDT, priceDate=2024-08-11T23:38:33.731547200, askQuantity=0.2, bidSource=BINANCE, priceId=c060060e-dd65-4029-a4d2-9566dfe07d75, bidPrice=60219.99}
2024-08-11 23:38:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1513698428<open>)] after transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5f2a1254]
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60211.98, BidQty - 0.20776, Ask - 60211.99, askQuantity - 5.40561
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.53, BidQty - 4.6044, Ask - 2615.54, askQuantity - 15.3314
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020859937144913, BidQty - 0.20000990460702336, Ask - 23.020951776504187, AskQty - 0.23481261993333888
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343869053323101, BidQty - 0.20776, Ask - 0.043438863827431014, AskQty - 15.3314
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.31, BidQty - 4.8116, Ask - 2615.51, askQuantity - 0.26
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60212.55, BidQty - 0.001505, Ask - 60212.56, askQuantity - 0.24115200132862646
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02134191801981, BidQty - 0.001505, Ask - 23.023106247442943, AskQty - 0.010474346890329361
2024-08-11 23:38:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043434625599708766, BidQty - 0.001505, Ask - 0.04343795437994239, AskQty - 0.26
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b01c000e-4db9-4856-9e59-9d05bce6a44d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d65949a4-48b4-4711-bca8-46534bb891f4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4dbb7af6-9635-40d4-8ab5-b91c4d7d8db4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(264773601<open>)] for JPA transaction
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0d69b9a5-0491-4952-9480-45b24275c5db, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(264773601<open>)]
2024-08-11 23:38:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.51, askSource=HUOBI, bidQuantity=4.6044, symbol=ETHUSDT, priceDate=2024-08-11T23:38:43.767862400, askQuantity=0.26, bidSource=BINANCE, priceId=b01c000e-4db9-4856-9e59-9d05bce6a44d, bidPrice=2615.53}
2024-08-11 23:38:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60211.99, askSource=BINANCE, bidQuantity=0.001505, symbol=BTCUSDT, priceDate=2024-08-11T23:38:43.767862400, askQuantity=5.40561, bidSource=HUOBI, priceId=d65949a4-48b4-4711-bca8-46534bb891f4, bidPrice=60212.55}
2024-08-11 23:38:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.020951776504187, askSource=BINANCE, bidQuantity=0.001505, symbol=BTCETH, priceDate=2024-08-11T23:38:43.767862400, askQuantity=0.23481261993333888, bidSource=HUOBI, priceId=4dbb7af6-9635-40d4-8ab5-b91c4d7d8db4, bidPrice=23.02134191801981}
2024-08-11 23:38:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343795437994239, askSource=HUOBI, bidQuantity=0.20776, symbol=ETHBTC, priceDate=2024-08-11T23:38:43.767862400, askQuantity=0.26, bidSource=BINANCE, priceId=0d69b9a5-0491-4952-9480-45b24275c5db, bidPrice=0.04343869053323101}
2024-08-11 23:38:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(264773601<open>)] after transaction
2024-08-11 23:38:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:38:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@500e68b6]
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:38:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60205.99, BidQty - 3.13097, Ask - 60206.0, askQuantity - 0.15973
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.58, BidQty - 16.596, Ask - 2615.59, askQuantity - 4.8865
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01812975275177, BidQty - 0.7209968915053137, Ask - 23.018221579917267, AskQty - 0.006939285011460652
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344384280636481, BidQty - 3.13097, Ask - 0.04344401611866195, AskQty - 3.6766858654070402
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:38:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.26, BidQty - 0.1012, Ask - 2615.27, askQuantity - 0.5564734172456381
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60207.22, BidQty - 0.129008, Ask - 60207.23, askQuantity - 0.072374
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.021416526783085, BidQty - 0.004395906736766786, Ask - 23.021508377752117, AskQty - 0.003143755778832542
2024-08-11 23:38:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043437640296688625, BidQty - 0.129008, Ask - 0.043437813604414885, AskQty - 0.5564734172456381
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8b7a67e6-74d4-44d1-bdb0-e756e0578cb1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3647d4bf-12bb-4546-b6a1-c604cb2820ff, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f0f6bdbf-ef54-44c3-b5be-d4d45dbdd928, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1484453088<open>)] for JPA transaction
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 17730f97-3a1e-4780-8784-eb3993e63b09, using strategy: org.hibernate.id.Assigned
2024-08-11 23:38:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1484453088<open>)]
2024-08-11 23:38:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:38:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:38:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:38:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.018221579917267, askSource=BINANCE, bidQuantity=0.004395906736766786, symbol=BTCETH, priceDate=2024-08-11T23:38:53.758466400, askQuantity=0.006939285011460652, bidSource=HUOBI, priceId=f0f6bdbf-ef54-44c3-b5be-d4d45dbdd928, bidPrice=23.021416526783085}
2024-08-11 23:38:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043437813604414885, askSource=HUOBI, bidQuantity=3.13097, symbol=ETHBTC, priceDate=2024-08-11T23:38:53.758466400, askQuantity=0.5564734172456381, bidSource=BINANCE, priceId=17730f97-3a1e-4780-8784-eb3993e63b09, bidPrice=0.04344384280636481}
2024-08-11 23:38:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60206.0, askSource=BINANCE, bidQuantity=0.129008, symbol=BTCUSDT, priceDate=2024-08-11T23:38:53.758466400, askQuantity=0.15973, bidSource=HUOBI, priceId=3647d4bf-12bb-4546-b6a1-c604cb2820ff, bidPrice=60207.22}
2024-08-11 23:38:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.27, askSource=HUOBI, bidQuantity=16.596, symbol=ETHUSDT, priceDate=2024-08-11T23:38:53.758466400, askQuantity=0.5564734172456381, bidSource=BINANCE, priceId=8b7a67e6-74d4-44d1-bdb0-e756e0578cb1, bidPrice=2615.58}
2024-08-11 23:38:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:38:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1484453088<open>)] after transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@66d3f516]
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60222.0, BidQty - 1.60877, Ask - 60222.01, askQuantity - 2.55696
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.4, BidQty - 3.8222, Ask - 2616.41, askQuantity - 11.3089
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017034791947747, BidQty - 0.1660596177808774, Ask - 23.01712658614891, AskQty - 0.11108945290932667
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043445909560308596, BidQty - 1.60877, Ask - 0.0434460828268739, AskQty - 11.3089
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.04, BidQty - 1.4705, Ask - 2616.21, askQuantity - 0.2949
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60224.24, BidQty - 0.085099, Ask - 60224.25, askQuantity - 0.242557
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01965056321931, BidQty - 0.06388020513002737, Ask - 23.021150288221893, AskQty - 0.010536267604494868
2024-08-11 23:39:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043438315960763314, BidQty - 0.085099, Ask - 0.04344114595717605, AskQty - 0.2949
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 74210ab6-fa37-4be8-85e1-1ab24bfd0043, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 82df0d31-79b8-486b-98a3-cec30b1f7f34, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bfad5068-2027-4a77-9ea4-bdafb20f892f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(211958797<open>)] for JPA transaction
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2dd4c2fa-b431-4661-89fd-8386590e293d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(211958797<open>)]
2024-08-11 23:39:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01712658614891, askSource=BINANCE, bidQuantity=0.06388020513002737, symbol=BTCETH, priceDate=2024-08-11T23:39:03.995321900, askQuantity=0.11108945290932667, bidSource=HUOBI, priceId=bfad5068-2027-4a77-9ea4-bdafb20f892f, bidPrice=23.01965056321931}
2024-08-11 23:39:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.21, askSource=HUOBI, bidQuantity=3.8222, symbol=ETHUSDT, priceDate=2024-08-11T23:39:03.995321900, askQuantity=0.2949, bidSource=BINANCE, priceId=74210ab6-fa37-4be8-85e1-1ab24bfd0043, bidPrice=2616.4}
2024-08-11 23:39:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60222.01, askSource=BINANCE, bidQuantity=0.085099, symbol=BTCUSDT, priceDate=2024-08-11T23:39:03.995321900, askQuantity=2.55696, bidSource=HUOBI, priceId=82df0d31-79b8-486b-98a3-cec30b1f7f34, bidPrice=60224.24}
2024-08-11 23:39:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344114595717605, askSource=HUOBI, bidQuantity=1.60877, symbol=ETHBTC, priceDate=2024-08-11T23:39:03.995321900, askQuantity=0.2949, bidSource=BINANCE, priceId=2dd4c2fa-b431-4661-89fd-8386590e293d, bidPrice=0.043445909560308596}
2024-08-11 23:39:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(211958797<open>)] after transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@768232a0]
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60222.0, BidQty - 0.13171, Ask - 60222.01, askQuantity - 2.83089
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.39, BidQty - 9.3348, Ask - 2616.4, askQuantity - 20.3111
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01712276410335, BidQty - 0.13171, Ask - 23.01721455899159, AskQty - 0.12299012083954022
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344574350806291, BidQty - 0.13171, Ask - 0.04344591677460065, AskQty - 20.3111
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.03, BidQty - 0.1012, Ask - 2616.04, askQuantity - 0.096
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60219.39, BidQty - 0.456033, Ask - 60219.4, askQuantity - 0.016604
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019292518463022, BidQty - 0.0043963123505568556, Ask - 23.01938433427751, AskQty - 7.213051295761831E-4
2024-08-11 23:39:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434416483724514, BidQty - 0.456033, Ask - 0.04344182164581873, AskQty - 0.096
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f5b851cd-a7fc-4b68-b839-bf95cdb7ddbb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2575a84a-18bf-46ec-8106-198fbc567333, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7675b87a-225a-4ffc-9497-fd8e94c52669, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1113401168<open>)] for JPA transaction
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a277327d-a944-41ae-9a32-6fd09635053e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1113401168<open>)]
2024-08-11 23:39:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344182164581873, askSource=HUOBI, bidQuantity=0.13171, symbol=ETHBTC, priceDate=2024-08-11T23:39:13.901259300, askQuantity=0.096, bidSource=BINANCE, priceId=a277327d-a944-41ae-9a32-6fd09635053e, bidPrice=0.04344574350806291}
2024-08-11 23:39:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.04, askSource=HUOBI, bidQuantity=9.3348, symbol=ETHUSDT, priceDate=2024-08-11T23:39:13.901259300, askQuantity=0.096, bidSource=BINANCE, priceId=f5b851cd-a7fc-4b68-b839-bf95cdb7ddbb, bidPrice=2616.39}
2024-08-11 23:39:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01721455899159, askSource=BINANCE, bidQuantity=0.0043963123505568556, symbol=BTCETH, priceDate=2024-08-11T23:39:13.901259300, askQuantity=0.12299012083954022, bidSource=HUOBI, priceId=7675b87a-225a-4ffc-9497-fd8e94c52669, bidPrice=23.019292518463022}
2024-08-11 23:39:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60219.4, askSource=HUOBI, bidQuantity=0.13171, symbol=BTCUSDT, priceDate=2024-08-11T23:39:13.901259300, askQuantity=0.016604, bidSource=BINANCE, priceId=2575a84a-18bf-46ec-8106-198fbc567333, bidPrice=60222.0}
2024-08-11 23:39:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1113401168<open>)] after transaction
2024-08-11 23:39:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@378eb953]
2024-08-11 23:39:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60220.07, BidQty - 1.48131, Ask - 60220.08, askQuantity - 1.83071
2024-08-11 23:39:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.13, BidQty - 7.9073, Ask - 2616.14, askQuantity - 21.6702
2024-08-11 23:39:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018672548105226, BidQty - 0.3435167681140191, Ask - 23.01876435804031, AskQty - 0.07953120208907062
2024-08-11 23:39:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043442818408743394, BidQty - 1.48131, Ask - 0.043442991680348424, AskQty - 21.6702
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:24 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:24 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:24 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.97, BidQty - 3.0, Ask - 2616.13, askQuantity - 0.6037
2024-08-11 23:39:24 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60219.39, BidQty - 0.022583, Ask - 60219.4, askQuantity - 0.254071
2024-08-11 23:39:24 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018500609679183, BidQty - 0.022583, Ask - 23.01991230786286, AskQty - 0.011037009898305196
2024-08-11 23:39:24 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344065201579557, BidQty - 0.022583, Ask - 0.043443316181050656, AskQty - 0.6037
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 81bfd4b1-977e-4d76-b7ba-63af3dbaccc9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cf5a151a-f133-4cad-a5dc-64ad22c19b74, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3e2f5859-2ac1-4d6f-b95b-9e96c60e864d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1987427116<open>)] for JPA transaction
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b5242604-861c-479c-a780-33ee74cf0246, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:24 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1987427116<open>)]
2024-08-11 23:39:24 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:24 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.13, askSource=HUOBI, bidQuantity=7.9073, symbol=ETHUSDT, priceDate=2024-08-11T23:39:24.362221900, askQuantity=0.6037, bidSource=BINANCE, priceId=81bfd4b1-977e-4d76-b7ba-63af3dbaccc9, bidPrice=2616.13}
2024-08-11 23:39:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01876435804031, askSource=BINANCE, bidQuantity=0.3435167681140191, symbol=BTCETH, priceDate=2024-08-11T23:39:24.362221900, askQuantity=0.07953120208907062, bidSource=BINANCE, priceId=3e2f5859-2ac1-4d6f-b95b-9e96c60e864d, bidPrice=23.018672548105226}
2024-08-11 23:39:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60219.4, askSource=HUOBI, bidQuantity=1.48131, symbol=BTCUSDT, priceDate=2024-08-11T23:39:24.362221900, askQuantity=0.254071, bidSource=BINANCE, priceId=cf5a151a-f133-4cad-a5dc-64ad22c19b74, bidPrice=60220.07}
2024-08-11 23:39:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043442991680348424, askSource=BINANCE, bidQuantity=1.48131, symbol=ETHBTC, priceDate=2024-08-11T23:39:24.362221900, askQuantity=21.6702, bidSource=BINANCE, priceId=b5242604-861c-479c-a780-33ee74cf0246, bidPrice=0.043442818408743394}
2024-08-11 23:39:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1987427116<open>)] after transaction
2024-08-11 23:39:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@a51cd66]
2024-08-11 23:39:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60204.8, BidQty - 0.22271, Ask - 60204.81, askQuantity - 5.9254
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.24, BidQty - 4.9228, Ask - 2615.25, askQuantity - 27.1395
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020667240225603, BidQty - 0.21384262882693736, Ask - 23.020759089031984, AskQty - 0.2573937712950178
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343905412208759, BidQty - 0.22271, Ask - 0.043439227437014984, AskQty - 27.1395
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:34 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.89, BidQty - 3.5657, Ask - 2615.9, askQuantity - 0.1529
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60219.39, BidQty - 0.065713, Ask - 60219.4, askQuantity - 0.344333
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02052448488092, BidQty - 0.065713, Ask - 23.02061631031886, AskQty - 0.01495759259258644
2024-08-11 23:39:34 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343932354025447, BidQty - 0.065713, Ask - 0.04343949681323574, AskQty - 0.1529
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4e0b8f15-beb9-4dd8-822f-857d6b229456, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 062d5fc1-59e5-48d0-a8f0-1f928340fa3d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 713ff351-aa73-45b9-b0fa-278dff50d861, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1012006034<open>)] for JPA transaction
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 41bbcf6b-b629-41a5-a2f8-08512ebf9f86, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:34 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1012006034<open>)]
2024-08-11 23:39:34 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:34 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:34 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:34 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.25, askSource=BINANCE, bidQuantity=3.5657, symbol=ETHUSDT, priceDate=2024-08-11T23:39:34.419711400, askQuantity=27.1395, bidSource=HUOBI, priceId=4e0b8f15-beb9-4dd8-822f-857d6b229456, bidPrice=2615.89}
2024-08-11 23:39:34 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02061631031886, askSource=HUOBI, bidQuantity=0.21384262882693736, symbol=BTCETH, priceDate=2024-08-11T23:39:34.419711400, askQuantity=0.01495759259258644, bidSource=BINANCE, priceId=713ff351-aa73-45b9-b0fa-278dff50d861, bidPrice=23.020667240225603}
2024-08-11 23:39:34 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60204.81, askSource=BINANCE, bidQuantity=0.065713, symbol=BTCUSDT, priceDate=2024-08-11T23:39:34.419711400, askQuantity=5.9254, bidSource=HUOBI, priceId=062d5fc1-59e5-48d0-a8f0-1f928340fa3d, bidPrice=60219.39}
2024-08-11 23:39:34 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043439227437014984, askSource=BINANCE, bidQuantity=0.065713, symbol=ETHBTC, priceDate=2024-08-11T23:39:34.419711400, askQuantity=27.1395, bidSource=HUOBI, priceId=41bbcf6b-b629-41a5-a2f8-08512ebf9f86, bidPrice=0.04343932354025447}
2024-08-11 23:39:34 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:34 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:34 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:34 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:34 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1012006034<open>)] after transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5c9ea72c]
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60174.67, BidQty - 0.60814, Ask - 60174.68, askQuantity - 3.48187
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2613.5, BidQty - 7.6053, Ask - 2613.51, askQuantity - 19.9449
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0244651828384, BidQty - 0.3303138613473078, Ask - 23.02455710732734, AskQty - 0.1512241900580111
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043431888628240316, BidQty - 0.60814, Ask - 0.04343206202875729, AskQty - 19.9449
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.04, BidQty - 0.5, Ask - 2614.23, askQuantity - 0.26
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60191.39, BidQty - 0.034227, Ask - 60191.4, askQuantity - 0.15355095684466552
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02451964823294, BidQty - 0.02171597964426474, Ask - 23.02619699775061, AskQty - 0.006668533099915094
2024-08-11 23:39:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04342879547576564, BidQty - 0.034227, Ask - 0.04343195928852947, AskQty - 0.26
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 09ebbc34-cad1-4c99-bc4a-fb1e0aec0f27, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3024d775-32d0-427a-be5d-6875a2a68cfa, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0c688d0e-8d78-4a68-a9cb-ca51647fa780, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(699071999<open>)] for JPA transaction
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 99f46d03-3427-4298-b4af-de09c6921d26, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(699071999<open>)]
2024-08-11 23:39:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343195928852947, askSource=HUOBI, bidQuantity=0.60814, symbol=ETHBTC, priceDate=2024-08-11T23:39:43.770755200, askQuantity=0.26, bidSource=BINANCE, priceId=99f46d03-3427-4298-b4af-de09c6921d26, bidPrice=0.043431888628240316}
2024-08-11 23:39:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2613.51, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:39:43.770755200, askQuantity=19.9449, bidSource=HUOBI, priceId=09ebbc34-cad1-4c99-bc4a-fb1e0aec0f27, bidPrice=2614.04}
2024-08-11 23:39:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60174.68, askSource=BINANCE, bidQuantity=0.034227, symbol=BTCUSDT, priceDate=2024-08-11T23:39:43.770755200, askQuantity=3.48187, bidSource=HUOBI, priceId=3024d775-32d0-427a-be5d-6875a2a68cfa, bidPrice=60191.39}
2024-08-11 23:39:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02455710732734, askSource=BINANCE, bidQuantity=0.02171597964426474, symbol=BTCETH, priceDate=2024-08-11T23:39:43.770755200, askQuantity=0.1512241900580111, bidSource=HUOBI, priceId=0c688d0e-8d78-4a68-a9cb-ca51647fa780, bidPrice=23.02451964823294}
2024-08-11 23:39:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(699071999<open>)] after transaction
2024-08-11 23:39:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:39:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2024-08-11 23:39:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:39:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:39:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1f6c0769]
2024-08-11 23:39:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:39:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:39:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60178.01, BidQty - 2.41728, Ask - 60178.02, askQuantity - 0.28351
2024-08-11 23:39:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.24, BidQty - 21.4834, Ask - 2614.25, askQuantity - 5.6514
2024-08-11 23:39:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01922539925409, BidQty - 0.9332807523877907, Ask - 23.019317277679175, AskQty - 0.012316177607704605
2024-08-11 23:39:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043441774920477606, BidQty - 2.41728, Ask - 0.04344194831301334, AskQty - 5.6514
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:39:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:39:54 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.6, BidQty - 0.09, Ask - 2614.61, askQuantity - 3.1529
2024-08-11 23:39:54 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60200.0, BidQty - 0.054131, Ask - 60200.01, askQuantity - 0.471816
2024-08-11 23:39:54 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.024466364008397, BidQty - 0.0039088853820598, Ask - 23.02455824982789, AskQty - 0.020491858948196186
2024-08-11 23:39:54 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043431886473108555, BidQty - 0.054131, Ask - 0.04343205980066445, AskQty - 3.1529
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 147decdf-cdbc-4ea6-a241-b5471ca52d29, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9483cbc8-9a50-44b5-a234-3d6786dcc9b1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e44c5674-fe5a-4990-92eb-e1f5d6b2dec2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1216150107<open>)] for JPA transaction
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 48221706-fda4-4d1e-8f5b-26e1f2d49e2f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:39:54 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1216150107<open>)]
2024-08-11 23:39:54 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:39:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:39:54 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:39:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60178.02, askSource=BINANCE, bidQuantity=0.054131, symbol=BTCUSDT, priceDate=2024-08-11T23:39:54.047776100, askQuantity=0.28351, bidSource=HUOBI, priceId=9483cbc8-9a50-44b5-a234-3d6786dcc9b1, bidPrice=60200.0}
2024-08-11 23:39:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019317277679175, askSource=BINANCE, bidQuantity=0.0039088853820598, symbol=BTCETH, priceDate=2024-08-11T23:39:54.047776100, askQuantity=0.012316177607704605, bidSource=HUOBI, priceId=e44c5674-fe5a-4990-92eb-e1f5d6b2dec2, bidPrice=23.024466364008397}
2024-08-11 23:39:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343205980066445, askSource=HUOBI, bidQuantity=2.41728, symbol=ETHBTC, priceDate=2024-08-11T23:39:54.047776100, askQuantity=3.1529, bidSource=BINANCE, priceId=48221706-fda4-4d1e-8f5b-26e1f2d49e2f, bidPrice=0.043441774920477606}
2024-08-11 23:39:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.25, askSource=BINANCE, bidQuantity=0.09, symbol=ETHUSDT, priceDate=2024-08-11T23:39:54.047776100, askQuantity=5.6514, bidSource=HUOBI, priceId=147decdf-cdbc-4ea6-a241-b5471ca52d29, bidPrice=2614.6}
2024-08-11 23:39:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:39:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1216150107<open>)] after transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4a5f10b1]
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60204.8, BidQty - 0.69936, Ask - 60204.81, askQuantity - 1.77597
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.99, BidQty - 31.8637, Ask - 2615.0, askQuantity - 6.7507
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022868068833652, BidQty - 0.69936, Ask - 23.02295993483723, AskQty - 0.0771390822477473
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043434901629952824, BidQty - 0.69936, Ask - 0.043435074944190494, AskQty - 6.7507
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.3, BidQty - 0.1123, Ask - 2614.31, askQuantity - 0.2949
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60185.7, BidQty - 0.300352, Ask - 60185.71, askQuantity - 0.23323
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02163859679992, BidQty - 0.004878019413249326, Ask - 23.02173048234709, AskQty - 0.010130863106873708
2024-08-11 23:40:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434372212274309, BidQty - 0.300352, Ask - 0.04343739459705545, AskQty - 0.2949
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f2dfd9fd-2a7d-48de-80c7-548dd5c8e592, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 59720a36-79b8-4c12-8f03-ee9d79bd43f0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c2d953d1-6cb2-4c8d-b121-0eb052fcf090, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(705066255<open>)] for JPA transaction
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4cf53c32-0419-4400-9f8d-15ea4f01ba47, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(705066255<open>)]
2024-08-11 23:40:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043435074944190494, askSource=BINANCE, bidQuantity=0.300352, symbol=ETHBTC, priceDate=2024-08-11T23:40:03.717837100, askQuantity=6.7507, bidSource=HUOBI, priceId=4cf53c32-0419-4400-9f8d-15ea4f01ba47, bidPrice=0.0434372212274309}
2024-08-11 23:40:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02173048234709, askSource=HUOBI, bidQuantity=0.69936, symbol=BTCETH, priceDate=2024-08-11T23:40:03.717837100, askQuantity=0.010130863106873708, bidSource=BINANCE, priceId=c2d953d1-6cb2-4c8d-b121-0eb052fcf090, bidPrice=23.022868068833652}
2024-08-11 23:40:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.31, askSource=HUOBI, bidQuantity=31.8637, symbol=ETHUSDT, priceDate=2024-08-11T23:40:03.717837100, askQuantity=0.2949, bidSource=BINANCE, priceId=f2dfd9fd-2a7d-48de-80c7-548dd5c8e592, bidPrice=2614.99}
2024-08-11 23:40:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60185.71, askSource=HUOBI, bidQuantity=0.69936, symbol=BTCUSDT, priceDate=2024-08-11T23:40:03.717837100, askQuantity=0.23323, bidSource=BINANCE, priceId=59720a36-79b8-4c12-8f03-ee9d79bd43f0, bidPrice=60204.8}
2024-08-11 23:40:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(705066255<open>)] after transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@66f53607]
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60222.01, BidQty - 2.49737, Ask - 60222.02, askQuantity - 0.01099
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.19, BidQty - 37.4906, Ask - 2616.2, askQuantity - 2.0318
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018886170782054, BidQty - 1.6286887089952657, Ask - 23.018977979428097, AskQty - 4.774321435913309E-4
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344241524943866, BidQty - 2.49737, Ask - 0.043442588515394946, AskQty - 0.2529775590168948
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.99, BidQty - 0.0888, Ask - 2616.0, askQuantity - 0.5864
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60227.58, BidQty - 0.057461, Ask - 60227.59, askQuantity - 0.594382
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022775229357798, BidQty - 0.003857050208558936, Ask - 23.022867059889375, AskQty - 0.02581702784687217
2024-08-11 23:40:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043435076847670645, BidQty - 0.057461, Ask - 0.043435250096384416, AskQty - 0.5864
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0e98ac24-5f2c-4a61-a5bd-d735db706577, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 08b5a26b-a6fb-47b5-9c91-593b33e1f19b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a05f4d3c-6d1d-4f71-825e-062e2408b8ab, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1993048802<open>)] for JPA transaction
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e74ebc8b-afba-46dd-96e2-532896cd733e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1993048802<open>)]
2024-08-11 23:40:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.0, askSource=HUOBI, bidQuantity=37.4906, symbol=ETHUSDT, priceDate=2024-08-11T23:40:13.845310600, askQuantity=0.5864, bidSource=BINANCE, priceId=0e98ac24-5f2c-4a61-a5bd-d735db706577, bidPrice=2616.19}
2024-08-11 23:40:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60222.02, askSource=BINANCE, bidQuantity=0.057461, symbol=BTCUSDT, priceDate=2024-08-11T23:40:13.845310600, askQuantity=0.01099, bidSource=HUOBI, priceId=08b5a26b-a6fb-47b5-9c91-593b33e1f19b, bidPrice=60227.58}
2024-08-11 23:40:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043435250096384416, askSource=HUOBI, bidQuantity=2.49737, symbol=ETHBTC, priceDate=2024-08-11T23:40:13.845310600, askQuantity=0.5864, bidSource=BINANCE, priceId=e74ebc8b-afba-46dd-96e2-532896cd733e, bidPrice=0.04344241524943866}
2024-08-11 23:40:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.018977979428097, askSource=BINANCE, bidQuantity=0.003857050208558936, symbol=BTCETH, priceDate=2024-08-11T23:40:13.845310600, askQuantity=4.774321435913309E-4, bidSource=HUOBI, priceId=a05f4d3c-6d1d-4f71-825e-062e2408b8ab, bidPrice=23.022775229357798}
2024-08-11 23:40:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1993048802<open>)] after transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2303a276]
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60234.76, BidQty - 0.31577, Ask - 60234.77, askQuantity - 5.88353
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.43, BidQty - 17.1083, Ask - 2616.44, askQuantity - 5.3295
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02164773509043, BidQty - 0.31577, Ask - 23.021739545869753, AskQty - 0.2555640935941152
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043437204126453875, BidQty - 0.31577, Ask - 0.043437377354869515, AskQty - 5.3295
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.58, BidQty - 0.1528, Ask - 2616.59, askQuantity - 0.0863
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60235.23, BidQty - 0.24584, Ask - 60235.24, askQuantity - 0.0166
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020507607229256, BidQty - 0.006637559979433962, Ask - 23.020599408388048, AskQty - 7.21093300201012E-4
2024-08-11 23:40:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434393554337959, BidQty - 0.24584, Ask - 0.04343952866121703, AskQty - 0.0863
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2abaeae8-e6a8-45a8-8593-48952c111d38, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 061c5222-765a-4eba-85d7-b3a47b19bff9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4e8f130f-a9fa-43a9-a494-73b070f1aef1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1165179462<open>)] for JPA transaction
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f41f3627-7ef4-43c7-b997-121c79e14a85, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1165179462<open>)]
2024-08-11 23:40:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.020599408388048, askSource=HUOBI, bidQuantity=0.31577, symbol=BTCETH, priceDate=2024-08-11T23:40:23.746650400, askQuantity=7.21093300201012E-4, bidSource=BINANCE, priceId=4e8f130f-a9fa-43a9-a494-73b070f1aef1, bidPrice=23.02164773509043}
2024-08-11 23:40:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.44, askSource=BINANCE, bidQuantity=0.1528, symbol=ETHUSDT, priceDate=2024-08-11T23:40:23.746650400, askQuantity=5.3295, bidSource=HUOBI, priceId=2abaeae8-e6a8-45a8-8593-48952c111d38, bidPrice=2616.58}
2024-08-11 23:40:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043437377354869515, askSource=BINANCE, bidQuantity=0.24584, symbol=ETHBTC, priceDate=2024-08-11T23:40:23.746650400, askQuantity=5.3295, bidSource=HUOBI, priceId=f41f3627-7ef4-43c7-b997-121c79e14a85, bidPrice=0.0434393554337959}
2024-08-11 23:40:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60234.77, askSource=BINANCE, bidQuantity=0.24584, symbol=BTCUSDT, priceDate=2024-08-11T23:40:23.746650400, askQuantity=5.88353, bidSource=HUOBI, priceId=061c5222-765a-4eba-85d7-b3a47b19bff9, bidPrice=60235.23}
2024-08-11 23:40:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1165179462<open>)] after transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6c726700]
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60243.96, BidQty - 1.77338, Ask - 60243.97, askQuantity - 0.08362
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.35, BidQty - 31.1404, Ask - 2617.36, askQuantity - 3.769
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01707063606076, BidQty - 1.3529262907684025, Ask - 23.01716239708102, AskQty - 0.0036329413051629893
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344584196559423, BidQty - 1.77338, Ask - 0.043446015168989556, AskQty - 1.924687446587401
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.14, BidQty - 0.1073, Ask - 2617.15, askQuantity - 3.0863
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60240.19, BidQty - 0.270085, Ask - 60240.2, askQuantity - 0.2332
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0174770265365, BidQty - 0.004661675120878603, Ask - 23.017568796472485, AskQty - 0.010131391462843748
2024-08-11 23:40:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043445074883549525, BidQty - 0.270085, Ask - 0.04344524809765706, AskQty - 3.0863
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 60db8f59-37bb-45c4-893b-95b14a3b50f3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3525180b-e442-4284-9e90-00bd34f7de8c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9ab6129d-eb45-4afa-a5b5-2bd7514a2069, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(426410673<open>)] for JPA transaction
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c55674a7-4db5-479d-aa01-e5469eb7c05b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(426410673<open>)]
2024-08-11 23:40:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.15, askSource=HUOBI, bidQuantity=31.1404, symbol=ETHUSDT, priceDate=2024-08-11T23:40:33.868753, askQuantity=3.0863, bidSource=BINANCE, priceId=60db8f59-37bb-45c4-893b-95b14a3b50f3, bidPrice=2617.35}
2024-08-11 23:40:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60240.2, askSource=HUOBI, bidQuantity=1.77338, symbol=BTCUSDT, priceDate=2024-08-11T23:40:33.868753, askQuantity=0.2332, bidSource=BINANCE, priceId=3525180b-e442-4284-9e90-00bd34f7de8c, bidPrice=60243.96}
2024-08-11 23:40:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344524809765706, askSource=HUOBI, bidQuantity=1.77338, symbol=ETHBTC, priceDate=2024-08-11T23:40:33.868753, askQuantity=3.0863, bidSource=BINANCE, priceId=c55674a7-4db5-479d-aa01-e5469eb7c05b, bidPrice=0.04344584196559423}
2024-08-11 23:40:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01716239708102, askSource=BINANCE, bidQuantity=0.004661675120878603, symbol=BTCETH, priceDate=2024-08-11T23:40:33.868753, askQuantity=0.0036329413051629893, bidSource=HUOBI, priceId=9ab6129d-eb45-4afa-a5b5-2bd7514a2069, bidPrice=23.0174770265365}
2024-08-11 23:40:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(426410673<open>)] after transaction
2024-08-11 23:40:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@12eb1f87]
2024-08-11 23:40:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60243.99, BidQty - 3.76453, Ask - 60244.0, askQuantity - 0.24809
2024-08-11 23:40:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.93, BidQty - 41.2745, Ask - 2616.94, askQuantity - 3.7649
2024-08-11 23:40:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02077617369905, BidQty - 1.7929239087583677, Ask - 23.02086796360621, AskQty - 0.010776743969523935
2024-08-11 23:40:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043438848682026424, BidQty - 3.76453, Ask - 0.04343902188417467, AskQty - 3.7649
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:44 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.21, BidQty - 0.9981, Ask - 2616.22, askQuantity - 3.0
2024-08-11 23:40:44 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60235.23, BidQty - 0.241172, Ask - 60235.24, askQuantity - 0.243955
2024-08-11 23:40:44 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023763292077888, BidQty - 0.04335086264300808, Ask - 23.02385511866402, AskQty - 0.010595749440858874
2024-08-11 23:40:44 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343321285015217, BidQty - 0.241172, Ask - 0.04343338607655353, AskQty - 3.0
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 810ba109-9484-4147-8a62-65834c717185, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3194682d-9df7-49f3-a003-e6d7999cc184, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2bde3608-be25-4618-8800-1db38fc5b886, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1945162898<open>)] for JPA transaction
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5357aa42-c30d-492f-a48c-29c4085eaf5d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:44 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1945162898<open>)]
2024-08-11 23:40:44 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:44 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02086796360621, askSource=BINANCE, bidQuantity=0.04335086264300808, symbol=BTCETH, priceDate=2024-08-11T23:40:44.655999300, askQuantity=0.010776743969523935, bidSource=HUOBI, priceId=2bde3608-be25-4618-8800-1db38fc5b886, bidPrice=23.023763292077888}
2024-08-11 23:40:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60235.24, askSource=HUOBI, bidQuantity=3.76453, symbol=BTCUSDT, priceDate=2024-08-11T23:40:44.655999300, askQuantity=0.243955, bidSource=BINANCE, priceId=3194682d-9df7-49f3-a003-e6d7999cc184, bidPrice=60243.99}
2024-08-11 23:40:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.22, askSource=HUOBI, bidQuantity=41.2745, symbol=ETHUSDT, priceDate=2024-08-11T23:40:44.655999300, askQuantity=3.0, bidSource=BINANCE, priceId=810ba109-9484-4147-8a62-65834c717185, bidPrice=2616.93}
2024-08-11 23:40:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343338607655353, askSource=HUOBI, bidQuantity=3.76453, symbol=ETHBTC, priceDate=2024-08-11T23:40:44.655999300, askQuantity=3.0, bidSource=BINANCE, priceId=5357aa42-c30d-492f-a48c-29c4085eaf5d, bidPrice=0.043438848682026424}
2024-08-11 23:40:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1945162898<open>)] after transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:40:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@d405f41]
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:40:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60242.01, BidQty - 0.99549, Ask - 60242.02, askQuantity - 3.53634
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.99, BidQty - 2.4257, Ask - 2617.0, askQuantity - 21.3766
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019491784486053, BidQty - 0.10537591458186736, Ask - 23.019583567380845, AskQty - 0.1536231091952096
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434412723876125, BidQty - 0.99549, Ask - 0.043441445595855784, AskQty - 21.3766
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:40:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.21, BidQty - 0.5552, Ask - 2617.22, askQuantity - 3.1528
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60247.27, BidQty - 0.224028, Ask - 60247.28, askQuantity - 0.078614
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019566562994324, BidQty - 0.02411861224583288, Ask - 23.019658338459656, AskQty - 0.0034150810947813745
2024-08-11 23:40:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344113128426711, BidQty - 0.224028, Ask - 0.043441304477364696, AskQty - 1.8096602057832358
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b8f389c1-671f-468b-9056-6a55dbee8a77, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2fc432d9-6a3b-4a91-9975-6bedf5eef662, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9f41340c-a136-4842-971a-10f172c574ee, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1672599753<open>)] for JPA transaction
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b2060689-53ad-41af-9835-b2b0ff50041a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:40:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1672599753<open>)]
2024-08-11 23:40:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:40:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:40:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:40:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043441304477364696, askSource=HUOBI, bidQuantity=0.99549, symbol=ETHBTC, priceDate=2024-08-11T23:40:53.778331800, askQuantity=1.8096602057832358, bidSource=BINANCE, priceId=b2060689-53ad-41af-9835-b2b0ff50041a, bidPrice=0.0434412723876125}
2024-08-11 23:40:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019583567380845, askSource=BINANCE, bidQuantity=0.02411861224583288, symbol=BTCETH, priceDate=2024-08-11T23:40:53.778331800, askQuantity=0.1536231091952096, bidSource=HUOBI, priceId=9f41340c-a136-4842-971a-10f172c574ee, bidPrice=23.019566562994324}
2024-08-11 23:40:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60242.02, askSource=BINANCE, bidQuantity=0.224028, symbol=BTCUSDT, priceDate=2024-08-11T23:40:53.778331800, askQuantity=3.53634, bidSource=HUOBI, priceId=2fc432d9-6a3b-4a91-9975-6bedf5eef662, bidPrice=60247.27}
2024-08-11 23:40:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.0, askSource=BINANCE, bidQuantity=0.5552, symbol=ETHUSDT, priceDate=2024-08-11T23:40:53.778331800, askQuantity=21.3766, bidSource=HUOBI, priceId=b8f389c1-671f-468b-9056-6a55dbee8a77, bidPrice=2617.21}
2024-08-11 23:40:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:40:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1672599753<open>)] after transaction
2024-08-11 23:41:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@218c4ff7]
2024-08-11 23:41:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60257.99, BidQty - 1.61141, Ask - 60258.0, askQuantity - 0.1502
2024-08-11 23:41:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.99, BidQty - 31.4814, Ask - 2618.0, askQuantity - 5.808
2024-08-11 23:41:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01680290297937, BidQty - 1.3677572916056444, Ask - 23.016894640544848, AskQty - 0.0065256413754190305
2024-08-11 23:41:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344634737296292, BidQty - 1.61141, Ask - 0.043446520536114794, AskQty - 3.457123796027502
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:04 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.09, BidQty - 0.6121, Ask - 2618.1, askQuantity - 0.04573598029105076
2024-08-11 23:41:04 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60247.27, BidQty - 0.536249, Ask - 60247.28, askQuantity - 0.006964
2024-08-11 23:41:04 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011829189106603, BidQty - 0.026599363091472858, Ask - 23.011920904170594, AskQty - 3.026257577105556E-4
2024-08-11 23:41:04 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043455737752808095, BidQty - 0.536249, Ask - 0.04345591094833011, AskQty - 0.04573598029105076
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b370db7c-7f0e-457a-a09f-093a63ecdb97, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: fcb10829-d763-4f55-be4d-c308dab51198, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 614cd008-c4da-4205-8b95-34a5479194db, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1837127447<open>)] for JPA transaction
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ae6e7e7b-f691-45a5-8114-15d3f3ac6f2a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:04 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1837127447<open>)]
2024-08-11 23:41:04 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:04 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:04 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:04 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.0, askSource=BINANCE, bidQuantity=0.6121, symbol=ETHUSDT, priceDate=2024-08-11T23:41:04.028765200, askQuantity=5.808, bidSource=HUOBI, priceId=b370db7c-7f0e-457a-a09f-093a63ecdb97, bidPrice=2618.09}
2024-08-11 23:41:04 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60247.28, askSource=HUOBI, bidQuantity=1.61141, symbol=BTCUSDT, priceDate=2024-08-11T23:41:04.028765200, askQuantity=0.006964, bidSource=BINANCE, priceId=fcb10829-d763-4f55-be4d-c308dab51198, bidPrice=60257.99}
2024-08-11 23:41:04 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043446520536114794, askSource=BINANCE, bidQuantity=0.536249, symbol=ETHBTC, priceDate=2024-08-11T23:41:04.028765200, askQuantity=3.457123796027502, bidSource=HUOBI, priceId=ae6e7e7b-f691-45a5-8114-15d3f3ac6f2a, bidPrice=0.043455737752808095}
2024-08-11 23:41:04 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.011920904170594, askSource=HUOBI, bidQuantity=1.3677572916056444, symbol=BTCETH, priceDate=2024-08-11T23:41:04.028765200, askQuantity=3.026257577105556E-4, bidSource=BINANCE, priceId=614cd008-c4da-4205-8b95-34a5479194db, bidPrice=23.01680290297937}
2024-08-11 23:41:04 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:04 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:04 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:04 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:04 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1837127447<open>)] after transaction
2024-08-11 23:41:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@74c7dcd2]
2024-08-11 23:41:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60252.0, BidQty - 2.43969, Ask - 60252.01, askQuantity - 2.09994
2024-08-11 23:41:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.08, BidQty - 43.9098, Ask - 2618.09, askQuantity - 4.8521
2024-08-11 23:41:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013723745173007, BidQty - 1.90798327494523, Ask - 23.01381546782375, AskQty - 0.09124692960782553
2024-08-11 23:41:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043452160351165045, BidQty - 2.43969, Ask - 0.04345233353249685, AskQty - 4.8521
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:14 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.2, BidQty - 0.2108, Ask - 2618.21, askQuantity - 1.0
2024-08-11 23:41:14 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60252.63, BidQty - 0.015124, Ask - 60252.64, askQuantity - 0.049788
2024-08-11 23:41:14 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0129095832649, BidQty - 0.00916007596680842, Ask - 23.013001298602095, AskQty - 0.002163472697627855
2024-08-11 23:41:14 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345369763051046, BidQty - 0.015124, Ask - 0.04345387081028662, AskQty - 1.0
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b835c288-41b6-450f-81c0-8c54651535bc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 50e21257-7398-4eb4-8042-346bdeeb1265, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a2f9405c-844d-487f-9141-f223c5b31c63, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1740893768<open>)] for JPA transaction
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3b595fc8-c946-402d-ad1f-e95aa31301b1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:14 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1740893768<open>)]
2024-08-11 23:41:14 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:14 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.013001298602095, askSource=HUOBI, bidQuantity=1.90798327494523, symbol=BTCETH, priceDate=2024-08-11T23:41:14.053359200, askQuantity=0.002163472697627855, bidSource=BINANCE, priceId=a2f9405c-844d-487f-9141-f223c5b31c63, bidPrice=23.013723745173007}
2024-08-11 23:41:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60252.01, askSource=BINANCE, bidQuantity=0.015124, symbol=BTCUSDT, priceDate=2024-08-11T23:41:14.053359200, askQuantity=2.09994, bidSource=HUOBI, priceId=50e21257-7398-4eb4-8042-346bdeeb1265, bidPrice=60252.63}
2024-08-11 23:41:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345233353249685, askSource=BINANCE, bidQuantity=0.015124, symbol=ETHBTC, priceDate=2024-08-11T23:41:14.053359200, askQuantity=4.8521, bidSource=HUOBI, priceId=3b595fc8-c946-402d-ad1f-e95aa31301b1, bidPrice=0.04345369763051046}
2024-08-11 23:41:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.09, askSource=BINANCE, bidQuantity=0.2108, symbol=ETHUSDT, priceDate=2024-08-11T23:41:14.053359200, askQuantity=4.8521, bidSource=HUOBI, priceId=b835c288-41b6-450f-81c0-8c54651535bc, bidPrice=2618.2}
2024-08-11 23:41:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1740893768<open>)] after transaction
2024-08-11 23:41:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1cf1d652]
2024-08-11 23:41:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60252.0, BidQty - 0.52506, Ask - 60252.01, askQuantity - 3.9312
2024-08-11 23:41:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.08, BidQty - 15.7671, Ask - 2618.09, askQuantity - 9.5293
2024-08-11 23:41:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013723745173007, BidQty - 0.52506, Ask - 23.01381546782375, AskQty - 0.17081913277250002
2024-08-11 23:41:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043452160351165045, BidQty - 0.52506, Ask - 0.04345233353249685, AskQty - 9.5293
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:24 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.12, BidQty - 0.1527, Ask - 2618.13, askQuantity - 0.5
2024-08-11 23:41:24 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60252.63, BidQty - 0.215581, Ask - 60252.64, askQuantity - 0.016413
2024-08-11 23:41:24 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013612769419392, BidQty - 0.006635203326394218, Ask - 23.01370449024491, AskQty - 7.131837469694274E-4
2024-08-11 23:41:24 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043452369887858854, BidQty - 0.215581, Ask - 0.04345254306741465, AskQty - 0.3777224263844805
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9fbc5999-a8ec-4939-8dae-de3de14aa961, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 31dd36e9-3e4a-4242-a384-87e81f87853c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 53406c67-f9f6-45ee-a23d-13c3428f55fc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2084755449<open>)] for JPA transaction
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 73fe48ae-239e-4b09-b9c1-febc3878742b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:24 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2084755449<open>)]
2024-08-11 23:41:24 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:24 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:24 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345233353249685, askSource=BINANCE, bidQuantity=0.215581, symbol=ETHBTC, priceDate=2024-08-11T23:41:24.031079400, askQuantity=9.5293, bidSource=HUOBI, priceId=73fe48ae-239e-4b09-b9c1-febc3878742b, bidPrice=0.043452369887858854}
2024-08-11 23:41:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.09, askSource=BINANCE, bidQuantity=0.1527, symbol=ETHUSDT, priceDate=2024-08-11T23:41:24.031079400, askQuantity=9.5293, bidSource=HUOBI, priceId=9fbc5999-a8ec-4939-8dae-de3de14aa961, bidPrice=2618.12}
2024-08-11 23:41:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60252.01, askSource=BINANCE, bidQuantity=0.215581, symbol=BTCUSDT, priceDate=2024-08-11T23:41:24.031079400, askQuantity=3.9312, bidSource=HUOBI, priceId=31dd36e9-3e4a-4242-a384-87e81f87853c, bidPrice=60252.63}
2024-08-11 23:41:24 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01370449024491, askSource=HUOBI, bidQuantity=0.52506, symbol=BTCETH, priceDate=2024-08-11T23:41:24.031079400, askQuantity=7.131837469694274E-4, bidSource=BINANCE, priceId=53406c67-f9f6-45ee-a23d-13c3428f55fc, bidPrice=23.013723745173007}
2024-08-11 23:41:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:24 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:24 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2084755449<open>)] after transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@70fa160]
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60268.99, BidQty - 1.46634, Ask - 60269.0, askQuantity - 7.05174
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.13, BidQty - 21.3351, Ask - 2619.14, askQuantity - 6.0626
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010984521636875, BidQty - 0.9271702381938041, Ask - 23.0110761970578, AskQty - 0.3064498131078996
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043457332957241704, BidQty - 1.46634, Ask - 0.04345750609061144, AskQty - 6.0626
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.2, BidQty - 0.102, Ask - 2619.21, askQuantity - 1.231
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.01, BidQty - 0.271204, Ask - 60272.02, askQuantity - 0.2562
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011522558328657, BidQty - 0.0044325619802624795, Ask - 23.011614233353697, AskQty - 0.011133508384155699
2024-08-11 23:41:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345631687804723, BidQty - 0.271204, Ask - 0.04345649000257333, AskQty - 1.231
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b29e819e-9b4e-41c0-a873-ee67639fee76, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4809d525-5d00-4a8e-8162-df112d37120a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d7756401-ab18-45ab-b642-a006bbe01e80, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2122846433<open>)] for JPA transaction
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b60acd75-bf09-498b-8895-781188ba76f5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2122846433<open>)]
2024-08-11 23:41:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345649000257333, askSource=HUOBI, bidQuantity=1.46634, symbol=ETHBTC, priceDate=2024-08-11T23:41:33.898154400, askQuantity=1.231, bidSource=BINANCE, priceId=b60acd75-bf09-498b-8895-781188ba76f5, bidPrice=0.043457332957241704}
2024-08-11 23:41:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.14, askSource=BINANCE, bidQuantity=0.102, symbol=ETHUSDT, priceDate=2024-08-11T23:41:33.898154400, askQuantity=6.0626, bidSource=HUOBI, priceId=b29e819e-9b4e-41c0-a873-ee67639fee76, bidPrice=2619.2}
2024-08-11 23:41:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60269.0, askSource=BINANCE, bidQuantity=0.271204, symbol=BTCUSDT, priceDate=2024-08-11T23:41:33.898154400, askQuantity=7.05174, bidSource=HUOBI, priceId=4809d525-5d00-4a8e-8162-df112d37120a, bidPrice=60272.01}
2024-08-11 23:41:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.0110761970578, askSource=BINANCE, bidQuantity=0.0044325619802624795, symbol=BTCETH, priceDate=2024-08-11T23:41:33.898154400, askQuantity=0.3064498131078996, bidSource=HUOBI, priceId=d7756401-ab18-45ab-b642-a006bbe01e80, bidPrice=23.011522558328657}
2024-08-11 23:41:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2122846433<open>)] after transaction
2024-08-11 23:41:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6b646ad6]
2024-08-11 23:41:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60268.0, BidQty - 3.49141, Ask - 60268.01, askQuantity - 1.21069
2024-08-11 23:41:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.79, BidQty - 22.9698, Ask - 2618.8, askQuantity - 3.4874
2024-08-11 23:41:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01359401252482, BidQty - 0.9980970372336895, Ask - 23.01368570981255, AskQty - 0.05260739263002047
2024-08-11 23:41:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043452405347380804, BidQty - 3.49141, Ask - 0.043452578482776935, AskQty - 3.4874
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:44 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.95, BidQty - 0.0816, Ask - 2618.96, askQuantity - 3.6527
2024-08-11 23:41:44 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.01, BidQty - 0.017661, Ask - 60272.02, askQuantity - 0.500986
2024-08-11 23:41:44 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013719186241868, BidQty - 0.003545711118643629, Ask - 23.01381087840547, AskQty - 0.021768928346851492
2024-08-11 23:41:44 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043452169016402635, BidQty - 0.017661, Ask - 0.04345234214024055, AskQty - 3.6527
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a8031632-dbd4-4fd8-8140-819cb9ee7010, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c9067a88-19ec-4049-9f76-2afbd7767fc8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d310b63c-303d-4e7d-bb4d-f05da1279f5d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(14650997<open>)] for JPA transaction
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 20169b2f-effc-48c4-b4cc-4fbb71785027, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:44 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(14650997<open>)]
2024-08-11 23:41:44 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:44 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:44 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.8, askSource=BINANCE, bidQuantity=0.0816, symbol=ETHUSDT, priceDate=2024-08-11T23:41:44.477839500, askQuantity=3.4874, bidSource=HUOBI, priceId=a8031632-dbd4-4fd8-8140-819cb9ee7010, bidPrice=2618.95}
2024-08-11 23:41:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01368570981255, askSource=BINANCE, bidQuantity=0.003545711118643629, symbol=BTCETH, priceDate=2024-08-11T23:41:44.477839500, askQuantity=0.05260739263002047, bidSource=HUOBI, priceId=d310b63c-303d-4e7d-bb4d-f05da1279f5d, bidPrice=23.013719186241868}
2024-08-11 23:41:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345234214024055, askSource=HUOBI, bidQuantity=3.49141, symbol=ETHBTC, priceDate=2024-08-11T23:41:44.477839500, askQuantity=3.6527, bidSource=BINANCE, priceId=20169b2f-effc-48c4-b4cc-4fbb71785027, bidPrice=0.043452405347380804}
2024-08-11 23:41:44 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60268.01, askSource=BINANCE, bidQuantity=0.017661, symbol=BTCUSDT, priceDate=2024-08-11T23:41:44.477839500, askQuantity=1.21069, bidSource=HUOBI, priceId=c9067a88-19ec-4049-9f76-2afbd7767fc8, bidPrice=60272.01}
2024-08-11 23:41:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:44 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:44 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(14650997<open>)] after transaction
2024-08-11 23:41:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:41:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:41:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:41:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@54753c6a]
2024-08-11 23:41:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:41:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:41:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60268.0, BidQty - 1.48268, Ask - 60268.01, askQuantity - 2.32347
2024-08-11 23:41:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.99, BidQty - 1.9511, Ask - 2619.0, askQuantity - 16.4977
2024-08-11 23:41:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01183657884689, BidQty - 0.08478680062388, Ask - 23.011928262421776, AskQty - 0.10096807071114508
2024-08-11 23:41:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043455723857482594, BidQty - 1.48268, Ask - 0.04345589699342935, AskQty - 16.4977
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:41:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:41:54 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:41:54 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:41:54 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.96, BidQty - 0.5, Ask - 2619.01, askQuantity - 0.5
2024-08-11 23:41:54 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.01, BidQty - 0.193479, Ask - 60272.02, askQuantity - 0.2
2024-08-11 23:41:54 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013279827110242, BidQty - 0.021726585856353557, Ask - 23.013723004551423, AskQty - 0.008690466986173685
2024-08-11 23:41:54 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345233493086842, BidQty - 0.193479, Ask - 0.043453171712707114, AskQty - 0.5
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7e909f2d-7b4c-461f-ac75-624554bd81dc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6b526b1b-2398-48b6-89c9-ad3fb7005d0a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cc9cae19-d668-4bcb-b101-2efee43e4e91, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1867395910<open>)] for JPA transaction
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7f34d43b-f551-4184-8894-e768a8e6092f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:41:54 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1867395910<open>)]
2024-08-11 23:41:54 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:41:54 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:41:54 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:41:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.0, askSource=BINANCE, bidQuantity=1.9511, symbol=ETHUSDT, priceDate=2024-08-11T23:41:54.233967100, askQuantity=16.4977, bidSource=BINANCE, priceId=7e909f2d-7b4c-461f-ac75-624554bd81dc, bidPrice=2618.99}
2024-08-11 23:41:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043453171712707114, askSource=HUOBI, bidQuantity=1.48268, symbol=ETHBTC, priceDate=2024-08-11T23:41:54.233967100, askQuantity=0.5, bidSource=BINANCE, priceId=7f34d43b-f551-4184-8894-e768a8e6092f, bidPrice=0.043455723857482594}
2024-08-11 23:41:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.011928262421776, askSource=BINANCE, bidQuantity=0.021726585856353557, symbol=BTCETH, priceDate=2024-08-11T23:41:54.233967100, askQuantity=0.10096807071114508, bidSource=HUOBI, priceId=cc9cae19-d668-4bcb-b101-2efee43e4e91, bidPrice=23.013279827110242}
2024-08-11 23:41:54 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60268.01, askSource=BINANCE, bidQuantity=0.193479, symbol=BTCUSDT, priceDate=2024-08-11T23:41:54.233967100, askQuantity=2.32347, bidSource=HUOBI, priceId=6b526b1b-2398-48b6-89c9-ad3fb7005d0a, bidPrice=60272.01}
2024-08-11 23:41:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:54 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:41:54 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1867395910<open>)] after transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@66a11b61]
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60292.0, BidQty - 0.21911, Ask - 60292.01, askQuantity - 8.25016
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.12, BidQty - 26.1984, Ask - 2619.13, askQuantity - 7.173
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019857739020207, BidQty - 0.21911, Ask - 23.019949448669784, AskQty - 0.3583917513979049
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344058192785412, BidQty - 0.21911, Ask - 0.04344075499237047, AskQty - 7.173
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.04, BidQty - 0.5817, Ask - 2619.05, askQuantity - 0.1527
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.0, BidQty - 0.441755, Ask - 60272.01, askQuantity - 0.432613
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012924533704968, BidQty - 0.02527710022896204, Ask - 23.01301621968355, AskQty - 0.018798622304449446
2024-08-11 23:42:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345366945618704, BidQty - 0.441755, Ask - 0.04345384258030263, AskQty - 0.1527
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0060ba01-8c67-4138-a0d0-132091023fc9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a8a1a85d-ea6d-4f6e-8c28-aa35c2459cd4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 151095b7-0002-47f4-bf92-0103a49a38d5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(384030301<open>)] for JPA transaction
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8e82e386-5655-45f7-9d12-558c3fee0f13, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(384030301<open>)]
2024-08-11 23:42:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.05, askSource=HUOBI, bidQuantity=26.1984, symbol=ETHUSDT, priceDate=2024-08-11T23:42:03.726948300, askQuantity=0.1527, bidSource=BINANCE, priceId=0060ba01-8c67-4138-a0d0-132091023fc9, bidPrice=2619.12}
2024-08-11 23:42:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01301621968355, askSource=HUOBI, bidQuantity=0.21911, symbol=BTCETH, priceDate=2024-08-11T23:42:03.726948300, askQuantity=0.018798622304449446, bidSource=BINANCE, priceId=151095b7-0002-47f4-bf92-0103a49a38d5, bidPrice=23.019857739020207}
2024-08-11 23:42:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344075499237047, askSource=BINANCE, bidQuantity=0.441755, symbol=ETHBTC, priceDate=2024-08-11T23:42:03.726948300, askQuantity=7.173, bidSource=HUOBI, priceId=8e82e386-5655-45f7-9d12-558c3fee0f13, bidPrice=0.04345366945618704}
2024-08-11 23:42:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60272.01, askSource=HUOBI, bidQuantity=0.21911, symbol=BTCUSDT, priceDate=2024-08-11T23:42:03.726948300, askQuantity=0.432613, bidSource=BINANCE, priceId=a8a1a85d-ea6d-4f6e-8c28-aa35c2459cd4, bidPrice=60292.0}
2024-08-11 23:42:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(384030301<open>)] after transaction
2024-08-11 23:42:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5d1b4af4]
2024-08-11 23:42:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60273.49, BidQty - 3.81982, Ask - 60273.5, askQuantity - 0.21798
2024-08-11 23:42:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.39, BidQty - 44.878, Ask - 2618.4, askQuantity - 3.7953
2024-08-11 23:42:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01920638557898, BidQty - 1.9495893667348614, Ask - 23.019298118309344, AskQty - 0.009469445978746879
2024-08-11 23:42:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344181107783686, BidQty - 3.81982, Ask - 0.04344198419570528, AskQty - 3.7953
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:14 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:14 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:14 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.22, BidQty - 1.4949, Ask - 2618.23, askQuantity - 3.0974
2024-08-11 23:42:14 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60272.01, BidQty - 0.006963, Ask - 60272.02, askQuantity - 0.394896
2024-08-11 23:42:14 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020135740557553, BidQty - 0.006963, Ask - 23.020227482793654, AskQty - 0.01715430485190309
2024-08-11 23:42:14 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344005726040043, BidQty - 0.006963, Ask - 0.04344023038222883, AskQty - 3.0974
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 49446744-7c0c-4b03-91e2-9a0392b6bc9b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0c2e5841-e131-4b29-b6f8-0626f740e771, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: eb5b73bb-20da-475f-b6ef-eb33acc79a85, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1531629976<open>)] for JPA transaction
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 659dd172-95e1-462e-b787-72361b937c55, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:14 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1531629976<open>)]
2024-08-11 23:42:14 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:14 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:14 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344023038222883, askSource=HUOBI, bidQuantity=3.81982, symbol=ETHBTC, priceDate=2024-08-11T23:42:14.218640700, askQuantity=3.0974, bidSource=BINANCE, priceId=659dd172-95e1-462e-b787-72361b937c55, bidPrice=0.04344181107783686}
2024-08-11 23:42:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60272.02, askSource=HUOBI, bidQuantity=3.81982, symbol=BTCUSDT, priceDate=2024-08-11T23:42:14.218640700, askQuantity=0.394896, bidSource=BINANCE, priceId=0c2e5841-e131-4b29-b6f8-0626f740e771, bidPrice=60273.49}
2024-08-11 23:42:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.23, askSource=HUOBI, bidQuantity=44.878, symbol=ETHUSDT, priceDate=2024-08-11T23:42:14.218640700, askQuantity=3.0974, bidSource=BINANCE, priceId=49446744-7c0c-4b03-91e2-9a0392b6bc9b, bidPrice=2618.39}
2024-08-11 23:42:14 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019298118309344, askSource=BINANCE, bidQuantity=0.006963, symbol=BTCETH, priceDate=2024-08-11T23:42:14.218640700, askQuantity=0.009469445978746879, bidSource=HUOBI, priceId=eb5b73bb-20da-475f-b6ef-eb33acc79a85, bidPrice=23.020135740557553}
2024-08-11 23:42:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:14 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:14 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1531629976<open>)] after transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1a8b4701]
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60285.98, BidQty - 4.32138, Ask - 60285.99, askQuantity - 0.41811
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.12, BidQty - 34.9187, Ask - 2619.13, askQuantity - 3.4126
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017559265863092, BidQty - 1.5170461644813604, Ask - 23.01765096673692, AskQty - 0.0181647554133224
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344491978982181, BidQty - 4.32138, Ask - 0.04344509287233947, AskQty - 3.4126
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.03, BidQty - 1.4538, Ask - 2619.04, askQuantity - 3.0
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60286.5, BidQty - 0.209024, Ask - 60286.51, askQuantity - 0.033173
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01854878123282, BidQty - 0.06315776089174192, Ask - 23.018640489036017, AskQty - 0.0014411363701431715
2024-08-11 23:42:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344305218530647, BidQty - 0.209024, Ask - 0.043443225266021415, AskQty - 0.7635943187198363
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d453607a-7123-4f13-b584-5700054d217b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9b32f3f1-7804-4c03-905d-ecc409183062, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 00643930-f68e-4b6a-b570-eac5fb45d923, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(113748938<open>)] for JPA transaction
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 640e2a61-7035-497a-b06b-1c39553515ff, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(113748938<open>)]
2024-08-11 23:42:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01765096673692, askSource=BINANCE, bidQuantity=0.06315776089174192, symbol=BTCETH, priceDate=2024-08-11T23:42:23.887148800, askQuantity=0.0181647554133224, bidSource=HUOBI, priceId=00643930-f68e-4b6a-b570-eac5fb45d923, bidPrice=23.01854878123282}
2024-08-11 23:42:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043443225266021415, askSource=HUOBI, bidQuantity=4.32138, symbol=ETHBTC, priceDate=2024-08-11T23:42:23.887148800, askQuantity=0.7635943187198363, bidSource=BINANCE, priceId=640e2a61-7035-497a-b06b-1c39553515ff, bidPrice=0.04344491978982181}
2024-08-11 23:42:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.04, askSource=HUOBI, bidQuantity=34.9187, symbol=ETHUSDT, priceDate=2024-08-11T23:42:23.887148800, askQuantity=3.0, bidSource=BINANCE, priceId=d453607a-7123-4f13-b584-5700054d217b, bidPrice=2619.12}
2024-08-11 23:42:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60285.99, askSource=BINANCE, bidQuantity=0.209024, symbol=BTCUSDT, priceDate=2024-08-11T23:42:23.887148800, askQuantity=0.41811, bidSource=HUOBI, priceId=9b32f3f1-7804-4c03-905d-ecc409183062, bidPrice=60286.5}
2024-08-11 23:42:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(113748938<open>)] after transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4137425]
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60288.0, BidQty - 0.27886, Ask - 60288.01, askQuantity - 4.35013
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.31, BidQty - 2.9635, Ask - 2619.32, askQuantity - 13.9431
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01666081273002, BidQty - 0.12875455845276007, Ask - 23.01675250352192, AskQty - 0.18899842622604393
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344661567034639, BidQty - 0.27886, Ask - 0.043446788747346074, AskQty - 13.9431
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.17, BidQty - 0.9867, Ask - 2619.18, askQuantity - 0.1527
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60292.03, BidQty - 0.004411, Ask - 60292.04, askQuantity - 0.587877
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019429745187427, BidQty - 0.004411, Ask - 23.019521451452178, AskQty - 0.02553819379954634
2024-08-11 23:42:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043441389609640016, BidQty - 0.004411, Ask - 0.0434415626742042, AskQty - 0.1527
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 25eb70e9-af7b-48da-ad20-6520c25cc9d8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f84c48bb-ec95-4803-9865-9ced2b2cf982, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: eb5923d2-29a1-42e6-a37d-61aa2f7e1e3c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1112300137<open>)] for JPA transaction
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 01f9d1e0-5fc3-46e2-b4b8-a97a0d1cd21c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1112300137<open>)]
2024-08-11 23:42:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2619.18, askSource=HUOBI, bidQuantity=2.9635, symbol=ETHUSDT, priceDate=2024-08-11T23:42:33.829606, askQuantity=0.1527, bidSource=BINANCE, priceId=25eb70e9-af7b-48da-ad20-6520c25cc9d8, bidPrice=2619.31}
2024-08-11 23:42:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60288.01, askSource=BINANCE, bidQuantity=0.004411, symbol=BTCUSDT, priceDate=2024-08-11T23:42:33.829606, askQuantity=4.35013, bidSource=HUOBI, priceId=f84c48bb-ec95-4803-9865-9ced2b2cf982, bidPrice=60292.03}
2024-08-11 23:42:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434415626742042, askSource=HUOBI, bidQuantity=0.27886, symbol=ETHBTC, priceDate=2024-08-11T23:42:33.829606, askQuantity=0.1527, bidSource=BINANCE, priceId=01f9d1e0-5fc3-46e2-b4b8-a97a0d1cd21c, bidPrice=0.04344661567034639}
2024-08-11 23:42:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01675250352192, askSource=BINANCE, bidQuantity=0.004411, symbol=BTCETH, priceDate=2024-08-11T23:42:33.829606, askQuantity=0.18899842622604393, bidSource=HUOBI, priceId=eb5923d2-29a1-42e6-a37d-61aa2f7e1e3c, bidPrice=23.019429745187427}
2024-08-11 23:42:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1112300137<open>)] after transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6bdb1684]
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60265.06, BidQty - 0.44384, Ask - 60265.07, askQuantity - 6.99916
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 14.5176, Ask - 2618.01, askQuantity - 7.9859
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019415510253967, BidQty - 0.44384, Ask - 23.019507257448435, AskQty - 0.3040534239817526
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344141639593217, BidQty - 0.44384, Ask - 0.043441589537951186, AskQty - 7.9859
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.86, BidQty - 0.0099, Ask - 2618.91, askQuantity - 3.0
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60286.5, BidQty - 0.004252, Ask - 60286.51, askQuantity - 0.500875
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01969139832984, BidQty - 4.3006658207061284E-4, Ask - 23.020134715105044, AskQty - 0.021758126361934037
2024-08-11 23:42:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344023231731278, BidQty - 0.004252, Ask - 0.04344106889602149, AskQty - 3.0
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 53c90d7f-b43d-45ce-a674-662ca0278a5b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c7afae59-3545-4716-8e5c-f6dee48ee85f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1cc7021e-401a-4fed-aa5b-c9ee3f66de0f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2141198370<open>)] for JPA transaction
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c6dba4f0-4f2e-4952-8cc3-d00a508baa0d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2141198370<open>)]
2024-08-11 23:42:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.01, askSource=BINANCE, bidQuantity=0.0099, symbol=ETHUSDT, priceDate=2024-08-11T23:42:43.780075100, askQuantity=7.9859, bidSource=HUOBI, priceId=53c90d7f-b43d-45ce-a674-662ca0278a5b, bidPrice=2618.86}
2024-08-11 23:42:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60265.07, askSource=BINANCE, bidQuantity=0.004252, symbol=BTCUSDT, priceDate=2024-08-11T23:42:43.780075100, askQuantity=6.99916, bidSource=HUOBI, priceId=c7afae59-3545-4716-8e5c-f6dee48ee85f, bidPrice=60286.5}
2024-08-11 23:42:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344106889602149, askSource=HUOBI, bidQuantity=0.44384, symbol=ETHBTC, priceDate=2024-08-11T23:42:43.780075100, askQuantity=3.0, bidSource=BINANCE, priceId=c6dba4f0-4f2e-4952-8cc3-d00a508baa0d, bidPrice=0.04344141639593217}
2024-08-11 23:42:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.019507257448435, askSource=BINANCE, bidQuantity=4.3006658207061284E-4, symbol=BTCETH, priceDate=2024-08-11T23:42:43.780075100, askQuantity=0.3040534239817526, bidSource=HUOBI, priceId=1cc7021e-401a-4fed-aa5b-c9ee3f66de0f, bidPrice=23.01969139832984}
2024-08-11 23:42:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2141198370<open>)] after transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:42:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5c53b357]
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:42:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60258.71, BidQty - 0.34391, Ask - 60258.72, askQuantity - 3.96331
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 6.3874, Ask - 2618.01, askQuantity - 20.5353
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016990003857888, BidQty - 0.2775080494421471, Ask - 23.017081741787624, AskQty - 0.17218994329783308
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434459942063157, BidQty - 0.34391, Ask - 0.04344616736733993, AskQty - 20.5353
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:42:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.16, BidQty - 0.1005, Ask - 2618.17, askQuantity - 3.1527
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60259.57, BidQty - 0.272607, Ask - 60259.58, askQuantity - 0.004464
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015911877380002, BidQty - 0.004366544351378544, Ask - 23.016003605585603, AskQty - 1.9395200298442174E-4
2024-08-11 23:42:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043448029342388374, BidQty - 0.272607, Ask - 0.04344820250127905, AskQty - 0.10274303062062433
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8c56f39f-94fb-4e78-be38-1de54f9034f8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c7598935-e908-402e-80f0-e767976cb4b0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a7b09de1-3170-4fd8-9f45-baa3341d429e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1089074189<open>)] for JPA transaction
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6c8af930-295d-42c5-b8bc-8e82a404412e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:42:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1089074189<open>)]
2024-08-11 23:42:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:42:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:42:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:42:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60258.72, askSource=BINANCE, bidQuantity=0.272607, symbol=BTCUSDT, priceDate=2024-08-11T23:42:53.737823900, askQuantity=3.96331, bidSource=HUOBI, priceId=c7598935-e908-402e-80f0-e767976cb4b0, bidPrice=60259.57}
2024-08-11 23:42:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.01, askSource=BINANCE, bidQuantity=0.1005, symbol=ETHUSDT, priceDate=2024-08-11T23:42:53.737823900, askQuantity=20.5353, bidSource=HUOBI, priceId=8c56f39f-94fb-4e78-be38-1de54f9034f8, bidPrice=2618.16}
2024-08-11 23:42:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344616736733993, askSource=BINANCE, bidQuantity=0.272607, symbol=ETHBTC, priceDate=2024-08-11T23:42:53.737823900, askQuantity=20.5353, bidSource=HUOBI, priceId=6c8af930-295d-42c5-b8bc-8e82a404412e, bidPrice=0.043448029342388374}
2024-08-11 23:42:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.016003605585603, askSource=HUOBI, bidQuantity=0.2775080494421471, symbol=BTCETH, priceDate=2024-08-11T23:42:53.737823900, askQuantity=1.9395200298442174E-4, bidSource=BINANCE, priceId=a7b09de1-3170-4fd8-9f45-baa3341d429e, bidPrice=23.016990003857888}
2024-08-11 23:42:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:42:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1089074189<open>)] after transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1c6ce999]
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60248.0, BidQty - 0.1898, Ask - 60248.01, askQuantity - 5.52849
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 18.2299, Ask - 2618.01, askQuantity - 11.6653
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012899110393008, BidQty - 0.1898, Ask - 23.012990832696715, AskQty - 0.24023344206721514
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043453717392491466, BidQty - 0.1898, Ask - 0.04345389058557961, AskQty - 11.6653
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.0, BidQty - 0.1005, Ask - 2618.01, askQuantity - 0.1527
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60259.58, BidQty - 0.016593, Ask - 60259.59, askQuantity - 0.28821
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.017322317332628, BidQty - 0.004366276781218854, Ask - 23.017414056531702, AskQty - 0.012521389209584734
2024-08-11 23:43:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043445366953210274, BidQty - 0.016593, Ask - 0.04344554011163038, AskQty - 0.1527
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4cd07562-f9bd-41a4-ade9-1ca3b797a4b0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5b044eae-c2be-4da8-a6ae-9a1bbb17698c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d5b1ef65-a445-45e4-ba9c-e5368fe287c4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1565909735<open>)] for JPA transaction
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d20cc2a7-9527-4066-8184-e89bc181c068, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1565909735<open>)]
2024-08-11 23:43:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.01, askSource=BINANCE, bidQuantity=18.2299, symbol=ETHUSDT, priceDate=2024-08-11T23:43:03.794354600, askQuantity=11.6653, bidSource=BINANCE, priceId=4cd07562-f9bd-41a4-ade9-1ca3b797a4b0, bidPrice=2618.0}
2024-08-11 23:43:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344554011163038, askSource=HUOBI, bidQuantity=0.1898, symbol=ETHBTC, priceDate=2024-08-11T23:43:03.794354600, askQuantity=0.1527, bidSource=BINANCE, priceId=d20cc2a7-9527-4066-8184-e89bc181c068, bidPrice=0.043453717392491466}
2024-08-11 23:43:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012990832696715, askSource=BINANCE, bidQuantity=0.004366276781218854, symbol=BTCETH, priceDate=2024-08-11T23:43:03.794354600, askQuantity=0.24023344206721514, bidSource=HUOBI, priceId=d5b1ef65-a445-45e4-ba9c-e5368fe287c4, bidPrice=23.017322317332628}
2024-08-11 23:43:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60248.01, askSource=BINANCE, bidQuantity=0.016593, symbol=BTCUSDT, priceDate=2024-08-11T23:43:03.794354600, askQuantity=5.52849, bidSource=HUOBI, priceId=5b044eae-c2be-4da8-a6ae-9a1bbb17698c, bidPrice=60259.58}
2024-08-11 23:43:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1565909735<open>)] after transaction
2024-08-11 23:43:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4c6a434f]
2024-08-11 23:43:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:14 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60234.93, BidQty - 0.1268, Ask - 60234.94, askQuantity - 6.7584
2024-08-11 23:43:14 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.4, BidQty - 4.8693, Ask - 2617.41, askQuantity - 23.533
2024-08-11 23:43:14 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013180968973145, BidQty - 0.1268, Ask - 23.01327271337969, AskQty - 0.2936740064819522
2024-08-11 23:43:14 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345318514470173, BidQty - 0.1268, Ask - 0.04345335837528158, AskQty - 23.533
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:14 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:15 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.78, BidQty - 3.9132, Ask - 2617.79, askQuantity - 0.0985
2024-08-11 23:43:15 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60242.16, BidQty - 0.033198, Ask - 60242.17, askQuantity - 0.133027
2024-08-11 23:43:15 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012602233181426, BidQty - 0.033198, Ask - 23.01269396205945, AskQty - 0.005780592233978293
2024-08-11 23:43:15 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345427795844672, BidQty - 0.033198, Ask - 0.0434544511684176, AskQty - 0.0985
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1286a1a0-c38d-4bb2-8e56-f0c959861df6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5874ee4a-c582-4b45-ba28-a79effdd7a54, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2419a8a5-972e-460a-af83-5374014af424, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(486204029<open>)] for JPA transaction
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e1714c2c-b6c4-4e7c-8f51-c033154fd9b2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:15 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(486204029<open>)]
2024-08-11 23:43:15 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:15 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:15 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:15 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345335837528158, askSource=BINANCE, bidQuantity=0.033198, symbol=ETHBTC, priceDate=2024-08-11T23:43:15.745998700, askQuantity=23.533, bidSource=HUOBI, priceId=e1714c2c-b6c4-4e7c-8f51-c033154fd9b2, bidPrice=0.04345427795844672}
2024-08-11 23:43:15 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60234.94, askSource=BINANCE, bidQuantity=0.033198, symbol=BTCUSDT, priceDate=2024-08-11T23:43:15.745998700, askQuantity=6.7584, bidSource=HUOBI, priceId=5874ee4a-c582-4b45-ba28-a79effdd7a54, bidPrice=60242.16}
2024-08-11 23:43:15 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.41, askSource=BINANCE, bidQuantity=3.9132, symbol=ETHUSDT, priceDate=2024-08-11T23:43:15.745998700, askQuantity=23.533, bidSource=HUOBI, priceId=1286a1a0-c38d-4bb2-8e56-f0c959861df6, bidPrice=2617.78}
2024-08-11 23:43:15 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01269396205945, askSource=HUOBI, bidQuantity=0.1268, symbol=BTCETH, priceDate=2024-08-11T23:43:15.745998700, askQuantity=0.005780592233978293, bidSource=BINANCE, priceId=2419a8a5-972e-460a-af83-5374014af424, bidPrice=23.013180968973145}
2024-08-11 23:43:15 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:15 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:15 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:15 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:15 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(486204029<open>)] after transaction
2024-08-11 23:43:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@48263493]
2024-08-11 23:43:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:43:25 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:25 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:25 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60239.69, BidQty - 2.66199, Ask - 60239.7, askQuantity - 1.99194
2024-08-11 23:43:25 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.78, BidQty - 12.0799, Ask - 2617.79, askQuantity - 22.0418
2024-08-11 23:43:25 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01165868919967, BidQty - 0.5249469481167649, Ask - 23.01175041447333, AskQty - 0.08656186357501781
2024-08-11 23:43:25 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345605970813268, BidQty - 2.66199, Ask - 0.043456232925501444, AskQty - 22.0418
2024-08-11 23:43:25 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:25 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:27 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:27 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:27 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.63, BidQty - 3.7506, Ask - 2617.64, askQuantity - 0.1528
2024-08-11 23:43:27 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60242.16, BidQty - 0.333606, Ask - 60242.17, askQuantity - 5.11E-4
2024-08-11 23:43:27 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01392093641601, BidQty - 0.16297092574369842, Ask - 23.014012675588223, AskQty - 2.2203863672241554E-5
2024-08-11 23:43:27 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043451788008300504, BidQty - 0.333606, Ask - 0.043451961217858055, AskQty - 0.01176011359850858
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ea29a1b8-fd29-4316-b201-db3fc978255f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9585dbd7-49e8-4864-92c6-862d91c26d2b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0f26df42-69c5-4687-b20b-d2240f9d502a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(202453343<open>)] for JPA transaction
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a6b9aa9e-63fe-42fa-9f22-cef888cbc51b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:27 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(202453343<open>)]
2024-08-11 23:43:27 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:27 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:27 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:27 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01175041447333, askSource=BINANCE, bidQuantity=0.16297092574369842, symbol=BTCETH, priceDate=2024-08-11T23:43:27.682752100, askQuantity=0.08656186357501781, bidSource=HUOBI, priceId=0f26df42-69c5-4687-b20b-d2240f9d502a, bidPrice=23.01392093641601}
2024-08-11 23:43:27 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.64, askSource=HUOBI, bidQuantity=12.0799, symbol=ETHUSDT, priceDate=2024-08-11T23:43:27.682752100, askQuantity=0.1528, bidSource=BINANCE, priceId=ea29a1b8-fd29-4316-b201-db3fc978255f, bidPrice=2617.78}
2024-08-11 23:43:27 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60239.7, askSource=BINANCE, bidQuantity=0.333606, symbol=BTCUSDT, priceDate=2024-08-11T23:43:27.682752100, askQuantity=1.99194, bidSource=HUOBI, priceId=9585dbd7-49e8-4864-92c6-862d91c26d2b, bidPrice=60242.16}
2024-08-11 23:43:27 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043451961217858055, askSource=HUOBI, bidQuantity=2.66199, symbol=ETHBTC, priceDate=2024-08-11T23:43:27.682752100, askQuantity=0.01176011359850858, bidSource=BINANCE, priceId=a6b9aa9e-63fe-42fa-9f22-cef888cbc51b, bidPrice=0.04345605970813268}
2024-08-11 23:43:27 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:27 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:27 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:27 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:27 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(202453343<open>)] after transaction
2024-08-11 23:43:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6c56e2d6]
2024-08-11 23:43:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:36 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:36 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:36 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60234.93, BidQty - 0.36256, Ask - 60234.94, askQuantity - 6.46809
2024-08-11 23:43:36 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 1.6105, Ask - 2618.01, askQuantity - 30.8156
2024-08-11 23:43:36 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007906768881707, BidQty - 0.06999767585020851, Ask - 23.00799847211612, AskQty - 0.28112354092159797
2024-08-11 23:43:36 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346314614076149, BidQty - 0.36256, Ask - 0.04346331937299504, AskQty - 30.8156
2024-08-11 23:43:36 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:36 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:38 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:38 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:40 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.78, BidQty - 4.0575, Ask - 2617.79, askQuantity - 0.604
2024-08-11 23:43:40 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60242.15, BidQty - 0.020252, Ask - 60242.16, askQuantity - 0.259122
2024-08-11 23:43:40 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012598413165303, BidQty - 0.020252, Ask - 23.01269014202874, AskQty - 0.01125996128226478
2024-08-11 23:43:40 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345428517171363, BidQty - 0.020252, Ask - 0.04345445838171446, AskQty - 0.604
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 182d4385-d70d-4313-b35a-535808d73eca, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3f6a2f44-8ade-4900-b207-2f5ca1ab95f5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0b7d4dd2-f464-40f6-bfc1-6ca2444396b2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(818025911<open>)] for JPA transaction
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 553ad5b1-7326-4a8e-ba86-3544926a4e26, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:40 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(818025911<open>)]
2024-08-11 23:43:40 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:40 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:40 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:40 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.79, askSource=HUOBI, bidQuantity=1.6105, symbol=ETHUSDT, priceDate=2024-08-11T23:43:40.724722600, askQuantity=0.604, bidSource=BINANCE, priceId=182d4385-d70d-4313-b35a-535808d73eca, bidPrice=2618.0}
2024-08-11 23:43:40 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00799847211612, askSource=BINANCE, bidQuantity=0.020252, symbol=BTCETH, priceDate=2024-08-11T23:43:40.724722600, askQuantity=0.28112354092159797, bidSource=HUOBI, priceId=0b7d4dd2-f464-40f6-bfc1-6ca2444396b2, bidPrice=23.012598413165303}
2024-08-11 23:43:40 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60234.94, askSource=BINANCE, bidQuantity=0.020252, symbol=BTCUSDT, priceDate=2024-08-11T23:43:40.724722600, askQuantity=6.46809, bidSource=HUOBI, priceId=3f6a2f44-8ade-4900-b207-2f5ca1ab95f5, bidPrice=60242.15}
2024-08-11 23:43:40 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345445838171446, askSource=HUOBI, bidQuantity=0.36256, symbol=ETHBTC, priceDate=2024-08-11T23:43:40.724722600, askQuantity=0.604, bidSource=BINANCE, priceId=553ad5b1-7326-4a8e-ba86-3544926a4e26, bidPrice=0.04346314614076149}
2024-08-11 23:43:40 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:40 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:40 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:40 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:40 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(818025911<open>)] after transaction
2024-08-11 23:43:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@40240d71]
2024-08-11 23:43:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:46 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:46 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:46 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60243.98, BidQty - 2.80276, Ask - 60243.99, askQuantity - 9.0E-5
2024-08-11 23:43:46 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 90.3063, Ask - 2618.01, askQuantity - 0.4979
2024-08-11 23:43:46 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01136359295801, BidQty - 2.80276, Ask - 23.011455309396485, AskQty - 3.911095530027145E-6
2024-08-11 23:43:46 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345661700030161, BidQty - 2.80276, Ask - 0.043456790205427996, AskQty - 0.002071022723366221
2024-08-11 23:43:46 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:46 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:48 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:48 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:49 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.7, BidQty - 0.6526, Ask - 2617.71, askQuantity - 3.1592
2024-08-11 23:43:49 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60234.77, BidQty - 0.327918, Ask - 60234.78, askQuantity - 0.036235
2024-08-11 23:43:49 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01048244457942, BidQty - 0.028360987283590527, Ask - 23.010574168162893, AskQty - 0.0015747108149145727
2024-08-11 23:43:49 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345828107946937, BidQty - 0.327918, Ask - 0.043458454311355386, AskQty - 0.8337848313793355
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8e6ca474-2d4e-438e-b122-a361766a098b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 43c20cee-f90e-474d-9bbb-c71570360f8e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: dcefbb3d-e4d4-4236-8f5a-678cbed79c0d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(935761556<open>)] for JPA transaction
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e246d8c2-83ca-4ec6-9d4d-e300f94d3b61, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:49 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(935761556<open>)]
2024-08-11 23:43:49 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:49 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:49 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:49 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.71, askSource=HUOBI, bidQuantity=90.3063, symbol=ETHUSDT, priceDate=2024-08-11T23:43:49.367939200, askQuantity=3.1592, bidSource=BINANCE, priceId=8e6ca474-2d4e-438e-b122-a361766a098b, bidPrice=2618.0}
2024-08-11 23:43:49 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60234.78, askSource=HUOBI, bidQuantity=2.80276, symbol=BTCUSDT, priceDate=2024-08-11T23:43:49.367939200, askQuantity=0.036235, bidSource=BINANCE, priceId=43c20cee-f90e-474d-9bbb-c71570360f8e, bidPrice=60243.98}
2024-08-11 23:43:49 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.010574168162893, askSource=HUOBI, bidQuantity=2.80276, symbol=BTCETH, priceDate=2024-08-11T23:43:49.367939200, askQuantity=0.0015747108149145727, bidSource=BINANCE, priceId=dcefbb3d-e4d4-4236-8f5a-678cbed79c0d, bidPrice=23.01136359295801}
2024-08-11 23:43:49 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043456790205427996, askSource=BINANCE, bidQuantity=0.327918, symbol=ETHBTC, priceDate=2024-08-11T23:43:49.367939200, askQuantity=0.002071022723366221, bidSource=HUOBI, priceId=e246d8c2-83ca-4ec6-9d4d-e300f94d3b61, bidPrice=0.04345828107946937}
2024-08-11 23:43:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:49 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(935761556<open>)] after transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:43:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@18e6f651]
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:43:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60247.67, BidQty - 0.23045, Ask - 60247.68, askQuantity - 3.09787
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 12.5666, Ask - 2618.01, askQuantity - 10.056
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01277306045431, BidQty - 0.23045, Ask - 23.012864782276548, AskQty - 0.1346147048317877
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345395540541976, BidQty - 0.23045, Ask - 0.04345412859949605, AskQty - 10.056
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:43:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.95, BidQty - 0.5945, Ask - 2617.96, askQuantity - 0.6527
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60246.92, BidQty - 0.378058, Ask - 60246.93, askQuantity - 0.023198016700270038
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012926095127504, BidQty - 0.02583330766120492, Ask - 23.013017819286084, AskQty - 0.00100803887966527
2024-08-11 23:43:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345366643578353, BidQty - 0.378058, Ask - 0.04345383963196791, AskQty - 0.533854243876848
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0a3f6221-3aaa-4e17-9115-5a2f929fa76a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f1c776ec-f299-4f9c-a3ca-e6a1f43dc525, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5d2c57ba-08cd-4eb0-8e51-41a9f74d7f9a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1490014548<open>)] for JPA transaction
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 67ebeb77-e15c-4356-a6ab-fd988b677b60, using strategy: org.hibernate.id.Assigned
2024-08-11 23:43:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1490014548<open>)]
2024-08-11 23:43:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:43:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:43:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:43:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345383963196791, askSource=HUOBI, bidQuantity=0.23045, symbol=ETHBTC, priceDate=2024-08-11T23:43:53.866189300, askQuantity=0.533854243876848, bidSource=BINANCE, priceId=67ebeb77-e15c-4356-a6ab-fd988b677b60, bidPrice=0.04345395540541976}
2024-08-11 23:43:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.96, askSource=HUOBI, bidQuantity=12.5666, symbol=ETHUSDT, priceDate=2024-08-11T23:43:53.866189300, askQuantity=0.6527, bidSource=BINANCE, priceId=0a3f6221-3aaa-4e17-9115-5a2f929fa76a, bidPrice=2618.0}
2024-08-11 23:43:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012864782276548, askSource=BINANCE, bidQuantity=0.02583330766120492, symbol=BTCETH, priceDate=2024-08-11T23:43:53.866189300, askQuantity=0.1346147048317877, bidSource=HUOBI, priceId=5d2c57ba-08cd-4eb0-8e51-41a9f74d7f9a, bidPrice=23.012926095127504}
2024-08-11 23:43:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.93, askSource=HUOBI, bidQuantity=0.23045, symbol=BTCUSDT, priceDate=2024-08-11T23:43:53.866189300, askQuantity=0.023198016700270038, bidSource=BINANCE, priceId=f1c776ec-f299-4f9c-a3ca-e6a1f43dc525, bidPrice=60247.67}
2024-08-11 23:43:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:43:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1490014548<open>)] after transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2fc000a2]
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60247.67, BidQty - 0.16421, Ask - 60247.68, askQuantity - 2.68317
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.81, BidQty - 4.188, Ask - 2617.82, askQuantity - 33.6174
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014443315430395, BidQty - 0.16421, Ask - 23.014535050290128, AskQty - 0.11658588775036649
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345080175701371, BidQty - 0.16421, Ask - 0.04345097495056656, AskQty - 33.6174
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.06, BidQty - 0.5, Ask - 2618.07, askQuantity - 0.1527
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60246.92, BidQty - 0.269828, Ask - 60246.93, askQuantity - 0.010195
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011959191312684, BidQty - 0.02172783272572274, Ask - 23.012050907924188, AskQty - 4.4302874353929734E-4
2024-08-11 23:44:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345549225495805, BidQty - 0.269828, Ask - 0.04345566545144549, AskQty - 0.1527
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9e92f53e-4866-421b-a3e3-7730786b7c4a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: dec11e3d-6818-43a4-9319-aae43acadab1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b6483304-2015-456d-9e0a-c025183327c6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1617491855<open>)] for JPA transaction
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ba278276-f841-4f51-b7e2-4c358ca7a183, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1617491855<open>)]
2024-08-11 23:44:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345097495056656, askSource=BINANCE, bidQuantity=0.269828, symbol=ETHBTC, priceDate=2024-08-11T23:44:03.755517500, askQuantity=33.6174, bidSource=HUOBI, priceId=ba278276-f841-4f51-b7e2-4c358ca7a183, bidPrice=0.04345549225495805}
2024-08-11 23:44:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012050907924188, askSource=HUOBI, bidQuantity=0.16421, symbol=BTCETH, priceDate=2024-08-11T23:44:03.755517500, askQuantity=4.4302874353929734E-4, bidSource=BINANCE, priceId=b6483304-2015-456d-9e0a-c025183327c6, bidPrice=23.014443315430395}
2024-08-11 23:44:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.82, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:44:03.755517500, askQuantity=33.6174, bidSource=HUOBI, priceId=9e92f53e-4866-421b-a3e3-7730786b7c4a, bidPrice=2618.06}
2024-08-11 23:44:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.93, askSource=HUOBI, bidQuantity=0.16421, symbol=BTCUSDT, priceDate=2024-08-11T23:44:03.755517500, askQuantity=0.010195, bidSource=BINANCE, priceId=dec11e3d-6818-43a4-9319-aae43acadab1, bidPrice=60247.67}
2024-08-11 23:44:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1617491855<open>)] after transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5c2a3866]
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60258.62, BidQty - 2.81805, Ask - 60258.63, askQuantity - 2.11795
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.24, BidQty - 11.5687, Ask - 2618.25, askQuantity - 13.9817
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01484579394634, BidQty - 0.5026625033065808, Ask - 23.01493751527744, AskQty - 0.09202501630056972
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345004192760439, BidQty - 2.81805, Ask - 0.04345021508955897, AskQty - 13.9817
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.66, BidQty - 0.5, Ask - 2617.9, askQuantity - 0.1052
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60246.92, BidQty - 0.392531, Ask - 60246.93, askQuantity - 0.099591
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01345353145651, BidQty - 0.021726421865217345, Ask - 23.015567338768214, AskQty - 0.00432711471040931
2024-08-11 23:44:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344885291250525, BidQty - 0.392531, Ask - 0.04345284373043469, AskQty - 0.1052
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: daa67945-a1ec-4f8a-b8e0-1124c9017df6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 234c4175-2a38-4d27-85a4-f7e690d17d35, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: da1cbe86-f401-496d-b024-6d8da0cde998, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(651766075<open>)] for JPA transaction
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 69d4ad1e-dfd6-4233-9290-f2ce7560eede, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(651766075<open>)]
2024-08-11 23:44:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.93, askSource=HUOBI, bidQuantity=2.81805, symbol=BTCUSDT, priceDate=2024-08-11T23:44:13.878880900, askQuantity=0.099591, bidSource=BINANCE, priceId=234c4175-2a38-4d27-85a4-f7e690d17d35, bidPrice=60258.62}
2024-08-11 23:44:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.9, askSource=HUOBI, bidQuantity=11.5687, symbol=ETHUSDT, priceDate=2024-08-11T23:44:13.878880900, askQuantity=0.1052, bidSource=BINANCE, priceId=daa67945-a1ec-4f8a-b8e0-1124c9017df6, bidPrice=2618.24}
2024-08-11 23:44:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345021508955897, askSource=BINANCE, bidQuantity=2.81805, symbol=ETHBTC, priceDate=2024-08-11T23:44:13.878880900, askQuantity=13.9817, bidSource=BINANCE, priceId=69d4ad1e-dfd6-4233-9290-f2ce7560eede, bidPrice=0.04345004192760439}
2024-08-11 23:44:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01493751527744, askSource=BINANCE, bidQuantity=0.5026625033065808, symbol=BTCETH, priceDate=2024-08-11T23:44:13.878880900, askQuantity=0.09202501630056972, bidSource=BINANCE, priceId=da1cbe86-f401-496d-b024-6d8da0cde998, bidPrice=23.01484579394634}
2024-08-11 23:44:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(651766075<open>)] after transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@44c71a1f]
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60264.88, BidQty - 4.58699, Ask - 60264.89, askQuantity - 0.1801
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.39, BidQty - 24.2311, Ask - 2618.4, askQuantity - 7.8046
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015918117934614, BidQty - 1.0527974541723142, Ask - 23.016009838106623, AskQty - 0.00782498796562974
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043448017577066844, BidQty - 4.58699, Ask - 0.04344819072069836, AskQty - 4.145166853040024
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.49, BidQty - 0.0988, Ask - 2618.5, askQuantity - 1.6609
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60261.98, BidQty - 0.049782, Ask - 60261.99, askQuantity - 8.19753878025E-6
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013931640252054, BidQty - 0.0042930517716145405, Ask - 23.014023349334924, AskQty - 3.56197552067179E-7
2024-08-11 23:44:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345176785565827, BidQty - 0.049782, Ask - 0.04345194100824434, AskQty - 1.8865759710698867E-4
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 77f782fc-8f72-4572-b3b6-0a1063e8ce3c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 556169a6-f0eb-45a8-b6f0-29bae47b0a43, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 721c5aba-22ec-4c87-808d-f662a59cd678, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1782498512<open>)] for JPA transaction
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 550e65c6-0d80-4365-a2dc-d2d08d874e1c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1782498512<open>)]
2024-08-11 23:44:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60261.99, askSource=HUOBI, bidQuantity=4.58699, symbol=BTCUSDT, priceDate=2024-08-11T23:44:23.768192500, askQuantity=8.19753878025E-6, bidSource=BINANCE, priceId=556169a6-f0eb-45a8-b6f0-29bae47b0a43, bidPrice=60264.88}
2024-08-11 23:44:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.014023349334924, askSource=HUOBI, bidQuantity=1.0527974541723142, symbol=BTCETH, priceDate=2024-08-11T23:44:23.768192500, askQuantity=3.56197552067179E-7, bidSource=BINANCE, priceId=721c5aba-22ec-4c87-808d-f662a59cd678, bidPrice=23.015918117934614}
2024-08-11 23:44:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.4, askSource=BINANCE, bidQuantity=0.0988, symbol=ETHUSDT, priceDate=2024-08-11T23:44:23.768192500, askQuantity=7.8046, bidSource=HUOBI, priceId=77f782fc-8f72-4572-b3b6-0a1063e8ce3c, bidPrice=2618.49}
2024-08-11 23:44:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344819072069836, askSource=BINANCE, bidQuantity=0.049782, symbol=ETHBTC, priceDate=2024-08-11T23:44:23.768192500, askQuantity=4.145166853040024, bidSource=HUOBI, priceId=550e65c6-0d80-4365-a2dc-d2d08d874e1c, bidPrice=0.04345176785565827}
2024-08-11 23:44:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1782498512<open>)] after transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@54e202c1]
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60276.7, BidQty - 0.24136, Ask - 60276.71, askQuantity - 4.07788
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.39, BidQty - 8.5501, Ask - 2619.4, askQuantity - 23.4131
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011643887913262, BidQty - 0.24136, Ask - 23.011735556751763, AskQty - 0.17720871117882847
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345608776590494, BidQty - 0.24136, Ask - 0.043456260876922594, AskQty - 23.4131
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.74, BidQty - 1.02, Ask - 2618.75, askQuantity - 1.1527
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60261.06, BidQty - 0.404152, Ask - 60261.07, askQuantity - 0.087177
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.011383293556086, BidQty - 0.044325888061046384, Ask - 23.011474984152684, AskQty - 0.003788414261147371
2024-08-11 23:44:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345657984499777, BidQty - 0.404152, Ask - 0.043456753001025875, AskQty - 1.1527
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4e5cbc73-9eb9-4391-ac3f-369175da48d8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c8c14756-eff5-4fb8-a842-f4f039591fca, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9984fa8d-6c71-43a8-b4b3-60b6db4f01ef, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1929638587<open>)] for JPA transaction
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 01c6fdc3-83a6-4799-8cc5-e5d8946ac5eb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1929638587<open>)]
2024-08-11 23:44:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043456260876922594, askSource=BINANCE, bidQuantity=0.404152, symbol=ETHBTC, priceDate=2024-08-11T23:44:33.838827, askQuantity=23.4131, bidSource=HUOBI, priceId=01c6fdc3-83a6-4799-8cc5-e5d8946ac5eb, bidPrice=0.04345657984499777}
2024-08-11 23:44:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.75, askSource=HUOBI, bidQuantity=8.5501, symbol=ETHUSDT, priceDate=2024-08-11T23:44:33.838827, askQuantity=1.1527, bidSource=BINANCE, priceId=4e5cbc73-9eb9-4391-ac3f-369175da48d8, bidPrice=2619.39}
2024-08-11 23:44:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.011474984152684, askSource=HUOBI, bidQuantity=0.24136, symbol=BTCETH, priceDate=2024-08-11T23:44:33.838827, askQuantity=0.003788414261147371, bidSource=BINANCE, priceId=9984fa8d-6c71-43a8-b4b3-60b6db4f01ef, bidPrice=23.011643887913262}
2024-08-11 23:44:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60261.07, askSource=HUOBI, bidQuantity=0.24136, symbol=BTCUSDT, priceDate=2024-08-11T23:44:33.838827, askQuantity=0.087177, bidSource=BINANCE, priceId=c8c14756-eff5-4fb8-a842-f4f039591fca, bidPrice=60276.7}
2024-08-11 23:44:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1929638587<open>)] after transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3a9460a7]
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60274.0, BidQty - 0.23776, Ask - 60274.01, askQuantity - 3.94738
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.92, BidQty - 13.7596, Ask - 2618.93, askQuantity - 12.3825
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014742662079552, BidQty - 0.23776, Ask - 23.014834359201505, AskQty - 0.17151459525589882
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345023667746679, BidQty - 0.23776, Ask - 0.04345040979526827, AskQty - 12.3825
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.73, BidQty - 0.0609, Ask - 2619.74, askQuantity - 0.18938714414407537
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60278.39, BidQty - 0.093958, Ask - 60278.4, askQuantity - 0.006784
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.009302449861437, BidQty - 0.00264675559516437, Ask - 23.009394097865048, AskQty - 2.9483609916653396E-4
2024-08-11 23:44:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346050990072729, BidQty - 0.093958, Ask - 0.043460683007625116, AskQty - 0.15609510781986
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: be637c2f-57d8-45ec-a180-bd5f4b21ce01, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 78332876-f54e-4de4-b206-2e32b6f7d1c8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ed3b99d7-8e67-4403-ab71-61b32a3924a6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1353566618<open>)] for JPA transaction
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bf5a3af9-d869-4a93-8a7b-0cc4b55e1c5a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1353566618<open>)]
2024-08-11 23:44:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345040979526827, askSource=BINANCE, bidQuantity=0.093958, symbol=ETHBTC, priceDate=2024-08-11T23:44:43.734516300, askQuantity=12.3825, bidSource=HUOBI, priceId=bf5a3af9-d869-4a93-8a7b-0cc4b55e1c5a, bidPrice=0.04346050990072729}
2024-08-11 23:44:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.93, askSource=BINANCE, bidQuantity=0.0609, symbol=ETHUSDT, priceDate=2024-08-11T23:44:43.734516300, askQuantity=12.3825, bidSource=HUOBI, priceId=be637c2f-57d8-45ec-a180-bd5f4b21ce01, bidPrice=2619.73}
2024-08-11 23:44:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.009394097865048, askSource=HUOBI, bidQuantity=0.23776, symbol=BTCETH, priceDate=2024-08-11T23:44:43.734516300, askQuantity=2.9483609916653396E-4, bidSource=BINANCE, priceId=ed3b99d7-8e67-4403-ab71-61b32a3924a6, bidPrice=23.014742662079552}
2024-08-11 23:44:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60274.01, askSource=BINANCE, bidQuantity=0.093958, symbol=BTCUSDT, priceDate=2024-08-11T23:44:43.734516300, askQuantity=3.94738, bidSource=HUOBI, priceId=78332876-f54e-4de4-b206-2e32b6f7d1c8, bidPrice=60278.39}
2024-08-11 23:44:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1353566618<open>)] after transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:44:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@35b78454]
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:44:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60272.01, BidQty - 3.61123, Ask - 60272.02, askQuantity - 0.23315
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.92, BidQty - 27.9853, Ask - 2618.93, askQuantity - 5.2667
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01398280977346, BidQty - 1.2160129009966647, Ask - 23.01407450399401, AskQty - 0.010130757157301183
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345167127300529, BidQty - 3.61123, Ask - 0.043451844396760614, AskQty - 5.2667
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:44:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.06, BidQty - 0.1045, Ask - 2619.07, askQuantity - 3.4788
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60270.89, BidQty - 0.033183, Ask - 60270.9, askQuantity - 0.033726082451066765
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012324985586485, BidQty - 0.0045410448559827146, Ask - 23.01241666857575, AskQty - 0.0014655602206751668
2024-08-11 23:44:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345480157090735, BidQty - 0.033183, Ask - 0.04345497469839918, AskQty - 0.7761155698546336
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bb1c052e-ba85-4eb8-83ff-11228a2cb90d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5b8df09c-6435-4305-9fe2-81e347be9e79, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0dc53968-8f2b-407a-868a-6d6d9c4e1de4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(886988630<open>)] for JPA transaction
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ae55b042-1107-4d28-9963-38521d8309a9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:44:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(886988630<open>)]
2024-08-11 23:44:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:44:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:44:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:44:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.93, askSource=BINANCE, bidQuantity=0.1045, symbol=ETHUSDT, priceDate=2024-08-11T23:44:53.833712700, askQuantity=5.2667, bidSource=HUOBI, priceId=bb1c052e-ba85-4eb8-83ff-11228a2cb90d, bidPrice=2619.06}
2024-08-11 23:44:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60270.9, askSource=HUOBI, bidQuantity=3.61123, symbol=BTCUSDT, priceDate=2024-08-11T23:44:53.833712700, askQuantity=0.033726082451066765, bidSource=BINANCE, priceId=5b8df09c-6435-4305-9fe2-81e347be9e79, bidPrice=60272.01}
2024-08-11 23:44:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043451844396760614, askSource=BINANCE, bidQuantity=0.033183, symbol=ETHBTC, priceDate=2024-08-11T23:44:53.833712700, askQuantity=5.2667, bidSource=HUOBI, priceId=ae55b042-1107-4d28-9963-38521d8309a9, bidPrice=0.04345480157090735}
2024-08-11 23:44:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01241666857575, askSource=HUOBI, bidQuantity=1.2160129009966647, symbol=BTCETH, priceDate=2024-08-11T23:44:53.833712700, askQuantity=0.0014655602206751668, bidSource=BINANCE, priceId=0dc53968-8f2b-407a-868a-6d6d9c4e1de4, bidPrice=23.01398280977346}
2024-08-11 23:44:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:44:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(886988630<open>)] after transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@34bbf73f]
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60267.99, BidQty - 1.47468, Ask - 60268.0, askQuantity - 3.40958
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.84, BidQty - 5.036, Ask - 2618.85, askQuantity - 28.1334
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013150810470243, BidQty - 0.21883139955389252, Ask - 23.013242504314885, AskQty - 0.14815730548881664
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345324218490742, BidQty - 1.47468, Ask - 0.04345341532047112, AskQty - 28.1334
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.71, BidQty - 0.9588, Ask - 2618.72, askQuantity - 2.905509027311053
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60266.03, BidQty - 0.156028, Ask - 60266.04, askQuantity - 0.221402
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01354478523859, BidQty - 0.04166242136739387, Ask - 23.01363648513963, AskQty - 0.009620470026236998
2024-08-11 23:45:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345249828925212, BidQty - 0.156028, Ask - 0.043452671430323185, AskQty - 2.905509027311053
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0ea13c6c-42f4-4eb1-921c-0a857678bd85, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9529259b-5277-4a25-a29e-f3548cd1918f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0a24f699-1a57-4ea1-b448-871d5b53d1d3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1560515592<open>)] for JPA transaction
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d76884cd-7ee6-4b63-861a-379d4aaa2c64, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1560515592<open>)]
2024-08-11 23:45:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.013242504314885, askSource=BINANCE, bidQuantity=0.04166242136739387, symbol=BTCETH, priceDate=2024-08-11T23:45:03.769322100, askQuantity=0.14815730548881664, bidSource=HUOBI, priceId=0a24f699-1a57-4ea1-b448-871d5b53d1d3, bidPrice=23.01354478523859}
2024-08-11 23:45:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.72, askSource=HUOBI, bidQuantity=5.036, symbol=ETHUSDT, priceDate=2024-08-11T23:45:03.769322100, askQuantity=2.905509027311053, bidSource=BINANCE, priceId=0ea13c6c-42f4-4eb1-921c-0a857678bd85, bidPrice=2618.84}
2024-08-11 23:45:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60266.04, askSource=HUOBI, bidQuantity=1.47468, symbol=BTCUSDT, priceDate=2024-08-11T23:45:03.769322100, askQuantity=0.221402, bidSource=BINANCE, priceId=9529259b-5277-4a25-a29e-f3548cd1918f, bidPrice=60267.99}
2024-08-11 23:45:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043452671430323185, askSource=HUOBI, bidQuantity=1.47468, symbol=ETHBTC, priceDate=2024-08-11T23:45:03.769322100, askQuantity=2.905509027311053, bidSource=BINANCE, priceId=d76884cd-7ee6-4b63-861a-379d4aaa2c64, bidPrice=0.04345324218490742}
2024-08-11 23:45:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1560515592<open>)] after transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2702d986]
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60256.53, BidQty - 2.77824, Ask - 60256.54, askQuantity - 0.35258
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.39, BidQty - 34.2973, Ask - 2618.4, askQuantity - 5.7547
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012729147571033, BidQty - 1.4903621287186635, Ask - 23.012820855563916, AskQty - 0.015321024841452894
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345403835002806, BidQty - 2.77824, Ask - 0.043454211518652, AskQty - 5.7547
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.25, BidQty - 0.0965, Ask - 2618.39, askQuantity - 0.3986
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60260.36, BidQty - 0.049782, Ask - 60260.37, askQuantity - 0.177848
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014279767337946, BidQty - 0.0041930488798938475, Ask - 23.01551417931825, AskQty - 0.007727309440682159
2024-08-11 23:45:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043448953267296565, BidQty - 0.049782, Ask - 0.043451283729469915, AskQty - 0.3986
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9d96dc40-f9dd-4f77-958a-3b5c9fff3df4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0878ab61-8dd3-469d-ad00-def5f6c983ef, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4513faa5-40d6-43f2-ab7e-e3852e73511a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(845757348<open>)] for JPA transaction
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a05799ac-0045-4f65-94e4-407e03495fed, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(845757348<open>)]
2024-08-11 23:45:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012820855563916, askSource=BINANCE, bidQuantity=0.0041930488798938475, symbol=BTCETH, priceDate=2024-08-11T23:45:13.778725300, askQuantity=0.015321024841452894, bidSource=HUOBI, priceId=4513faa5-40d6-43f2-ab7e-e3852e73511a, bidPrice=23.014279767337946}
2024-08-11 23:45:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60256.54, askSource=BINANCE, bidQuantity=0.049782, symbol=BTCUSDT, priceDate=2024-08-11T23:45:13.778725300, askQuantity=0.35258, bidSource=HUOBI, priceId=0878ab61-8dd3-469d-ad00-def5f6c983ef, bidPrice=60260.36}
2024-08-11 23:45:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043451283729469915, askSource=HUOBI, bidQuantity=2.77824, symbol=ETHBTC, priceDate=2024-08-11T23:45:13.778725300, askQuantity=0.3986, bidSource=BINANCE, priceId=a05799ac-0045-4f65-94e4-407e03495fed, bidPrice=0.04345403835002806}
2024-08-11 23:45:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.39, askSource=HUOBI, bidQuantity=34.2973, symbol=ETHUSDT, priceDate=2024-08-11T23:45:13.778725300, askQuantity=0.3986, bidSource=BINANCE, priceId=9d96dc40-f9dd-4f77-958a-3b5c9fff3df4, bidPrice=2618.39}
2024-08-11 23:45:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(845757348<open>)] after transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@149cc139]
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60252.05, BidQty - 0.25646, Ask - 60252.06, askQuantity - 5.35012
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.61, BidQty - 0.2133, Ask - 2618.62, askQuantity - 50.2101
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00908493786804, BidQty - 0.009270251319249717, Ask - 23.009176624239576, AskQty - 0.23252114090704953
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043460920672255855, BidQty - 0.25646, Ask - 0.04346109385489788, AskQty - 50.2101
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.52, BidQty - 0.5, Ask - 2618.84, askQuantity - 0.0099
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60261.32, BidQty - 0.124445, Ask - 60261.33, askQuantity - 0.033188
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010691756655618, BidQty - 0.021729029500183534, Ask - 23.013507630264424, AskQty - 0.0014421095876908127
2024-08-11 23:45:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345274158403075, BidQty - 0.124445, Ask - 0.04345805900036707, AskQty - 0.0099
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 60fdf36d-862a-495b-9568-ec43a036e7e4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b7571074-8209-464f-a72d-691f11aede92, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9801ee24-09dd-4bec-b4e3-2e8d95fe5ab2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1190538569<open>)] for JPA transaction
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 81446ff0-3325-41b2-a303-aa67ee915db2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1190538569<open>)]
2024-08-11 23:45:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.62, askSource=BINANCE, bidQuantity=0.2133, symbol=ETHUSDT, priceDate=2024-08-11T23:45:23.749170500, askQuantity=50.2101, bidSource=BINANCE, priceId=60fdf36d-862a-495b-9568-ec43a036e7e4, bidPrice=2618.61}
2024-08-11 23:45:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.009176624239576, askSource=BINANCE, bidQuantity=0.021729029500183534, symbol=BTCETH, priceDate=2024-08-11T23:45:23.749170500, askQuantity=0.23252114090704953, bidSource=HUOBI, priceId=9801ee24-09dd-4bec-b4e3-2e8d95fe5ab2, bidPrice=23.010691756655618}
2024-08-11 23:45:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345805900036707, askSource=HUOBI, bidQuantity=0.25646, symbol=ETHBTC, priceDate=2024-08-11T23:45:23.749170500, askQuantity=0.0099, bidSource=BINANCE, priceId=81446ff0-3325-41b2-a303-aa67ee915db2, bidPrice=0.043460920672255855}
2024-08-11 23:45:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60252.06, askSource=BINANCE, bidQuantity=0.124445, symbol=BTCUSDT, priceDate=2024-08-11T23:45:23.749170500, askQuantity=5.35012, bidSource=HUOBI, priceId=b7571074-8209-464f-a72d-691f11aede92, bidPrice=60261.32}
2024-08-11 23:45:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1190538569<open>)] after transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7108b990]
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60239.16, BidQty - 1.54413, Ask - 60239.17, askQuantity - 5.63202
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.07, BidQty - 3.5677, Ask - 2618.08, askQuantity - 43.0088
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00890729083909, BidQty - 0.15505734170263993, Ask - 23.008998995443207, AskQty - 0.24477466408318707
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043461256189286805, BidQty - 1.54413, Ask - 0.04346142940904222, AskQty - 43.0088
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.47, BidQty - 0.5, Ask - 2618.53, askQuantity - 0.0094
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60253.98, BidQty - 0.006966, Ask - 60253.99, askQuantity - 0.179265
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01061282475282, BidQty - 0.006966, Ask - 23.011143912284655, AskQty - 0.0077903558677193
2024-08-11 23:45:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345720507471787, BidQty - 0.006966, Ask - 0.04345820807189832, AskQty - 0.0094
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 731e7133-5758-4cdd-9fac-3758e5367326, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4d92ec91-d2a4-4bff-aba3-acb84ca07dc8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ecc9d412-50dc-4880-80d4-c3e6de5e1906, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(905959429<open>)] for JPA transaction
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 18b6485b-93c8-4064-80bb-ffc86940e8b6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(905959429<open>)]
2024-08-11 23:45:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.008998995443207, askSource=BINANCE, bidQuantity=0.006966, symbol=BTCETH, priceDate=2024-08-11T23:45:33.849007100, askQuantity=0.24477466408318707, bidSource=HUOBI, priceId=ecc9d412-50dc-4880-80d4-c3e6de5e1906, bidPrice=23.01061282475282}
2024-08-11 23:45:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60239.17, askSource=BINANCE, bidQuantity=0.006966, symbol=BTCUSDT, priceDate=2024-08-11T23:45:33.849007100, askQuantity=5.63202, bidSource=HUOBI, priceId=4d92ec91-d2a4-4bff-aba3-acb84ca07dc8, bidPrice=60253.98}
2024-08-11 23:45:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345820807189832, askSource=HUOBI, bidQuantity=1.54413, symbol=ETHBTC, priceDate=2024-08-11T23:45:33.849007100, askQuantity=0.0094, bidSource=BINANCE, priceId=18b6485b-93c8-4064-80bb-ffc86940e8b6, bidPrice=0.043461256189286805}
2024-08-11 23:45:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.08, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:45:33.849007100, askQuantity=43.0088, bidSource=HUOBI, priceId=731e7133-5758-4cdd-9fac-3758e5367326, bidPrice=2618.47}
2024-08-11 23:45:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(905959429<open>)] after transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6a35051b]
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60245.99, BidQty - 1.3717, Ask - 60246.0, askQuantity - 3.71774
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.8, BidQty - 4.6765, Ask - 2617.81, askQuantity - 25.0065
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013889472498004, BidQty - 0.20320337444865624, Ask - 23.01398120559248, AskQty - 0.1615426712478837
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043451847425555225, BidQty - 1.3717, Ask - 0.04345202062411125, AskQty - 25.0065
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.93, BidQty - 2.8534, Ask - 2617.94, askQuantity - 0.1527
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60241.62, BidQty - 0.145599, Ask - 60241.63, askQuantity - 0.0332
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01107741201097, BidQty - 0.12400114731310348, Ask - 23.011169129808668, AskQty - 0.0014427776273649964
2024-08-11 23:45:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345715745075291, BidQty - 0.145599, Ask - 0.04345733066275442, AskQty - 0.1527
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4bb11382-1368-41fe-b280-35624c32709f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 30c53ee4-06ae-45b2-8d6f-221b38c72341, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 32bd5bb6-f402-4e24-9cd9-08b467dc801d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(878336570<open>)] for JPA transaction
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9fbb8624-fccd-4613-bcf9-76d8baa1cad2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(878336570<open>)]
2024-08-11 23:45:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.81, askSource=BINANCE, bidQuantity=2.8534, symbol=ETHUSDT, priceDate=2024-08-11T23:45:43.814440700, askQuantity=25.0065, bidSource=HUOBI, priceId=4bb11382-1368-41fe-b280-35624c32709f, bidPrice=2617.93}
2024-08-11 23:45:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345202062411125, askSource=BINANCE, bidQuantity=0.145599, symbol=ETHBTC, priceDate=2024-08-11T23:45:43.814440700, askQuantity=25.0065, bidSource=HUOBI, priceId=9fbb8624-fccd-4613-bcf9-76d8baa1cad2, bidPrice=0.04345715745075291}
2024-08-11 23:45:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60241.63, askSource=HUOBI, bidQuantity=1.3717, symbol=BTCUSDT, priceDate=2024-08-11T23:45:43.814440700, askQuantity=0.0332, bidSource=BINANCE, priceId=30c53ee4-06ae-45b2-8d6f-221b38c72341, bidPrice=60245.99}
2024-08-11 23:45:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.011169129808668, askSource=HUOBI, bidQuantity=0.20320337444865624, symbol=BTCETH, priceDate=2024-08-11T23:45:43.814440700, askQuantity=0.0014427776273649964, bidSource=BINANCE, priceId=32bd5bb6-f402-4e24-9cd9-08b467dc801d, bidPrice=23.013889472498004}
2024-08-11 23:45:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(878336570<open>)] after transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:45:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@764e7142]
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:45:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60245.99, BidQty - 1.6119, Ask - 60246.0, askQuantity - 1.36014
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.13, BidQty - 40.6394, Ask - 2618.14, askQuantity - 3.766
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0109887171809, BidQty - 1.6119, Ask - 23.011080427633463, AskQty - 0.05910804598147595
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345732496763271, BidQty - 1.6119, Ask - 0.04345749816709792, AskQty - 3.766
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:45:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.27, BidQty - 1.0, Ask - 2618.28, askQuantity - 0.1527
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60253.41, BidQty - 0.009284, Ask - 60253.42, askQuantity - 0.472792
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01259223612448, BidQty - 0.009284, Ask - 23.01268394779759, AskQty - 0.020544843924875968
2024-08-11 23:45:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345429686812798, BidQty - 0.009284, Ask - 0.04345447004576172, AskQty - 0.1527
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 25f38df9-6f33-447d-9419-209b739472c2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0a8a83f4-319d-42ee-a3ff-04ba9c1d68b9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 340b917d-fdd0-4e48-a5ba-56d7efd57503, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1076081906<open>)] for JPA transaction
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 17176d63-1512-4c18-8fca-923dd57ade28, using strategy: org.hibernate.id.Assigned
2024-08-11 23:45:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1076081906<open>)]
2024-08-11 23:45:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:45:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:45:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:45:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.14, askSource=BINANCE, bidQuantity=1.0, symbol=ETHUSDT, priceDate=2024-08-11T23:45:53.756420400, askQuantity=3.766, bidSource=HUOBI, priceId=25f38df9-6f33-447d-9419-209b739472c2, bidPrice=2618.27}
2024-08-11 23:45:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.0, askSource=BINANCE, bidQuantity=0.009284, symbol=BTCUSDT, priceDate=2024-08-11T23:45:53.756420400, askQuantity=1.36014, bidSource=HUOBI, priceId=0a8a83f4-319d-42ee-a3ff-04ba9c1d68b9, bidPrice=60253.41}
2024-08-11 23:45:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.011080427633463, askSource=BINANCE, bidQuantity=0.009284, symbol=BTCETH, priceDate=2024-08-11T23:45:53.756420400, askQuantity=0.05910804598147595, bidSource=HUOBI, priceId=340b917d-fdd0-4e48-a5ba-56d7efd57503, bidPrice=23.01259223612448}
2024-08-11 23:45:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345447004576172, askSource=HUOBI, bidQuantity=1.6119, symbol=ETHBTC, priceDate=2024-08-11T23:45:53.756420400, askQuantity=0.1527, bidSource=BINANCE, priceId=17176d63-1512-4c18-8fca-923dd57ade28, bidPrice=0.04345732496763271}
2024-08-11 23:45:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:45:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1076081906<open>)] after transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7a519e49]
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60245.99, BidQty - 1.79051, Ask - 60246.0, askQuantity - 0.53495
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.59, BidQty - 32.428, Ask - 2618.6, askQuantity - 3.6783
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.006946459940426, BidQty - 1.4094873501124305, Ask - 23.007038138845715, AskQty - 0.023251580528167847
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043464960329316474, BidQty - 1.79051, Ask - 0.043465133530049056, AskQty - 3.6783
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.4, BidQty - 1.0981, Ask - 2618.41, askQuantity - 3.1527
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60248.95, BidQty - 0.164161, Ask - 60248.96, askQuantity - 0.270395
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00974637279876, BidQty - 0.04772325527664798, Ask - 23.0098380690498, AskQty - 0.0117512778311858
2024-08-11 23:46:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345967133706541, BidQty - 0.164161, Ask - 0.04345984452841087, AskQty - 3.1527
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: fd0edb86-bff8-45c6-b953-47bfa1d6ea7c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3449b818-a164-43d7-b20d-2ffa9b3dc463, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2397e6e0-43c8-4472-95a9-6b44bc807506, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1063438778<open>)] for JPA transaction
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6868e001-6d65-4498-b44f-b3a830140d9f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1063438778<open>)]
2024-08-11 23:46:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.0, askSource=BINANCE, bidQuantity=0.164161, symbol=BTCUSDT, priceDate=2024-08-11T23:46:03.775269500, askQuantity=0.53495, bidSource=HUOBI, priceId=3449b818-a164-43d7-b20d-2ffa9b3dc463, bidPrice=60248.95}
2024-08-11 23:46:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.007038138845715, askSource=BINANCE, bidQuantity=0.04772325527664798, symbol=BTCETH, priceDate=2024-08-11T23:46:03.775269500, askQuantity=0.023251580528167847, bidSource=HUOBI, priceId=2397e6e0-43c8-4472-95a9-6b44bc807506, bidPrice=23.00974637279876}
2024-08-11 23:46:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.41, askSource=HUOBI, bidQuantity=32.428, symbol=ETHUSDT, priceDate=2024-08-11T23:46:03.775269500, askQuantity=3.1527, bidSource=BINANCE, priceId=fd0edb86-bff8-45c6-b953-47bfa1d6ea7c, bidPrice=2618.59}
2024-08-11 23:46:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345984452841087, askSource=HUOBI, bidQuantity=1.79051, symbol=ETHBTC, priceDate=2024-08-11T23:46:03.775269500, askQuantity=3.1527, bidSource=BINANCE, priceId=6868e001-6d65-4498-b44f-b3a830140d9f, bidPrice=0.043464960329316474}
2024-08-11 23:46:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1063438778<open>)] after transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@27ceaa09]
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60258.0, BidQty - 0.23541, Ask - 60258.01, askQuantity - 5.90727
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.0, BidQty - 4.0258, Ask - 2619.01, askQuantity - 30.1765
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007930477546857, BidQty - 0.17497445082810584, Ask - 23.008022145857197, AskQty - 0.2567482751255808
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346310142004357, BidQty - 0.23541, Ask - 0.0434632745859471, AskQty - 30.1765
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.66, BidQty - 1.3406, Ask - 2618.67, askQuantity - 0.6617
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60249.41, BidQty - 0.104778, Ask - 60249.42, askQuantity - 0.23299931359372422
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00763746481993, BidQty - 0.05826760796495766, Ask - 23.0077291439133, AskQty - 0.010127001762595256
2024-08-11 23:46:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346365491983159, BidQty - 0.104778, Ask - 0.04346382811051593, AskQty - 0.6617
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 83860ab2-a453-4d9a-8f42-98162249a83e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 212ceb8d-72a2-47aa-bf32-d933bd1cb65d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2bac87fd-acb1-4e18-8b30-2b52923e0994, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1595311541<open>)] for JPA transaction
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: aad762fe-3072-4104-9c40-123e96475307, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1595311541<open>)]
2024-08-11 23:46:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.0077291439133, askSource=HUOBI, bidQuantity=0.17497445082810584, symbol=BTCETH, priceDate=2024-08-11T23:46:13.734044100, askQuantity=0.010127001762595256, bidSource=BINANCE, priceId=2bac87fd-acb1-4e18-8b30-2b52923e0994, bidPrice=23.007930477546857}
2024-08-11 23:46:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60249.42, askSource=HUOBI, bidQuantity=0.23541, symbol=BTCUSDT, priceDate=2024-08-11T23:46:13.734044100, askQuantity=0.23299931359372422, bidSource=BINANCE, priceId=212ceb8d-72a2-47aa-bf32-d933bd1cb65d, bidPrice=60258.0}
2024-08-11 23:46:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.67, askSource=HUOBI, bidQuantity=4.0258, symbol=ETHUSDT, priceDate=2024-08-11T23:46:13.734044100, askQuantity=0.6617, bidSource=BINANCE, priceId=83860ab2-a453-4d9a-8f42-98162249a83e, bidPrice=2619.0}
2024-08-11 23:46:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434632745859471, askSource=BINANCE, bidQuantity=0.104778, symbol=ETHBTC, priceDate=2024-08-11T23:46:13.734044100, askQuantity=30.1765, bidSource=HUOBI, priceId=aad762fe-3072-4104-9c40-123e96475307, bidPrice=0.04346365491983159}
2024-08-11 23:46:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1595311541<open>)] after transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@27621b9a]
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60246.0, BidQty - 0.11389, Ask - 60246.01, askQuantity - 4.98371
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.6, BidQty - 0.4295, Ask - 2618.61, askQuantity - 75.7216
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.006862419375164, BidQty - 0.018668343043521562, Ask - 23.006954097609412, AskQty - 0.2166175487140144
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043465119100833394, BidQty - 0.11389, Ask - 0.04346529230156359, AskQty - 75.7216
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.55, BidQty - 0.5, Ask - 2618.65, askQuantity - 0.3063
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60253.99, BidQty - 0.12869, Ask - 60254.0, askQuantity - 0.25336
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00956217898535, BidQty - 0.021730096214375185, Ask - 23.010444711767963, AskQty - 0.011010652039698608
2024-08-11 23:46:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043458525575065556, BidQty - 0.12869, Ask - 0.04346019242875036, AskQty - 0.3063
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8f26c94a-e809-48b4-bb4c-dd91344cb006, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3d0ea4ef-a2a5-4dcf-87ab-5b7b58791c55, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4b0bb157-4f32-4f8e-a97d-f4a8c1712765, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(877252523<open>)] for JPA transaction
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e6bd0d41-81d9-471b-ae3c-33f790020ffd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(877252523<open>)]
2024-08-11 23:46:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346019242875036, askSource=HUOBI, bidQuantity=0.11389, symbol=ETHBTC, priceDate=2024-08-11T23:46:23.921957900, askQuantity=0.3063, bidSource=BINANCE, priceId=e6bd0d41-81d9-471b-ae3c-33f790020ffd, bidPrice=0.043465119100833394}
2024-08-11 23:46:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60246.01, askSource=BINANCE, bidQuantity=0.12869, symbol=BTCUSDT, priceDate=2024-08-11T23:46:23.921957900, askQuantity=4.98371, bidSource=HUOBI, priceId=3d0ea4ef-a2a5-4dcf-87ab-5b7b58791c55, bidPrice=60253.99}
2024-08-11 23:46:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.61, askSource=BINANCE, bidQuantity=0.4295, symbol=ETHUSDT, priceDate=2024-08-11T23:46:23.921957900, askQuantity=75.7216, bidSource=BINANCE, priceId=8f26c94a-e809-48b4-bb4c-dd91344cb006, bidPrice=2618.6}
2024-08-11 23:46:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.006954097609412, askSource=BINANCE, bidQuantity=0.021730096214375185, symbol=BTCETH, priceDate=2024-08-11T23:46:23.921957900, askQuantity=0.2166175487140144, bidSource=HUOBI, priceId=4b0bb157-4f32-4f8e-a97d-f4a8c1712765, bidPrice=23.00956217898535}
2024-08-11 23:46:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(877252523<open>)] after transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@63ef2d92]
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60243.18, BidQty - 1.6197, Ask - 60243.19, askQuantity - 1.4289
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.39, BidQty - 21.6875, Ask - 2618.4, askQuantity - 6.7091
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007630614115488, BidQty - 0.942622052819921, Ask - 23.007722302636356, AskQty - 0.06210523498174648
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043463667843618506, BidQty - 1.6197, Ask - 0.043463841052215374, AskQty - 6.7091
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.46, BidQty - 0.0118, Ask - 2618.47, askQuantity - 3.1497
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60242.45, BidQty - 0.48018, Ask - 60242.46, askQuantity - 0.059625
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.006736758488735, BidQty - 5.128932505235095E-4, Ask - 23.006828441144794, AskQty - 0.002591621880978964
2024-08-11 23:46:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434653564944061, BidQty - 0.2714805756055086, Ask - 0.043465529705382165, AskQty - 1.3717766792248909
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e897c74e-1960-44eb-b5f4-b9f0fb0f41cc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: efdd10bd-4144-4ab3-8199-f911bf4d6c31, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4e2a1e5b-3d1c-4b7f-a84a-b225011b6cdd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2038845715<open>)] for JPA transaction
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2a7a77a5-9b50-45b0-a78a-83b00578f54f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2038845715<open>)]
2024-08-11 23:46:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043463841052215374, askSource=BINANCE, bidQuantity=0.2714805756055086, symbol=ETHBTC, priceDate=2024-08-11T23:46:33.749454500, askQuantity=6.7091, bidSource=HUOBI, priceId=2a7a77a5-9b50-45b0-a78a-83b00578f54f, bidPrice=0.0434653564944061}
2024-08-11 23:46:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.4, askSource=BINANCE, bidQuantity=0.0118, symbol=ETHUSDT, priceDate=2024-08-11T23:46:33.749454500, askQuantity=6.7091, bidSource=HUOBI, priceId=e897c74e-1960-44eb-b5f4-b9f0fb0f41cc, bidPrice=2618.46}
2024-08-11 23:46:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60242.46, askSource=HUOBI, bidQuantity=1.6197, symbol=BTCUSDT, priceDate=2024-08-11T23:46:33.749454500, askQuantity=0.059625, bidSource=BINANCE, priceId=efdd10bd-4144-4ab3-8199-f911bf4d6c31, bidPrice=60243.18}
2024-08-11 23:46:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.006828441144794, askSource=HUOBI, bidQuantity=0.942622052819921, symbol=BTCETH, priceDate=2024-08-11T23:46:33.749454500, askQuantity=0.002591621880978964, bidSource=BINANCE, priceId=4e2a1e5b-3d1c-4b7f-a84a-b225011b6cdd, bidPrice=23.007630614115488}
2024-08-11 23:46:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2038845715<open>)] after transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7a85cefb]
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60227.88, BidQty - 0.31129, Ask - 60227.89, askQuantity - 3.01682
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.03, BidQty - 14.1125, Ask - 2618.04, askQuantity - 10.4898
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.004950268139524, BidQty - 0.31129, Ask - 23.00504195903026, AskQty - 0.13113733960462504
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043468731844997395, BidQty - 0.31129, Ask - 0.04346890509843614, AskQty - 10.4898
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.53, BidQty - 0.6528, Ask - 2617.54, askQuantity - 0.5
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60231.4, BidQty - 0.272174, Ask - 60231.41, askQuantity - 0.055119
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.010689425949558, BidQty - 0.02836942378892073, Ask - 23.01078115628092, AskQty - 0.002395355447763883
2024-08-11 23:46:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345789016063214, BidQty - 0.272174, Ask - 0.043458063402145725, AskQty - 0.5
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6c2b3e22-8416-466b-b7cd-5e6bc5535f3e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 68811b8d-9297-4441-bbc4-0a69b48263bb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 33ba8ac7-81e8-4ed8-9704-826bbb11d1c3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1037941957<open>)] for JPA transaction
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 05818ec1-5d9a-4eae-98c4-4e5920420375, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1037941957<open>)]
2024-08-11 23:46:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60227.89, askSource=BINANCE, bidQuantity=0.272174, symbol=BTCUSDT, priceDate=2024-08-11T23:46:43.719521400, askQuantity=3.01682, bidSource=HUOBI, priceId=68811b8d-9297-4441-bbc4-0a69b48263bb, bidPrice=60231.4}
2024-08-11 23:46:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00504195903026, askSource=BINANCE, bidQuantity=0.02836942378892073, symbol=BTCETH, priceDate=2024-08-11T23:46:43.719521400, askQuantity=0.13113733960462504, bidSource=HUOBI, priceId=33ba8ac7-81e8-4ed8-9704-826bbb11d1c3, bidPrice=23.010689425949558}
2024-08-11 23:46:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.54, askSource=HUOBI, bidQuantity=14.1125, symbol=ETHUSDT, priceDate=2024-08-11T23:46:43.719521400, askQuantity=0.5, bidSource=BINANCE, priceId=6c2b3e22-8416-466b-b7cd-5e6bc5535f3e, bidPrice=2618.03}
2024-08-11 23:46:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043458063402145725, askSource=HUOBI, bidQuantity=0.31129, symbol=ETHBTC, priceDate=2024-08-11T23:46:43.719521400, askQuantity=0.5, bidSource=BINANCE, priceId=05818ec1-5d9a-4eae-98c4-4e5920420375, bidPrice=0.043468731844997395}
2024-08-11 23:46:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1037941957<open>)] after transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:46:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@52f63fe3]
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:46:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60235.95, BidQty - 1.553, Ask - 60235.96, askQuantity - 2.22556
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.56, BidQty - 18.7333, Ask - 2618.57, askQuantity - 7.8634
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00337588836655, BidQty - 0.8143717726872408, Ask - 23.003467554686544, AskQty - 0.09674889208373205
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043471706933864755, BidQty - 1.553, Ask - 0.043471880164586106, AskQty - 7.8634
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:46:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.86, BidQty - 3.6527, Ask - 2617.87, askQuantity - 0.244
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60234.21, BidQty - 0.007481, Ask - 60234.22, askQuantity - 1.1353515833491328
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.008862166570534, BidQty - 0.007481, Ask - 23.00895387835866, AskQty - 0.04934390278460252
2024-08-11 23:46:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434613414102482, BidQty - 0.007481, Ask - 0.043461514644252824, AskQty - 0.244
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 63776c1c-dac4-4125-935f-81affb8c587e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 328b07ce-1ace-4adc-9e97-ff7261137598, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f7029e23-74f4-4582-9999-63ad624407dc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(787777817<open>)] for JPA transaction
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a9fc7933-ab5f-440f-a727-cfd0820bf42b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:46:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(787777817<open>)]
2024-08-11 23:46:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:46:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:46:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:46:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60234.22, askSource=HUOBI, bidQuantity=1.553, symbol=BTCUSDT, priceDate=2024-08-11T23:46:53.946300500, askQuantity=1.1353515833491328, bidSource=BINANCE, priceId=328b07ce-1ace-4adc-9e97-ff7261137598, bidPrice=60235.95}
2024-08-11 23:46:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.87, askSource=HUOBI, bidQuantity=18.7333, symbol=ETHUSDT, priceDate=2024-08-11T23:46:53.946300500, askQuantity=0.244, bidSource=BINANCE, priceId=63776c1c-dac4-4125-935f-81affb8c587e, bidPrice=2618.56}
2024-08-11 23:46:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.003467554686544, askSource=BINANCE, bidQuantity=0.007481, symbol=BTCETH, priceDate=2024-08-11T23:46:53.946300500, askQuantity=0.09674889208373205, bidSource=HUOBI, priceId=f7029e23-74f4-4582-9999-63ad624407dc, bidPrice=23.008862166570534}
2024-08-11 23:46:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043461514644252824, askSource=HUOBI, bidQuantity=1.553, symbol=ETHBTC, priceDate=2024-08-11T23:46:53.946300500, askQuantity=0.244, bidSource=BINANCE, priceId=a9fc7933-ab5f-440f-a727-cfd0820bf42b, bidPrice=0.043471706933864755}
2024-08-11 23:46:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:46:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(787777817<open>)] after transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@68bac40]
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60208.71, BidQty - 0.21392, Ask - 60208.72, askQuantity - 4.40253
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.48, BidQty - 0.0425, Ask - 2616.49, askQuantity - 23.0787
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01125171508395, BidQty - 0.0018469225631972516, Ask - 23.011343484375956, AskQty - 0.1913199897689238
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345682818036989, BidQty - 0.21392, Ask - 0.043457001486994155, AskQty - 23.0787
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.38, BidQty - 4.0575, Ask - 2618.39, askQuantity - 0.1497
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60235.12, BidQty - 0.006968, Ask - 60235.13, askQuantity - 0.310195
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0046402560352, BidQty - 0.006968, Ask - 23.004731933485587, AskQty - 0.013483964990197583
2024-08-11 23:47:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043469317655660415, BidQty - 0.006968, Ask - 0.0434694908883721, AskQty - 0.1497
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c8f9130e-5a1c-4aa2-a1cb-a7d26243f050, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a9536281-b43a-4bf0-a978-35b0ce113650, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a8aa025c-1656-49a8-8c26-c448c9aff9e9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(394534694<open>)] for JPA transaction
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a6f62389-d250-4dc5-b11d-1d62ca3125ba, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(394534694<open>)]
2024-08-11 23:47:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.004731933485587, askSource=HUOBI, bidQuantity=0.0018469225631972516, symbol=BTCETH, priceDate=2024-08-11T23:47:03.723621400, askQuantity=0.013483964990197583, bidSource=BINANCE, priceId=a8aa025c-1656-49a8-8c26-c448c9aff9e9, bidPrice=23.01125171508395}
2024-08-11 23:47:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60208.72, askSource=BINANCE, bidQuantity=0.006968, symbol=BTCUSDT, priceDate=2024-08-11T23:47:03.723621400, askQuantity=4.40253, bidSource=HUOBI, priceId=a9536281-b43a-4bf0-a978-35b0ce113650, bidPrice=60235.12}
2024-08-11 23:47:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043457001486994155, askSource=BINANCE, bidQuantity=0.006968, symbol=ETHBTC, priceDate=2024-08-11T23:47:03.723621400, askQuantity=23.0787, bidSource=HUOBI, priceId=a6f62389-d250-4dc5-b11d-1d62ca3125ba, bidPrice=0.043469317655660415}
2024-08-11 23:47:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.49, askSource=BINANCE, bidQuantity=4.0575, symbol=ETHUSDT, priceDate=2024-08-11T23:47:03.723621400, askQuantity=23.0787, bidSource=HUOBI, priceId=c8f9130e-5a1c-4aa2-a1cb-a7d26243f050, bidPrice=2618.38}
2024-08-11 23:47:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(394534694<open>)] after transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@70706a6]
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60208.71, BidQty - 1.16803, Ask - 60208.72, askQuantity - 1.38069
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.89, BidQty - 24.3503, Ask - 2615.9, askQuantity - 0.9003
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016441760006117, BidQty - 1.0579524087129586, Ask - 23.016533569836653, AskQty - 0.05998687838073953
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344702893534358, BidQty - 1.16803, Ask - 0.043447202240340314, AskQty - 0.9003
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.97, BidQty - 3.9031, Ask - 2615.98, askQuantity - 0.6529
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60206.21, BidQty - 0.154952, Ask - 60206.22, askQuantity - 0.16531008149025134
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01478222310568, BidQty - 0.154952, Ask - 23.014874023784678, AskQty - 0.00718274978691658
2024-08-11 23:47:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345016179391431, BidQty - 0.154952, Ask - 0.043450335106627706, AskQty - 0.6529
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5d2bf98f-7023-4fe4-b76b-4b963be8c8f2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8801f860-d16b-4d51-aee7-b9d6a556de6a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cfaa6e63-6cdb-45bd-bd00-1d2fbca25a2e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(954043479<open>)] for JPA transaction
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: af3a6c1e-4a7c-42a7-af90-e76581ff7c37, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(954043479<open>)]
2024-08-11 23:47:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.9, askSource=BINANCE, bidQuantity=3.9031, symbol=ETHUSDT, priceDate=2024-08-11T23:47:13.806569900, askQuantity=0.9003, bidSource=HUOBI, priceId=5d2bf98f-7023-4fe4-b76b-4b963be8c8f2, bidPrice=2615.97}
2024-08-11 23:47:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60206.22, askSource=HUOBI, bidQuantity=1.16803, symbol=BTCUSDT, priceDate=2024-08-11T23:47:13.806569900, askQuantity=0.16531008149025134, bidSource=BINANCE, priceId=8801f860-d16b-4d51-aee7-b9d6a556de6a, bidPrice=60208.71}
2024-08-11 23:47:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.014874023784678, askSource=HUOBI, bidQuantity=1.0579524087129586, symbol=BTCETH, priceDate=2024-08-11T23:47:13.806569900, askQuantity=0.00718274978691658, bidSource=BINANCE, priceId=cfaa6e63-6cdb-45bd-bd00-1d2fbca25a2e, bidPrice=23.016441760006117}
2024-08-11 23:47:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043447202240340314, askSource=BINANCE, bidQuantity=0.154952, symbol=ETHBTC, priceDate=2024-08-11T23:47:13.806569900, askQuantity=0.9003, bidSource=HUOBI, priceId=af3a6c1e-4a7c-42a7-af90-e76581ff7c37, bidPrice=0.04345016179391431}
2024-08-11 23:47:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(954043479<open>)] after transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6e802384]
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60187.99, BidQty - 0.93993, Ask - 60188.0, askQuantity - 5.41657
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.51, BidQty - 14.436, Ask - 2614.52, askQuantity - 18.1481
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020665361137034, BidQty - 0.6270887384675913, Ask - 23.020757235581428, AskQty - 0.2352906963298332
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343905761945903, BidQty - 0.93993, Ask - 0.04343923098279241, AskQty - 18.1481
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.79, BidQty - 0.5, Ask - 2615.91, askQuantity - 0.76
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60210.4, BidQty - 0.006969, Ask - 60210.41, askQuantity - 0.467682
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.016999820330213, BidQty - 0.006969, Ask - 23.01805955371035, AskQty - 0.020318046310928626
2024-08-11 23:47:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043444148611510865, BidQty - 0.006969, Ask - 0.04344614883807448, AskQty - 0.76
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 33d7e0a6-e895-4735-a8e2-fc589622ae4a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7aaf61cc-7182-40ba-8e9d-5176029c7449, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 29ccbe6c-92b5-4928-a171-3ce3c4741b44, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1846072704<open>)] for JPA transaction
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ff05eae0-e179-45f7-a703-fbbbcac42f6f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1846072704<open>)]
2024-08-11 23:47:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.52, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:47:23.752266500, askQuantity=18.1481, bidSource=HUOBI, priceId=33d7e0a6-e895-4735-a8e2-fc589622ae4a, bidPrice=2615.79}
2024-08-11 23:47:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01805955371035, askSource=HUOBI, bidQuantity=0.6270887384675913, symbol=BTCETH, priceDate=2024-08-11T23:47:23.752266500, askQuantity=0.020318046310928626, bidSource=BINANCE, priceId=29ccbe6c-92b5-4928-a171-3ce3c4741b44, bidPrice=23.020665361137034}
2024-08-11 23:47:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343923098279241, askSource=BINANCE, bidQuantity=0.006969, symbol=ETHBTC, priceDate=2024-08-11T23:47:23.752266500, askQuantity=18.1481, bidSource=HUOBI, priceId=ff05eae0-e179-45f7-a703-fbbbcac42f6f, bidPrice=0.043444148611510865}
2024-08-11 23:47:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60188.0, askSource=BINANCE, bidQuantity=0.006969, symbol=BTCUSDT, priceDate=2024-08-11T23:47:23.752266500, askQuantity=5.41657, bidSource=HUOBI, priceId=7aaf61cc-7182-40ba-8e9d-5176029c7449, bidPrice=60210.4}
2024-08-11 23:47:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1846072704<open>)] after transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1c31195a]
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60201.99, BidQty - 1.44843, Ask - 60202.0, askQuantity - 2.21536
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.35, BidQty - 14.4586, Ask - 2615.36, askQuantity - 18.9801
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018624587054934, BidQty - 0.6281261482552322, Ask - 23.018716424187968, AskQty - 0.09624168260190691
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344290887345935, BidQty - 1.44843, Ask - 0.04344308219711674, AskQty - 18.9801
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.24, BidQty - 3.797, Ask - 2614.25, askQuantity - 0.0936
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.03, BidQty - 0.162246, Ask - 60186.04, askQuantity - 0.341516
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022293200726786, BidQty - 0.162246, Ask - 23.022385090886836, AskQty - 0.01483408424677882
2024-08-11 23:47:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043435986152270525, BidQty - 0.162246, Ask - 0.04343615952073928, AskQty - 0.0936
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d0eac586-7606-4429-88b8-8ec263f57be6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0c5721cc-1617-4d3e-9e52-25ba0b3e2eeb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 45abe597-fe01-490a-9d13-940e3209e66c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(515973406<open>)] for JPA transaction
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 14c28b81-b064-48d5-8536-9cc6c440b0ba, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(515973406<open>)]
2024-08-11 23:47:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60186.04, askSource=HUOBI, bidQuantity=1.44843, symbol=BTCUSDT, priceDate=2024-08-11T23:47:33.761347200, askQuantity=0.341516, bidSource=BINANCE, priceId=0c5721cc-1617-4d3e-9e52-25ba0b3e2eeb, bidPrice=60201.99}
2024-08-11 23:47:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.018716424187968, askSource=BINANCE, bidQuantity=0.162246, symbol=BTCETH, priceDate=2024-08-11T23:47:33.761347200, askQuantity=0.09624168260190691, bidSource=HUOBI, priceId=45abe597-fe01-490a-9d13-940e3209e66c, bidPrice=23.022293200726786}
2024-08-11 23:47:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343615952073928, askSource=HUOBI, bidQuantity=1.44843, symbol=ETHBTC, priceDate=2024-08-11T23:47:33.761347200, askQuantity=0.0936, bidSource=BINANCE, priceId=14c28b81-b064-48d5-8536-9cc6c440b0ba, bidPrice=0.04344290887345935}
2024-08-11 23:47:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.25, askSource=HUOBI, bidQuantity=14.4586, symbol=ETHUSDT, priceDate=2024-08-11T23:47:33.761347200, askQuantity=0.0936, bidSource=BINANCE, priceId=d0eac586-7606-4429-88b8-8ec263f57be6, bidPrice=2615.35}
2024-08-11 23:47:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(515973406<open>)] after transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@213f7524]
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60206.05, BidQty - 2.16166, Ask - 60206.06, askQuantity - 0.06798
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.86, BidQty - 44.4446, Ask - 2615.87, askQuantity - 4.0689
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015688853039336, BidQty - 1.9310566928406694, Ask - 23.01578066104455, AskQty - 0.002953625644993212
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344845020584307, BidQty - 2.16166, Ask - 0.04344862351873275, AskQty - 1.564606528229614
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.83, BidQty - 0.5, Ask - 2615.84, askQuantity - 0.1529
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60204.09, BidQty - 0.199274, Ask - 60204.1, askQuantity - 0.006966
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.015203529267843, BidQty - 0.02172476986198114, Ask - 23.015295336470643, AskQty - 3.026682863791668E-4
2024-08-11 23:47:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344936640527804, BidQty - 0.199274, Ask - 0.04344953972396228, AskQty - 0.1529
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bd656745-ca17-4d56-9720-f68fb85fb529, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a678205f-ba4c-4e90-a34e-b437fc107bc7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 06bf1071-aaf5-40a1-9516-0bc66314f7ce, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2041744369<open>)] for JPA transaction
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 48d1a46d-b5ab-44b0-8210-3d3c553d3974, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2041744369<open>)]
2024-08-11 23:47:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.84, askSource=HUOBI, bidQuantity=44.4446, symbol=ETHUSDT, priceDate=2024-08-11T23:47:43.761361900, askQuantity=0.1529, bidSource=BINANCE, priceId=bd656745-ca17-4d56-9720-f68fb85fb529, bidPrice=2615.86}
2024-08-11 23:47:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60204.1, askSource=HUOBI, bidQuantity=2.16166, symbol=BTCUSDT, priceDate=2024-08-11T23:47:43.761361900, askQuantity=0.006966, bidSource=BINANCE, priceId=a678205f-ba4c-4e90-a34e-b437fc107bc7, bidPrice=60206.05}
2024-08-11 23:47:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.015295336470643, askSource=HUOBI, bidQuantity=1.9310566928406694, symbol=BTCETH, priceDate=2024-08-11T23:47:43.761361900, askQuantity=3.026682863791668E-4, bidSource=BINANCE, priceId=06bf1071-aaf5-40a1-9516-0bc66314f7ce, bidPrice=23.015688853039336}
2024-08-11 23:47:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344862351873275, askSource=BINANCE, bidQuantity=0.199274, symbol=ETHBTC, priceDate=2024-08-11T23:47:43.761361900, askQuantity=1.564606528229614, bidSource=HUOBI, priceId=48d1a46d-b5ab-44b0-8210-3d3c553d3974, bidPrice=0.04344936640527804}
2024-08-11 23:47:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2041744369<open>)] after transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:47:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3f6774f1]
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:47:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60208.0, BidQty - 0.14863, Ask - 60208.01, askQuantity - 5.25303
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2616.04, BidQty - 3.9972, Ask - 2616.05, askQuantity - 21.5084
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014850633588807, BidQty - 0.14863, Ask - 23.014942432072907, AskQty - 0.22824432498599437
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345003264515801, BidQty - 0.14863, Ask - 0.043450205952697316, AskQty - 21.5084
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:47:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:47:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.5, BidQty - 0.1057, Ask - 2616.51, askQuantity - 0.5528
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60216.45, BidQty - 0.026224, Ask - 60216.46, askQuantity - 0.399043
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014033961269014, BidQty - 0.004592849744546549, Ask - 23.014125740493025, AskQty - 0.01733904665767466
2024-08-11 23:47:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345157453626467, BidQty - 0.026224, Ask - 0.043451747819740295, AskQty - 0.5528
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6526c6d2-c034-4a98-9fc0-df4a27f16796, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3ed97b23-abf5-4f03-9e16-91a5363c246f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1cec14bc-41ca-4543-981a-acb16686fea7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2051270748<open>)] for JPA transaction
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 63c3d3c8-b7bb-422a-b8ea-3d11d4c8ed6a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:47:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2051270748<open>)]
2024-08-11 23:47:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:47:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:47:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:47:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.014125740493025, askSource=HUOBI, bidQuantity=0.14863, symbol=BTCETH, priceDate=2024-08-11T23:47:53.800319600, askQuantity=0.01733904665767466, bidSource=BINANCE, priceId=1cec14bc-41ca-4543-981a-acb16686fea7, bidPrice=23.014850633588807}
2024-08-11 23:47:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043450205952697316, askSource=BINANCE, bidQuantity=0.026224, symbol=ETHBTC, priceDate=2024-08-11T23:47:53.800319600, askQuantity=21.5084, bidSource=HUOBI, priceId=63c3d3c8-b7bb-422a-b8ea-3d11d4c8ed6a, bidPrice=0.04345157453626467}
2024-08-11 23:47:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2616.05, askSource=BINANCE, bidQuantity=0.1057, symbol=ETHUSDT, priceDate=2024-08-11T23:47:53.800319600, askQuantity=21.5084, bidSource=HUOBI, priceId=6526c6d2-c034-4a98-9fc0-df4a27f16796, bidPrice=2616.5}
2024-08-11 23:47:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60208.01, askSource=BINANCE, bidQuantity=0.026224, symbol=BTCUSDT, priceDate=2024-08-11T23:47:53.800319600, askQuantity=5.25303, bidSource=HUOBI, priceId=3ed97b23-abf5-4f03-9e16-91a5363c246f, bidPrice=60216.45}
2024-08-11 23:47:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:47:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2051270748<open>)] after transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6d0c1aed]
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60181.98, BidQty - 0.86686, Ask - 60181.99, askQuantity - 4.48424
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.54, BidQty - 5.1597, Ask - 2614.55, askQuantity - 30.8716
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.018102541546344, BidQty - 0.22415835495940814, Ask - 23.018194405134363, AskQty - 0.19481284765757995
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344389409522683, BidQty - 0.86686, Ask - 0.043444067476676576, AskQty - 30.8716
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.39, BidQty - 0.1528, Ask - 2616.4, askQuantity - 0.5
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60211.5, BidQty - 0.049823, Ask - 60211.51, askQuantity - 0.2
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013109616266625, BidQty - 0.006639693746211272, Ask - 23.013201395816374, AskQty - 0.008690663961093152
2024-08-11 23:48:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345331980546576, BidQty - 0.049823, Ask - 0.04345349310347691, AskQty - 0.5
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0f07db9d-16b7-4066-a0b3-652c667fd652, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 441ae120-5f17-4009-b4e9-c710029a0748, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b2c5c846-789d-482d-9e14-e62bcfcf9edd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1828026242<open>)] for JPA transaction
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0bc3316b-3a08-4b21-a5ee-2ebbf4362326, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1828026242<open>)]
2024-08-11 23:48:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.55, askSource=BINANCE, bidQuantity=0.1528, symbol=ETHUSDT, priceDate=2024-08-11T23:48:03.836356300, askQuantity=30.8716, bidSource=HUOBI, priceId=0f07db9d-16b7-4066-a0b3-652c667fd652, bidPrice=2616.39}
2024-08-11 23:48:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.013201395816374, askSource=HUOBI, bidQuantity=0.22415835495940814, symbol=BTCETH, priceDate=2024-08-11T23:48:03.836356300, askQuantity=0.008690663961093152, bidSource=BINANCE, priceId=b2c5c846-789d-482d-9e14-e62bcfcf9edd, bidPrice=23.018102541546344}
2024-08-11 23:48:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60181.99, askSource=BINANCE, bidQuantity=0.049823, symbol=BTCUSDT, priceDate=2024-08-11T23:48:03.836356300, askQuantity=4.48424, bidSource=HUOBI, priceId=441ae120-5f17-4009-b4e9-c710029a0748, bidPrice=60211.5}
2024-08-11 23:48:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043444067476676576, askSource=BINANCE, bidQuantity=0.049823, symbol=ETHBTC, priceDate=2024-08-11T23:48:03.836356300, askQuantity=30.8716, bidSource=HUOBI, priceId=0bc3316b-3a08-4b21-a5ee-2ebbf4362326, bidPrice=0.04345331980546576}
2024-08-11 23:48:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1828026242<open>)] after transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@237ee95d]
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60189.5, BidQty - 0.57659, Ask - 60189.51, askQuantity - 1.76807
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.59, BidQty - 8.1528, Ask - 2614.6, askQuantity - 23.7295
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020538514495527, BidQty - 0.3541533137839656, Ask - 23.02063038564364, AskQty - 0.07680371781228988
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343929698048713, BidQty - 0.57659, Ask - 0.043439470339511045, AskQty - 23.7295
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.15, BidQty - 0.1047, Ask - 2614.16, askQuantity - 0.4477
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60181.84, BidQty - 0.01934, Ask - 60181.85, askQuantity - 0.346589
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.021483000275424, BidQty - 0.004547925952413552, Ask - 23.021574890499778, AskQty - 0.015054964816634916
2024-08-11 23:48:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043437514798897015, BidQty - 0.01934, Ask - 0.043437688179690084, AskQty - 0.4477
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 422fd6b9-03bd-4c62-8e93-1472264a1813, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e44b4bc8-b859-44be-9348-665a456e2d75, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 65ae4aef-936b-445a-b0df-676262465091, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1027689097<open>)] for JPA transaction
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 28637c2e-0529-4423-8ab5-52932a007bf6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1027689097<open>)]
2024-08-11 23:48:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.16, askSource=HUOBI, bidQuantity=8.1528, symbol=ETHUSDT, priceDate=2024-08-11T23:48:13.787702600, askQuantity=0.4477, bidSource=BINANCE, priceId=422fd6b9-03bd-4c62-8e93-1472264a1813, bidPrice=2614.59}
2024-08-11 23:48:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.02063038564364, askSource=BINANCE, bidQuantity=0.004547925952413552, symbol=BTCETH, priceDate=2024-08-11T23:48:13.787702600, askQuantity=0.07680371781228988, bidSource=HUOBI, priceId=65ae4aef-936b-445a-b0df-676262465091, bidPrice=23.021483000275424}
2024-08-11 23:48:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043437688179690084, askSource=HUOBI, bidQuantity=0.57659, symbol=ETHBTC, priceDate=2024-08-11T23:48:13.787702600, askQuantity=0.4477, bidSource=BINANCE, priceId=28637c2e-0529-4423-8ab5-52932a007bf6, bidPrice=0.04343929698048713}
2024-08-11 23:48:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60181.85, askSource=HUOBI, bidQuantity=0.57659, symbol=BTCUSDT, priceDate=2024-08-11T23:48:13.787702600, askQuantity=0.346589, bidSource=BINANCE, priceId=e44b4bc8-b859-44be-9348-665a456e2d75, bidPrice=60189.5}
2024-08-11 23:48:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1027689097<open>)] after transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5e343f99]
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60185.99, BidQty - 0.02234, Ask - 60186.0, askQuantity - 6.22713
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.06, BidQty - 3.7861, Ask - 2614.07, askQuantity - 18.7513
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.023863171223415, BidQty - 0.02234, Ask - 23.02395507371675, AskQty - 0.270463088555478
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343302429136344, BidQty - 0.02234, Ask - 0.0434331976594553, AskQty - 18.7513
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.36, BidQty - 0.653, Ask - 2614.37, askQuantity - 3.7178
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.77, BidQty - 0.013935, Ask - 60186.78, askQuantity - 0.374706
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.02151952478035, BidQty - 0.013935, Ask - 23.021611407763274, AskQty - 0.016276271602501415
2024-08-11 23:48:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343744589758748, BidQty - 0.013935, Ask - 0.04343761926416719, AskQty - 3.7178
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: aa7325a3-30fc-4423-9c3e-c65b1572d784, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 89bb35a0-6730-44df-8486-244e17dc1b86, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0ccb5061-937d-4123-84e1-6e39b23c84f7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(953740334<open>)] for JPA transaction
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a079f720-cfab-44fb-b292-b803fea312e1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(953740334<open>)]
2024-08-11 23:48:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60186.0, askSource=BINANCE, bidQuantity=0.013935, symbol=BTCUSDT, priceDate=2024-08-11T23:48:23.782000700, askQuantity=6.22713, bidSource=HUOBI, priceId=89bb35a0-6730-44df-8486-244e17dc1b86, bidPrice=60186.77}
2024-08-11 23:48:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434331976594553, askSource=BINANCE, bidQuantity=0.013935, symbol=ETHBTC, priceDate=2024-08-11T23:48:23.782000700, askQuantity=18.7513, bidSource=HUOBI, priceId=a079f720-cfab-44fb-b292-b803fea312e1, bidPrice=0.04343744589758748}
2024-08-11 23:48:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.021611407763274, askSource=HUOBI, bidQuantity=0.02234, symbol=BTCETH, priceDate=2024-08-11T23:48:23.782000700, askQuantity=0.016276271602501415, bidSource=BINANCE, priceId=0ccb5061-937d-4123-84e1-6e39b23c84f7, bidPrice=23.023863171223415}
2024-08-11 23:48:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.07, askSource=BINANCE, bidQuantity=0.653, symbol=ETHUSDT, priceDate=2024-08-11T23:48:23.782000700, askQuantity=18.7513, bidSource=HUOBI, priceId=aa7325a3-30fc-4423-9c3e-c65b1572d784, bidPrice=2614.36}
2024-08-11 23:48:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(953740334<open>)] after transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7eb766fe]
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60196.09, BidQty - 2.11127, Ask - 60196.1, askQuantity - 0.06315
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.24, BidQty - 19.3077, Ask - 2615.25, askQuantity - 6.3239
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01733677468693, BidQty - 0.8388329279360172, Ask - 23.01742861075848, AskQty - 0.0027435731882962514
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043445339482125915, BidQty - 2.11127, Ask - 0.04344551282317506, AskQty - 1.4535448173214798
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.23, BidQty - 0.153, Ask - 2614.24, askQuantity - 3.5506
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.77, BidQty - 0.013575, Ask - 60186.78, askQuantity - 0.824069
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.022664330742398, BidQty - 0.006645625276119651, Ask - 23.022756222673596, AskQty - 0.03579367266150474
2024-08-11 23:48:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343528595482264, BidQty - 0.013575, Ask - 0.04343545932104348, AskQty - 3.5506
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2e85083a-64e0-46ca-89f7-a136e8fff8f1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8b9f4e37-d218-47a1-a22c-77ce3df3e765, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 31e4f08e-fad4-42ef-b880-eac56cb9bd0c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2017305932<open>)] for JPA transaction
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5dd6488c-b1b2-4aee-8118-58ec56b9f7e4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2017305932<open>)]
2024-08-11 23:48:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01742861075848, askSource=BINANCE, bidQuantity=0.006645625276119651, symbol=BTCETH, priceDate=2024-08-11T23:48:33.743380100, askQuantity=0.0027435731882962514, bidSource=HUOBI, priceId=31e4f08e-fad4-42ef-b880-eac56cb9bd0c, bidPrice=23.022664330742398}
2024-08-11 23:48:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343545932104348, askSource=HUOBI, bidQuantity=2.11127, symbol=ETHBTC, priceDate=2024-08-11T23:48:33.743380100, askQuantity=3.5506, bidSource=BINANCE, priceId=5dd6488c-b1b2-4aee-8118-58ec56b9f7e4, bidPrice=0.043445339482125915}
2024-08-11 23:48:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.24, askSource=HUOBI, bidQuantity=19.3077, symbol=ETHUSDT, priceDate=2024-08-11T23:48:33.743380100, askQuantity=3.5506, bidSource=BINANCE, priceId=2e85083a-64e0-46ca-89f7-a136e8fff8f1, bidPrice=2615.24}
2024-08-11 23:48:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60186.78, askSource=HUOBI, bidQuantity=2.11127, symbol=BTCUSDT, priceDate=2024-08-11T23:48:33.743380100, askQuantity=0.824069, bidSource=BINANCE, priceId=8b9f4e37-d218-47a1-a22c-77ce3df3e765, bidPrice=60196.09}
2024-08-11 23:48:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2017305932<open>)] after transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@70faf99c]
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60196.0, BidQty - 0.9499, Ask - 60196.01, askQuantity - 3.56631
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.0, BidQty - 22.9666, Ask - 2615.01, askQuantity - 0.0996
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019414839713804, BidQty - 0.9499, Ask - 23.01950669216061, AskQty - 0.0996
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344141746271887, BidQty - 0.9499, Ask - 0.043441590803375646, AskQty - 0.0996
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.48, BidQty - 0.7503, Ask - 2615.49, askQuantity - 3.5912
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60200.5, BidQty - 0.066446, Ask - 60200.51, askQuantity - 0.03347
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01691078918291, BidQty - 0.03259777156335911, Ask - 23.01700261519874, AskQty - 0.0014541424250392562
2024-08-11 23:48:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344614356257115, BidQty - 0.066446, Ask - 0.04344631689105572, AskQty - 0.7703760041139519
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a4003540-43e4-4393-ab29-ee5f75250866, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6c259562-cbc8-4ba6-8118-982752b021bd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: fda6fba7-a07c-455d-879f-3f76a79055c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1908064453<open>)] for JPA transaction
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c5c0164e-48a6-4c90-9598-09a5650cf639, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1908064453<open>)]
2024-08-11 23:48:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01700261519874, askSource=HUOBI, bidQuantity=0.9499, symbol=BTCETH, priceDate=2024-08-11T23:48:43.764466500, askQuantity=0.0014541424250392562, bidSource=BINANCE, priceId=fda6fba7-a07c-455d-879f-3f76a79055c9, bidPrice=23.019414839713804}
2024-08-11 23:48:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.01, askSource=BINANCE, bidQuantity=0.7503, symbol=ETHUSDT, priceDate=2024-08-11T23:48:43.764466500, askQuantity=0.0996, bidSource=HUOBI, priceId=a4003540-43e4-4393-ab29-ee5f75250866, bidPrice=2615.48}
2024-08-11 23:48:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60196.01, askSource=BINANCE, bidQuantity=0.066446, symbol=BTCUSDT, priceDate=2024-08-11T23:48:43.764466500, askQuantity=3.56631, bidSource=HUOBI, priceId=6c259562-cbc8-4ba6-8118-982752b021bd, bidPrice=60200.5}
2024-08-11 23:48:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043441590803375646, askSource=BINANCE, bidQuantity=0.066446, symbol=ETHBTC, priceDate=2024-08-11T23:48:43.764466500, askQuantity=0.0996, bidSource=HUOBI, priceId=c5c0164e-48a6-4c90-9598-09a5650cf639, bidPrice=0.04344614356257115}
2024-08-11 23:48:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1908064453<open>)] after transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:48:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@286af95e]
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:48:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60196.0, BidQty - 0.35502, Ask - 60196.01, askQuantity - 3.3178
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.84, BidQty - 16.595, Ask - 2614.85, askQuantity - 11.9062
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020823374189725, BidQty - 0.35502, Ask - 23.020915237643603, AskQty - 0.14412111620022658
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04343875947924123, BidQty - 0.35502, Ask - 0.04343893281945644, AskQty - 11.9062
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:48:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.87, BidQty - 0.5, Ask - 2615.0, askQuantity - 0.5
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60199.1, BidQty - 0.165604, Ask - 60199.11, askQuantity - 0.235203
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.020688336520077, BidQty - 0.021719593814525467, Ask - 23.02183664962312, AskQty - 0.010216517629745688
2024-08-11 23:48:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043437020912767646, BidQty - 0.165604, Ask - 0.043439187629050934, AskQty - 0.5
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a76e26ea-9c12-433b-a07b-43a64135b3d5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 147d6109-00b9-4dec-bf7e-f79213c0ea97, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 71cb2ff3-52cc-4b53-b6e3-6e8ca079ff5b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1601680561<open>)] for JPA transaction
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3e7783ee-bcfd-4cc7-ad0a-893e6345dde6, using strategy: org.hibernate.id.Assigned
2024-08-11 23:48:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1601680561<open>)]
2024-08-11 23:48:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:48:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:48:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:48:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60196.01, askSource=BINANCE, bidQuantity=0.165604, symbol=BTCUSDT, priceDate=2024-08-11T23:48:53.851562, askQuantity=3.3178, bidSource=HUOBI, priceId=147d6109-00b9-4dec-bf7e-f79213c0ea97, bidPrice=60199.1}
2024-08-11 23:48:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04343893281945644, askSource=BINANCE, bidQuantity=0.35502, symbol=ETHBTC, priceDate=2024-08-11T23:48:53.851562, askQuantity=11.9062, bidSource=BINANCE, priceId=3e7783ee-bcfd-4cc7-ad0a-893e6345dde6, bidPrice=0.04343875947924123}
2024-08-11 23:48:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.85, askSource=BINANCE, bidQuantity=0.5, symbol=ETHUSDT, priceDate=2024-08-11T23:48:53.851562, askQuantity=11.9062, bidSource=HUOBI, priceId=a76e26ea-9c12-433b-a07b-43a64135b3d5, bidPrice=2614.87}
2024-08-11 23:48:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.020915237643603, askSource=BINANCE, bidQuantity=0.35502, symbol=BTCETH, priceDate=2024-08-11T23:48:53.851562, askQuantity=0.14412111620022658, bidSource=BINANCE, priceId=71cb2ff3-52cc-4b53-b6e3-6e8ca079ff5b, bidPrice=23.020823374189725}
2024-08-11 23:48:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:48:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1601680561<open>)] after transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@46f7550d]
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60196.09, BidQty - 1.15364, Ask - 60196.1, askQuantity - 2.16873
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.12, BidQty - 12.2816, Ask - 2615.13, askQuantity - 21.4642
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01839296708003, BidQty - 0.5335559271042355, Ask - 23.01848481140445, AskQty - 0.09421688776515422
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043443345997498176, BidQty - 1.15364, Ask - 0.043443519338216156, AskQty - 21.4642
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.93, BidQty - 6.207, Ask - 2614.94, askQuantity - 0.0944
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60191.91, BidQty - 0.431461, Ask - 60191.92, askQuantity - 0.016612
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01846696291311, BidQty - 0.2696530576949626, Ask - 23.01855881419388, AskQty - 7.216785435653156E-4
2024-08-11 23:49:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344320633068358, BidQty - 0.431461, Ask - 0.043443379683415925, AskQty - 0.0944
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a4fd2c16-eeae-4ef4-8d6a-694f9af8333e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cc302edb-5b2c-4bce-9e75-e865e62d9353, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4fb9eeb5-0ff2-4841-92c8-ea2ee0497c73, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(118385120<open>)] for JPA transaction
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f8a93395-7c07-4f60-a2c3-656231ed65f9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(118385120<open>)]
2024-08-11 23:49:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60191.92, askSource=HUOBI, bidQuantity=1.15364, symbol=BTCUSDT, priceDate=2024-08-11T23:49:03.825412300, askQuantity=0.016612, bidSource=BINANCE, priceId=cc302edb-5b2c-4bce-9e75-e865e62d9353, bidPrice=60196.09}
2024-08-11 23:49:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01848481140445, askSource=BINANCE, bidQuantity=0.2696530576949626, symbol=BTCETH, priceDate=2024-08-11T23:49:03.825412300, askQuantity=0.09421688776515422, bidSource=HUOBI, priceId=4fb9eeb5-0ff2-4841-92c8-ea2ee0497c73, bidPrice=23.01846696291311}
2024-08-11 23:49:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043443379683415925, askSource=HUOBI, bidQuantity=1.15364, symbol=ETHBTC, priceDate=2024-08-11T23:49:03.825412300, askQuantity=0.0944, bidSource=BINANCE, priceId=f8a93395-7c07-4f60-a2c3-656231ed65f9, bidPrice=0.043443345997498176}
2024-08-11 23:49:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.94, askSource=HUOBI, bidQuantity=12.2816, symbol=ETHUSDT, priceDate=2024-08-11T23:49:03.825412300, askQuantity=0.0944, bidSource=BINANCE, priceId=a4fd2c16-eeae-4ef4-8d6a-694f9af8333e, bidPrice=2615.12}
2024-08-11 23:49:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(118385120<open>)] after transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@64cc0551]
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60196.09, BidQty - 1.0537, Ask - 60196.1, askQuantity - 2.56441
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.0, BidQty - 25.4394, Ask - 2615.01, askQuantity - 3.9443
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.019449256408194, BidQty - 1.0537, Ask - 23.019541108986616, AskQty - 0.11140143879753008
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043441352512870436, BidQty - 1.0537, Ask - 0.04344152585325725, AskQty - 3.9443
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.98, BidQty - 0.1529, Ask - 2614.99, askQuantity - 0.6536
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60191.91, BidQty - 0.436517, Ask - 60191.92, askQuantity - 0.051991
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01802683757873, BidQty - 0.006642619764018121, Ask - 23.018118685420156, AskQty - 0.0022586989280288785
2024-08-11 23:49:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434440370069604, BidQty - 0.436517, Ask - 0.04344421035983074, AskQty - 0.6536
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d7d5e5c2-64b9-47ac-8754-0b111859f562, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c0542560-b99e-4f99-89e7-92516cab0947, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8c5342d7-620b-4240-a0bb-9852e02d0d4b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1790442521<open>)] for JPA transaction
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9fd3984e-c028-461e-841c-a00963831b93, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1790442521<open>)]
2024-08-11 23:49:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344152585325725, askSource=BINANCE, bidQuantity=0.436517, symbol=ETHBTC, priceDate=2024-08-11T23:49:13.772111900, askQuantity=3.9443, bidSource=HUOBI, priceId=9fd3984e-c028-461e-841c-a00963831b93, bidPrice=0.0434440370069604}
2024-08-11 23:49:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.99, askSource=HUOBI, bidQuantity=25.4394, symbol=ETHUSDT, priceDate=2024-08-11T23:49:13.772111900, askQuantity=0.6536, bidSource=BINANCE, priceId=d7d5e5c2-64b9-47ac-8754-0b111859f562, bidPrice=2615.0}
2024-08-11 23:49:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60191.92, askSource=HUOBI, bidQuantity=1.0537, symbol=BTCUSDT, priceDate=2024-08-11T23:49:13.772111900, askQuantity=0.051991, bidSource=BINANCE, priceId=c0542560-b99e-4f99-89e7-92516cab0947, bidPrice=60196.09}
2024-08-11 23:49:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.018118685420156, askSource=HUOBI, bidQuantity=1.0537, symbol=BTCETH, priceDate=2024-08-11T23:49:13.772111900, askQuantity=0.0022586989280288785, bidSource=BINANCE, priceId=8c5342d7-620b-4240-a0bb-9852e02d0d4b, bidPrice=23.019449256408194}
2024-08-11 23:49:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1790442521<open>)] after transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@53601c9a]
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60205.99, BidQty - 2.92277, Ask - 60206.0, askQuantity - 0.47996
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.99, BidQty - 22.4744, Ask - 2616.0, askQuantity - 7.583
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.014522171253823, BidQty - 0.9765312454790628, Ask - 23.01461397023689, AskQty - 0.02085457529814304
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345065275886124, BidQty - 2.92277, Ask - 0.043450826072289485, AskQty - 7.583
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.39, BidQty - 0.0936, Ask - 2615.4, askQuantity - 3.9952
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60195.5, BidQty - 0.004254, Ask - 60195.51, askQuantity - 0.213438
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01579108358186, BidQty - 0.004066773097656802, Ask - 23.015882908476367, AskQty - 0.009273509117540492
2024-08-11 23:49:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344825718728855, BidQty - 0.004254, Ask - 0.04344843053052139, AskQty - 3.9952
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1a3856c6-c47b-4cb8-8fb4-a8a377e00795, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ecdb7924-52d7-423f-9fc2-295606467b30, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 35aaf670-bec4-415c-8c8e-a6e88298be85, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(782167572<open>)] for JPA transaction
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ca142466-f50c-4a79-bb5c-50e9529b2128, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(782167572<open>)]
2024-08-11 23:49:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.4, askSource=HUOBI, bidQuantity=22.4744, symbol=ETHUSDT, priceDate=2024-08-11T23:49:23.794862, askQuantity=3.9952, bidSource=BINANCE, priceId=1a3856c6-c47b-4cb8-8fb4-a8a377e00795, bidPrice=2615.99}
2024-08-11 23:49:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01461397023689, askSource=BINANCE, bidQuantity=0.004066773097656802, symbol=BTCETH, priceDate=2024-08-11T23:49:23.794862, askQuantity=0.02085457529814304, bidSource=HUOBI, priceId=35aaf670-bec4-415c-8c8e-a6e88298be85, bidPrice=23.01579108358186}
2024-08-11 23:49:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60195.51, askSource=HUOBI, bidQuantity=2.92277, symbol=BTCUSDT, priceDate=2024-08-11T23:49:23.794862, askQuantity=0.213438, bidSource=BINANCE, priceId=ecdb7924-52d7-423f-9fc2-295606467b30, bidPrice=60205.99}
2024-08-11 23:49:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04344843053052139, askSource=HUOBI, bidQuantity=2.92277, symbol=ETHBTC, priceDate=2024-08-11T23:49:23.794862, askQuantity=3.9952, bidSource=BINANCE, priceId=ca142466-f50c-4a79-bb5c-50e9529b2128, bidPrice=0.04345065275886124}
2024-08-11 23:49:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(782167572<open>)] after transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6ac59844]
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60177.22, BidQty - 1.03231, Ask - 60177.23, askQuantity - 1.40816
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.59, BidQty - 20.3866, Ask - 2615.6, askQuantity - 11.685
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007042361217312, BidQty - 0.8861025976274743, Ask - 23.00713414564209, AskQty - 0.061205363131536634
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346477895376707, BidQty - 1.03231, Ask - 0.04346495235240179, AskQty - 11.685
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.53, BidQty - 0.6038, Ask - 2615.85, askQuantity - 3.0
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.65, BidQty - 0.03323, Ask - 60186.66, askQuantity - 0.267192
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.008448496664567, BidQty - 0.026242534349394754, Ask - 23.01126731484632, AskQty - 0.01161135526975579
2024-08-11 23:49:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345697202669163, BidQty - 0.03323, Ask - 0.04346229604073328, AskQty - 3.0
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4921d698-d05b-4df3-ada9-4959797823c1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8de6a05d-7581-49f4-96a2-852bcab9585b, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1e39a372-2bdc-4b5a-a791-dbf187e945d7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1743466528<open>)] for JPA transaction
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 638e87f5-5942-4b53-8ce5-9f6286595a9e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1743466528<open>)]
2024-08-11 23:49:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.6, askSource=BINANCE, bidQuantity=20.3866, symbol=ETHUSDT, priceDate=2024-08-11T23:49:33.874914200, askQuantity=11.685, bidSource=BINANCE, priceId=4921d698-d05b-4df3-ada9-4959797823c1, bidPrice=2615.59}
2024-08-11 23:49:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346229604073328, askSource=HUOBI, bidQuantity=1.03231, symbol=ETHBTC, priceDate=2024-08-11T23:49:33.874914200, askQuantity=3.0, bidSource=BINANCE, priceId=638e87f5-5942-4b53-8ce5-9f6286595a9e, bidPrice=0.04346477895376707}
2024-08-11 23:49:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00713414564209, askSource=BINANCE, bidQuantity=0.026242534349394754, symbol=BTCETH, priceDate=2024-08-11T23:49:33.874914200, askQuantity=0.061205363131536634, bidSource=HUOBI, priceId=1e39a372-2bdc-4b5a-a791-dbf187e945d7, bidPrice=23.008448496664567}
2024-08-11 23:49:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60177.23, askSource=BINANCE, bidQuantity=0.03323, symbol=BTCUSDT, priceDate=2024-08-11T23:49:33.874914200, askQuantity=1.40816, bidSource=HUOBI, priceId=8de6a05d-7581-49f4-96a2-852bcab9585b, bidPrice=60186.65}
2024-08-11 23:49:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1743466528<open>)] after transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1a21017f]
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60183.99, BidQty - 1.15522, Ask - 60184.0, askQuantity - 1.65216
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.93, BidQty - 12.0998, Ask - 2615.94, askQuantity - 10.882
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.006640060551845, BidQty - 0.5259264268121805, Ask - 23.006731831509253, AskQty - 0.0718120249368603
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043465539013691344, BidQty - 1.15522, Ask - 0.04346571239294703, AskQty - 10.882
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2616.29, BidQty - 0.1528, Ask - 2616.3, askQuantity - 5.5157
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.65, BidQty - 0.198024, Ask - 60186.66, askQuantity - 0.47955
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.004491075182507, BidQty - 0.006642181281064821, Ask - 23.00458282529842, AskQty - 0.020845846396859366
2024-08-11 23:49:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346959940957016, BidQty - 0.198024, Ask - 0.043469772781837834, AskQty - 5.5157
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3a4e5aac-88ce-4b86-9a3f-41fa4d56c3ea, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ad17144d-3a70-463a-8c7d-87f948c5899a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d92aa28b-2cf6-4bbc-b5d0-2edab3679c55, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(966651764<open>)] for JPA transaction
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0acae251-a89e-4629-8e2f-43f45c1c6142, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(966651764<open>)]
2024-08-11 23:49:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346571239294703, askSource=BINANCE, bidQuantity=0.198024, symbol=ETHBTC, priceDate=2024-08-11T23:49:43.814126600, askQuantity=10.882, bidSource=HUOBI, priceId=0acae251-a89e-4629-8e2f-43f45c1c6142, bidPrice=0.04346959940957016}
2024-08-11 23:49:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60184.0, askSource=BINANCE, bidQuantity=0.198024, symbol=BTCUSDT, priceDate=2024-08-11T23:49:43.814126600, askQuantity=1.65216, bidSource=HUOBI, priceId=ad17144d-3a70-463a-8c7d-87f948c5899a, bidPrice=60186.65}
2024-08-11 23:49:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00458282529842, askSource=HUOBI, bidQuantity=0.5259264268121805, symbol=BTCETH, priceDate=2024-08-11T23:49:43.814126600, askQuantity=0.020845846396859366, bidSource=BINANCE, priceId=d92aa28b-2cf6-4bbc-b5d0-2edab3679c55, bidPrice=23.006640060551845}
2024-08-11 23:49:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.94, askSource=BINANCE, bidQuantity=0.1528, symbol=ETHUSDT, priceDate=2024-08-11T23:49:43.814126600, askQuantity=10.882, bidSource=HUOBI, priceId=3a4e5aac-88ce-4b86-9a3f-41fa4d56c3ea, bidPrice=2616.29}
2024-08-11 23:49:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(966651764<open>)] after transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:49:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@43dd802f]
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:49:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60174.67, BidQty - 1.21066, Ask - 60174.68, askQuantity - 1.72575
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2615.2, BidQty - 16.6464, Ask - 2615.21, askQuantity - 3.9666
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.009498281208774, BidQty - 0.7234577562951322, Ask - 23.009590088712145, AskQty - 0.07500133611013801
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043460139713248164, BidQty - 1.21066, Ask - 0.04346031311845998, AskQty - 3.9666
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:49:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:49:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.96, BidQty - 0.0942, Ask - 2615.97, askQuantity - 3.8132
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60186.89, BidQty - 0.156632, Ask - 60186.9, askQuantity - 0.362619
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007484795314934, BidQty - 0.004094319776283506, Ask - 23.00757656844906, AskQty - 0.015760851601262067
2024-08-11 23:49:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346394315041978, BidQty - 0.156632, Ask - 0.04346411652105633, AskQty - 3.8132
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 352a3f08-5582-4983-9b3e-27c922ceb920, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 570e849e-e75a-4396-b2a1-7d1e549560c8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 244a500d-e0b1-42c9-82c4-9eca45f995da, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477740336<open>)] for JPA transaction
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9017b81d-b818-4c38-9ed3-f33005c35857, using strategy: org.hibernate.id.Assigned
2024-08-11 23:49:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(477740336<open>)]
2024-08-11 23:49:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:49:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:49:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:49:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00757656844906, askSource=HUOBI, bidQuantity=0.7234577562951322, symbol=BTCETH, priceDate=2024-08-11T23:49:53.780000300, askQuantity=0.015760851601262067, bidSource=BINANCE, priceId=244a500d-e0b1-42c9-82c4-9eca45f995da, bidPrice=23.009498281208774}
2024-08-11 23:49:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60174.68, askSource=BINANCE, bidQuantity=0.156632, symbol=BTCUSDT, priceDate=2024-08-11T23:49:53.780000300, askQuantity=1.72575, bidSource=HUOBI, priceId=570e849e-e75a-4396-b2a1-7d1e549560c8, bidPrice=60186.89}
2024-08-11 23:49:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346031311845998, askSource=BINANCE, bidQuantity=0.156632, symbol=ETHBTC, priceDate=2024-08-11T23:49:53.780000300, askQuantity=3.9666, bidSource=HUOBI, priceId=9017b81d-b818-4c38-9ed3-f33005c35857, bidPrice=0.04346394315041978}
2024-08-11 23:49:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2615.21, askSource=BINANCE, bidQuantity=0.0942, symbol=ETHUSDT, priceDate=2024-08-11T23:49:53.780000300, askQuantity=3.9666, bidSource=HUOBI, priceId=352a3f08-5582-4983-9b3e-27c922ceb920, bidPrice=2615.96}
2024-08-11 23:49:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:49:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(477740336<open>)] after transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@242a2b81]
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60133.5, BidQty - 0.09908, Ask - 60133.51, askQuantity - 3.47575
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2613.5, BidQty - 6.3407, Ask - 2613.51, askQuantity - 39.4521
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.008712421226626, BidQty - 0.09908, Ask - 23.00880428544098, AskQty - 0.15106173953590935
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346162397638188, BidQty - 0.09908, Ask - 0.043461797500561256, AskQty - 39.4521
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2615.76, BidQty - 0.1529, Ask - 2615.77, askQuantity - 0.8908
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60178.21, BidQty - 0.089434, Ask - 60178.22, askQuantity - 0.033233
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.005925597434025, BidQty - 0.006646113817609397, Ask - 23.006017371624306, AskQty - 0.0014445351171902393
2024-08-11 23:50:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346688885114914, BidQty - 0.089434, Ask - 0.04346706224728186, AskQty - 0.764555925379525
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: df778699-6781-4f32-a6db-1809f7e2fcce, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ebff0c4b-fd62-45cf-b96e-7f9e16a448b0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5c5577db-c794-468a-aa95-8ab5860201f2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1139473793<open>)] for JPA transaction
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4b982bb4-6b41-4cb5-836a-48282b626167, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1139473793<open>)]
2024-08-11 23:50:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2613.51, askSource=BINANCE, bidQuantity=0.1529, symbol=ETHUSDT, priceDate=2024-08-11T23:50:03.854400200, askQuantity=39.4521, bidSource=HUOBI, priceId=df778699-6781-4f32-a6db-1809f7e2fcce, bidPrice=2615.76}
2024-08-11 23:50:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043461797500561256, askSource=BINANCE, bidQuantity=0.089434, symbol=ETHBTC, priceDate=2024-08-11T23:50:03.854400200, askQuantity=39.4521, bidSource=HUOBI, priceId=4b982bb4-6b41-4cb5-836a-48282b626167, bidPrice=0.04346688885114914}
2024-08-11 23:50:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60133.51, askSource=BINANCE, bidQuantity=0.089434, symbol=BTCUSDT, priceDate=2024-08-11T23:50:03.854400200, askQuantity=3.47575, bidSource=HUOBI, priceId=ebff0c4b-fd62-45cf-b96e-7f9e16a448b0, bidPrice=60178.21}
2024-08-11 23:50:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.006017371624306, askSource=HUOBI, bidQuantity=0.09908, symbol=BTCETH, priceDate=2024-08-11T23:50:03.854400200, askQuantity=0.0014445351171902393, bidSource=BINANCE, priceId=5c5577db-c794-468a-aa95-8ab5860201f2, bidPrice=23.008712421226626}
2024-08-11 23:50:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1139473793<open>)] after transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@45eac5fb]
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60156.0, BidQty - 0.53906, Ask - 60156.01, askQuantity - 3.00683
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2613.95, BidQty - 3.7595, Ask - 2613.96, askQuantity - 52.9225
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013359041454343, BidQty - 0.1633616367444644, Ask - 23.01345090763022, AskQty - 0.13065532901035157
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345284868461189, BidQty - 0.53906, Ask - 0.04345302214242968, AskQty - 52.9225
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.09, BidQty - 0.0997, Ask - 2614.1, askQuantity - 0.0173
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60152.74, BidQty - 0.341694, Ask - 60152.75, askQuantity - 0.080535
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.0108794613825, BidQty - 0.004332733139005804, Ask - 23.01097131315295, AskQty - 0.0034998522619497864
2024-08-11 23:50:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345753103557194, BidQty - 0.341694, Ask - 0.04345770450356875, AskQty - 0.0173
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 031498a0-4c16-4984-8685-0b55f8cd1358, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a99f3389-39ba-44b2-ad18-b6af86b6c9a2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 08e58eec-60fd-4056-b484-56ca62a39dc0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(29171657<open>)] for JPA transaction
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2ce3e0e1-6b4c-4d03-8d1b-c4a0ad91b5c2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(29171657<open>)]
2024-08-11 23:50:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2613.96, askSource=BINANCE, bidQuantity=0.0997, symbol=ETHUSDT, priceDate=2024-08-11T23:50:13.992835500, askQuantity=52.9225, bidSource=HUOBI, priceId=031498a0-4c16-4984-8685-0b55f8cd1358, bidPrice=2614.09}
2024-08-11 23:50:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60152.75, askSource=HUOBI, bidQuantity=0.53906, symbol=BTCUSDT, priceDate=2024-08-11T23:50:13.992835500, askQuantity=0.080535, bidSource=BINANCE, priceId=a99f3389-39ba-44b2-ad18-b6af86b6c9a2, bidPrice=60156.0}
2024-08-11 23:50:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345302214242968, askSource=BINANCE, bidQuantity=0.341694, symbol=ETHBTC, priceDate=2024-08-11T23:50:13.992835500, askQuantity=52.9225, bidSource=HUOBI, priceId=2ce3e0e1-6b4c-4d03-8d1b-c4a0ad91b5c2, bidPrice=0.04345753103557194}
2024-08-11 23:50:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.01097131315295, askSource=HUOBI, bidQuantity=0.1633616367444644, symbol=BTCETH, priceDate=2024-08-11T23:50:13.992835500, askQuantity=0.0034998522619497864, bidSource=BINANCE, priceId=08e58eec-60fd-4056-b484-56ca62a39dc0, bidPrice=23.013359041454343}
2024-08-11 23:50:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(29171657<open>)] after transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7a7d4412]
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60167.99, BidQty - 0.9118, Ask - 60168.0, askQuantity - 2.52375
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.61, BidQty - 4.6142, Ask - 2614.62, askQuantity - 34.455
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.012135606703843, BidQty - 0.2005115943544067, Ask - 23.012227445010918, AskQty - 0.10966995724471482
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043455158888445686, BidQty - 0.9118, Ask - 0.043455332312081554, AskQty - 34.455
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2613.5, BidQty - 2.0109, Ask - 2613.51, askQuantity - 0.153
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60150.64, BidQty - 0.049872, Ask - 60150.65, askQuantity - 0.07497
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01527065134627, BidQty - 0.049872, Ask - 23.015362540654294, AskQty - 0.0032573894878941455
2024-08-11 23:50:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04344923953440237, BidQty - 0.049872, Ask - 0.0434494130070769, AskQty - 0.153
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a914d19a-93d0-4740-8ad5-38be391d0034, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 333d6f80-69e2-4322-9744-e9f275508934, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: ece44147-dcb9-4d0c-9adb-d3bda6bc48b5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(243661962<open>)] for JPA transaction
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 36978251-b97c-4131-9c58-c07bbba6eefd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(243661962<open>)]
2024-08-11 23:50:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60150.65, askSource=HUOBI, bidQuantity=0.9118, symbol=BTCUSDT, priceDate=2024-08-11T23:50:23.876488100, askQuantity=0.07497, bidSource=BINANCE, priceId=333d6f80-69e2-4322-9744-e9f275508934, bidPrice=60167.99}
2024-08-11 23:50:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.012227445010918, askSource=BINANCE, bidQuantity=0.049872, symbol=BTCETH, priceDate=2024-08-11T23:50:23.876488100, askQuantity=0.10966995724471482, bidSource=HUOBI, priceId=ece44147-dcb9-4d0c-9adb-d3bda6bc48b5, bidPrice=23.01527065134627}
2024-08-11 23:50:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434494130070769, askSource=HUOBI, bidQuantity=0.9118, symbol=ETHBTC, priceDate=2024-08-11T23:50:23.876488100, askQuantity=0.153, bidSource=BINANCE, priceId=36978251-b97c-4131-9c58-c07bbba6eefd, bidPrice=0.043455158888445686}
2024-08-11 23:50:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2613.51, askSource=HUOBI, bidQuantity=4.6142, symbol=ETHUSDT, priceDate=2024-08-11T23:50:23.876488100, askQuantity=0.153, bidSource=BINANCE, priceId=a914d19a-93d0-4740-8ad5-38be391d0034, bidPrice=2614.61}
2024-08-11 23:50:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(243661962<open>)] after transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2e576452]
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60163.99, BidQty - 2.77719, Ask - 60164.0, askQuantity - 0.45399
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2614.91, BidQty - 32.0615, Ask - 2614.92, askQuantity - 3.8372
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.007965826870418, BidQty - 1.39349563717433, Ask - 23.008057638695025, AskQty - 0.01973178297486869
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04346303437271458, BidQty - 2.77719, Ask - 0.04346320780918952, AskQty - 3.8372
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.03, BidQty - 1.9108, Ask - 2614.04, askQuantity - 0.6452
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60159.25, BidQty - 0.635619, Ask - 60159.26, askQuantity - 0.001901
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.013898027574175, BidQty - 0.08302809014407594, Ask - 23.013989893000463, AskQty - 8.260193077507934E-5
2024-08-11 23:50:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043451831023187455, BidQty - 0.635619, Ask - 0.04345200447146532, AskQty - 0.04374942015041851
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 138031c0-6a0a-41bd-9549-0d51b936c665, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 33e64eda-9695-4e04-bf98-7b2ed8552696, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4c0e1a1b-7458-417d-8d00-b64f5500db1d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1111362165<open>)] for JPA transaction
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 98470316-91b2-4ae9-8dfa-67d0cea471c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1111362165<open>)]
2024-08-11 23:50:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.008057638695025, askSource=BINANCE, bidQuantity=0.08302809014407594, symbol=BTCETH, priceDate=2024-08-11T23:50:33.807312700, askQuantity=0.01973178297486869, bidSource=HUOBI, priceId=4c0e1a1b-7458-417d-8d00-b64f5500db1d, bidPrice=23.013898027574175}
2024-08-11 23:50:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04345200447146532, askSource=HUOBI, bidQuantity=2.77719, symbol=ETHBTC, priceDate=2024-08-11T23:50:33.807312700, askQuantity=0.04374942015041851, bidSource=BINANCE, priceId=98470316-91b2-4ae9-8dfa-67d0cea471c9, bidPrice=0.04346303437271458}
2024-08-11 23:50:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.04, askSource=HUOBI, bidQuantity=32.0615, symbol=ETHUSDT, priceDate=2024-08-11T23:50:33.807312700, askQuantity=0.6452, bidSource=BINANCE, priceId=138031c0-6a0a-41bd-9549-0d51b936c665, bidPrice=2614.91}
2024-08-11 23:50:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60159.26, askSource=HUOBI, bidQuantity=2.77719, symbol=BTCUSDT, priceDate=2024-08-11T23:50:33.807312700, askQuantity=0.001901, bidSource=BINANCE, priceId=33e64eda-9695-4e04-bf98-7b2ed8552696, bidPrice=60163.99}
2024-08-11 23:50:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1111362165<open>)] after transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@525fb62d]
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60195.98, BidQty - 2.71738, Ask - 60195.99, askQuantity - 0.07228
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.35, BidQty - 25.3408, Ask - 2617.36, askQuantity - 6.4478
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.998739187578323, BidQty - 1.1018343133212551, Ask - 22.998830878560376, AskQty - 0.0031427684468683043
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348047104134345, BidQty - 2.71738, Ask - 0.04348064438854555, AskQty - 1.662348868478161
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2614.8, BidQty - 7.2369, Ask - 2614.81, askQuantity - 0.0173
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60167.6, BidQty - 0.591968, Ask - 60167.61, askQuantity - 0.043497
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.01031432494139, BidQty - 0.3145067858614936, Ask - 23.01040614960991, AskQty - 0.0018903186548377112
2024-08-11 23:50:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04345859840535465, BidQty - 0.591968, Ask - 0.043458771830686284, AskQty - 0.0173
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: de1667f6-2564-421b-aa86-19e1473ba1b1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6e25d759-e274-4b1d-97aa-8b26d4159b6e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 6720459b-8709-46ab-842f-d12269726408, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(182595710<open>)] for JPA transaction
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c4fb4731-af9e-446d-a6d1-47e0a7844186, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(182595710<open>)]
2024-08-11 23:50:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60167.61, askSource=HUOBI, bidQuantity=2.71738, symbol=BTCUSDT, priceDate=2024-08-11T23:50:43.923654700, askQuantity=0.043497, bidSource=BINANCE, priceId=6e25d759-e274-4b1d-97aa-8b26d4159b6e, bidPrice=60195.98}
2024-08-11 23:50:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.998830878560376, askSource=BINANCE, bidQuantity=0.3145067858614936, symbol=BTCETH, priceDate=2024-08-11T23:50:43.923654700, askQuantity=0.0031427684468683043, bidSource=HUOBI, priceId=6720459b-8709-46ab-842f-d12269726408, bidPrice=23.01031432494139}
2024-08-11 23:50:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043458771830686284, askSource=HUOBI, bidQuantity=2.71738, symbol=ETHBTC, priceDate=2024-08-11T23:50:43.923654700, askQuantity=0.0173, bidSource=BINANCE, priceId=c4fb4731-af9e-446d-a6d1-47e0a7844186, bidPrice=0.04348047104134345}
2024-08-11 23:50:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2614.81, askSource=HUOBI, bidQuantity=25.3408, symbol=ETHUSDT, priceDate=2024-08-11T23:50:43.923654700, askQuantity=0.0173, bidSource=BINANCE, priceId=de1667f6-2564-421b-aa86-19e1473ba1b1, bidPrice=2617.35}
2024-08-11 23:50:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(182595710<open>)] after transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:50:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@284072e1]
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:50:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60188.0, BidQty - 0.84821, Ask - 60188.01, askQuantity - 6.59763
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.0, BidQty - 9.1071, Ask - 2617.01, askQuantity - 41.5842
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.998765767039483, BidQty - 0.39598211887751716, Ask - 22.99885747038594, AskQty - 0.2868677284728304
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043480420768189545, BidQty - 0.84821, Ask - 0.043480594138366455, AskQty - 41.5842
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:50:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:50:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.88, BidQty - 0.1072, Ask - 2617.89, askQuantity - 1.1074
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60207.37, BidQty - 0.212276, Ask - 60207.38, askQuantity - 0.450482
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99843385321767, BidQty - 0.004661186960998296, Ask - 22.99852552447018, AskQty - 0.019587429616767914
2024-08-11 23:50:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348104833659927, BidQty - 0.212276, Ask - 0.043481221651103505, AskQty - 1.1074
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9cd25db7-518c-43d9-8dcc-055365f24476, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8f2b2a12-0736-4c87-a2c2-4e72dd983b19, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 63ebf980-085c-45e2-9159-06c9387e7608, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(477853291<open>)] for JPA transaction
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 743b3511-4ca0-4941-a7c0-d7ff750300bb, using strategy: org.hibernate.id.Assigned
2024-08-11 23:50:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(477853291<open>)]
2024-08-11 23:50:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:50:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:50:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:50:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.99852552447018, askSource=HUOBI, bidQuantity=0.39598211887751716, symbol=BTCETH, priceDate=2024-08-11T23:50:53.823489400, askQuantity=0.019587429616767914, bidSource=BINANCE, priceId=63ebf980-085c-45e2-9159-06c9387e7608, bidPrice=22.998765767039483}
2024-08-11 23:50:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.01, askSource=BINANCE, bidQuantity=0.1072, symbol=ETHUSDT, priceDate=2024-08-11T23:50:53.823489400, askQuantity=41.5842, bidSource=HUOBI, priceId=9cd25db7-518c-43d9-8dcc-055365f24476, bidPrice=2617.88}
2024-08-11 23:50:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60188.01, askSource=BINANCE, bidQuantity=0.212276, symbol=BTCUSDT, priceDate=2024-08-11T23:50:53.823489400, askQuantity=6.59763, bidSource=HUOBI, priceId=8f2b2a12-0736-4c87-a2c2-4e72dd983b19, bidPrice=60207.37}
2024-08-11 23:50:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043480594138366455, askSource=BINANCE, bidQuantity=0.212276, symbol=ETHBTC, priceDate=2024-08-11T23:50:53.823489400, askQuantity=41.5842, bidSource=HUOBI, priceId=743b3511-4ca0-4941-a7c0-d7ff750300bb, bidPrice=0.04348104833659927}
2024-08-11 23:50:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:50:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(477853291<open>)] after transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@32d302b]
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60217.49, BidQty - 3.62632, Ask - 60217.5, askQuantity - 0.44348
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.91, BidQty - 28.8051, Ask - 2617.92, askQuantity - 0.268
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.002035967485636, BidQty - 1.2522847995158881, Ask - 23.002127651447147, AskQty - 0.019279955607589154
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434742392161747, BidQty - 3.62632, Ask - 0.04347441250042139, AskQty - 0.268
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.27, BidQty - 0.5, Ask - 2617.32, askQuantity - 0.6528
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60201.83, BidQty - 0.066198, Ask - 60201.84, askQuantity - 0.033222
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.001325783625997, BidQty - 0.02173787740339455, Ask - 23.001769018863165, AskQty - 0.0014443236940930712
2024-08-11 23:51:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347491704572485, BidQty - 0.066198, Ask - 0.0434757548067891, AskQty - 0.6528
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: cef53593-b66e-4e2b-8ca4-2bfe895899d8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0d1d99f4-fb9a-4a35-82c9-7156e190bb5f, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 4466e8ea-524a-4dc6-bc59-f26e6058937c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(535893695<open>)] for JPA transaction
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 8b0762cf-4faf-4987-ab33-0edfc448761a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(535893695<open>)]
2024-08-11 23:51:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.32, askSource=HUOBI, bidQuantity=28.8051, symbol=ETHUSDT, priceDate=2024-08-11T23:51:03.744757800, askQuantity=0.6528, bidSource=BINANCE, priceId=cef53593-b66e-4e2b-8ca4-2bfe895899d8, bidPrice=2617.91}
2024-08-11 23:51:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60201.84, askSource=HUOBI, bidQuantity=3.62632, symbol=BTCUSDT, priceDate=2024-08-11T23:51:03.744757800, askQuantity=0.033222, bidSource=BINANCE, priceId=0d1d99f4-fb9a-4a35-82c9-7156e190bb5f, bidPrice=60217.49}
2024-08-11 23:51:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347441250042139, askSource=BINANCE, bidQuantity=0.066198, symbol=ETHBTC, priceDate=2024-08-11T23:51:03.744757800, askQuantity=0.268, bidSource=HUOBI, priceId=8b0762cf-4faf-4987-ab33-0edfc448761a, bidPrice=0.04347491704572485}
2024-08-11 23:51:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.001769018863165, askSource=HUOBI, bidQuantity=1.2522847995158881, symbol=BTCETH, priceDate=2024-08-11T23:51:03.744757800, askQuantity=0.0014443236940930712, bidSource=BINANCE, priceId=4466e8ea-524a-4dc6-bc59-f26e6058937c, bidPrice=23.002035967485636}
2024-08-11 23:51:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(535893695<open>)] after transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7a69126d]
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60224.0, BidQty - 0.19265, Ask - 60224.01, askQuantity - 6.63476
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.39, BidQty - 4.0608, Ask - 2618.4, askQuantity - 22.4142
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.000305530094714, BidQty - 0.17655417640807652, Ask - 23.00039719064005, AskQty - 0.2884628445764405
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347751004956329, BidQty - 0.19265, Ask - 0.04347768331562168, AskQty - 22.4142
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.99, BidQty - 1.0, Ask - 2618.07, askQuantity - 0.5
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60222.02, BidQty - 8.18E-4, Ask - 60224.64, askQuantity - 2.76E-4
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.002448368454623, BidQty - 8.18E-4, Ask - 23.004152040305733, AskQty - 1.1997834109095545E-5
2024-08-11 23:51:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347041343875198, BidQty - 8.18E-4, Ask - 0.04347363306644314, AskQty - 0.0063486757496934755
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2571ec85-9f3b-4355-bb3c-65603113cd0d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 159448a6-25e8-426f-8ac5-82e320aff94c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 95d7c49c-498e-42b9-a66c-4459ff8c5eff, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2008358029<open>)] for JPA transaction
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 3bc62bf1-fd74-4938-8f7e-39861ca3ecf3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2008358029<open>)]
2024-08-11 23:51:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.07, askSource=HUOBI, bidQuantity=4.0608, symbol=ETHUSDT, priceDate=2024-08-11T23:51:13.733398500, askQuantity=0.5, bidSource=BINANCE, priceId=2571ec85-9f3b-4355-bb3c-65603113cd0d, bidPrice=2618.39}
2024-08-11 23:51:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347363306644314, askSource=HUOBI, bidQuantity=0.19265, symbol=ETHBTC, priceDate=2024-08-11T23:51:13.733398500, askQuantity=0.0063486757496934755, bidSource=BINANCE, priceId=3bc62bf1-fd74-4938-8f7e-39861ca3ecf3, bidPrice=0.04347751004956329}
2024-08-11 23:51:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60224.01, askSource=BINANCE, bidQuantity=0.19265, symbol=BTCUSDT, priceDate=2024-08-11T23:51:13.733398500, askQuantity=6.63476, bidSource=BINANCE, priceId=159448a6-25e8-426f-8ac5-82e320aff94c, bidPrice=60224.0}
2024-08-11 23:51:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00039719064005, askSource=BINANCE, bidQuantity=8.18E-4, symbol=BTCETH, priceDate=2024-08-11T23:51:13.733398500, askQuantity=0.2884628445764405, bidSource=HUOBI, priceId=95d7c49c-498e-42b9-a66c-4459ff8c5eff, bidPrice=23.002448368454623}
2024-08-11 23:51:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2008358029<open>)] after transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4b1a43cd]
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60199.98, BidQty - 0.28674, Ask - 60199.99, askQuantity - 2.85415
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.41, BidQty - 19.3158, Ask - 2617.42, askQuantity - 8.0801
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99974020218383, BidQty - 0.28674, Ask - 22.99983189488846, AskQty - 0.12409438525654241
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043478578650926684, BidQty - 0.28674, Ask - 0.04347875198629634, AskQty - 8.0801
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.35, BidQty - 0.1344, Ask - 2618.36, askQuantity - 1.1576
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60227.23, BidQty - 0.004253, Ask - 60227.24, askQuantity - 0.345002
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.001890496341222, BidQty - 0.004253, Ask - 23.001982164340138, AskQty - 0.014998794344552398
2024-08-11 23:51:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347451418992469, BidQty - 0.004253, Ask - 0.04347468744619336, AskQty - 1.1576
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9ea433da-83b9-4287-ba82-ecdf1d11f485, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: da061ff8-319d-4c9e-b4b4-bae655af8641, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 11913644-e6b5-4a00-b9ce-9443f54f62cc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1716274902<open>)] for JPA transaction
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0a66e9b6-0eba-4215-8473-bfb6b5620284, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1716274902<open>)]
2024-08-11 23:51:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60199.99, askSource=BINANCE, bidQuantity=0.004253, symbol=BTCUSDT, priceDate=2024-08-11T23:51:23.750441700, askQuantity=2.85415, bidSource=HUOBI, priceId=da061ff8-319d-4c9e-b4b4-bae655af8641, bidPrice=60227.23}
2024-08-11 23:51:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.99983189488846, askSource=BINANCE, bidQuantity=0.004253, symbol=BTCETH, priceDate=2024-08-11T23:51:23.750441700, askQuantity=0.12409438525654241, bidSource=HUOBI, priceId=11913644-e6b5-4a00-b9ce-9443f54f62cc, bidPrice=23.001890496341222}
2024-08-11 23:51:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.42, askSource=BINANCE, bidQuantity=0.1344, symbol=ETHUSDT, priceDate=2024-08-11T23:51:23.750441700, askQuantity=8.0801, bidSource=HUOBI, priceId=9ea433da-83b9-4287-ba82-ecdf1d11f485, bidPrice=2618.35}
2024-08-11 23:51:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347468744619336, askSource=HUOBI, bidQuantity=0.28674, symbol=ETHBTC, priceDate=2024-08-11T23:51:23.750441700, askQuantity=1.1576, bidSource=BINANCE, priceId=0a66e9b6-0eba-4215-8473-bfb6b5620284, bidPrice=0.043478578650926684}
2024-08-11 23:51:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1716274902<open>)] after transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@305bf1ea]
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60220.99, BidQty - 6.56131, Ask - 60221.0, askQuantity - 0.24259
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.35, BidQty - 28.2667, Ask - 2618.36, askQuantity - 4.1888
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99950732519592, BidQty - 1.2290132827773175, Ask - 22.999598984093037, AskQty - 0.010547575206323375
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347901894687899, BidQty - 6.56131, Ask - 0.043479192221848234, AskQty - 4.1888
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.84, BidQty - 0.8944, Ask - 2617.85, askQuantity - 0.3087
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60201.1, BidQty - 0.009158, Ask - 60201.11, askQuantity - 0.70619
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99639016750387, BidQty - 0.009158, Ask - 22.996481832350334, AskQty - 0.030708610349543388
2024-08-11 23:51:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043484912487494004, BidQty - 0.009158, Ask - 0.04348508582069098, AskQty - 0.3087
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b79f4c56-a375-4bd6-9407-227c8d2082f8, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c9a4a347-c9c2-4a55-9137-6489b30af216, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 84bf7ca2-9551-40c5-a808-6a5986e582dd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1423402151<open>)] for JPA transaction
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0756438a-1270-4d58-9a3e-0660d84ed8c9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1423402151<open>)]
2024-08-11 23:51:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.85, askSource=HUOBI, bidQuantity=28.2667, symbol=ETHUSDT, priceDate=2024-08-11T23:51:33.754097100, askQuantity=0.3087, bidSource=BINANCE, priceId=b79f4c56-a375-4bd6-9407-227c8d2082f8, bidPrice=2618.35}
2024-08-11 23:51:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.996481832350334, askSource=HUOBI, bidQuantity=1.2290132827773175, symbol=BTCETH, priceDate=2024-08-11T23:51:33.754097100, askQuantity=0.030708610349543388, bidSource=BINANCE, priceId=84bf7ca2-9551-40c5-a808-6a5986e582dd, bidPrice=22.99950732519592}
2024-08-11 23:51:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043479192221848234, askSource=BINANCE, bidQuantity=0.009158, symbol=ETHBTC, priceDate=2024-08-11T23:51:33.754097100, askQuantity=4.1888, bidSource=HUOBI, priceId=0756438a-1270-4d58-9a3e-0660d84ed8c9, bidPrice=0.043484912487494004}
2024-08-11 23:51:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60201.11, askSource=HUOBI, bidQuantity=6.56131, symbol=BTCUSDT, priceDate=2024-08-11T23:51:33.754097100, askQuantity=0.70619, bidSource=BINANCE, priceId=c9a4a347-c9c2-4a55-9137-6489b30af216, bidPrice=60220.99}
2024-08-11 23:51:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1423402151<open>)] after transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2d3baa1b]
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60217.51, BidQty - 0.10265, Ask - 60217.52, askQuantity - 3.85377
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.99, BidQty - 0.1986, Ask - 2618.0, askQuantity - 49.4182
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.001340718105425, BidQty - 0.008634279298496401, Ask - 23.001432396609612, AskQty - 0.16754478301829767
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043475553294124364, BidQty - 0.10265, Ask - 0.04347572657853172, AskQty - 49.4182
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.51, BidQty - 0.1344, Ask - 2618.52, askQuantity - 4.9569
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60228.17, BidQty - 0.062376, Ask - 60228.18, askQuantity - 0.408957
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.000843988207077, BidQty - 0.005843263841488128, Ask - 23.000935646608184, AskQty - 0.017780015834282226
2024-08-11 23:51:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347649223336983, BidQty - 0.062376, Ask - 0.04347666548726285, AskQty - 4.9569
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7da9b823-833b-4b27-9aeb-c016b1dddf44, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 341ab59e-d4ac-4e87-9090-06060ab0f7e7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 35ca5510-7cb5-4930-91ba-e52aa18bc01d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(979502910<open>)] for JPA transaction
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: edc99d28-4338-4c32-be4b-1511610ce5a4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(979502910<open>)]
2024-08-11 23:51:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60217.52, askSource=BINANCE, bidQuantity=0.062376, symbol=BTCUSDT, priceDate=2024-08-11T23:51:43.748925100, askQuantity=3.85377, bidSource=HUOBI, priceId=341ab59e-d4ac-4e87-9090-06060ab0f7e7, bidPrice=60228.17}
2024-08-11 23:51:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.0, askSource=BINANCE, bidQuantity=0.1344, symbol=ETHUSDT, priceDate=2024-08-11T23:51:43.748925100, askQuantity=49.4182, bidSource=HUOBI, priceId=7da9b823-833b-4b27-9aeb-c016b1dddf44, bidPrice=2618.51}
2024-08-11 23:51:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.000935646608184, askSource=HUOBI, bidQuantity=0.008634279298496401, symbol=BTCETH, priceDate=2024-08-11T23:51:43.748925100, askQuantity=0.017780015834282226, bidSource=BINANCE, priceId=35ca5510-7cb5-4930-91ba-e52aa18bc01d, bidPrice=23.001340718105425}
2024-08-11 23:51:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347572657853172, askSource=BINANCE, bidQuantity=0.062376, symbol=ETHBTC, priceDate=2024-08-11T23:51:43.748925100, askQuantity=49.4182, bidSource=HUOBI, priceId=edc99d28-4338-4c32-be4b-1511610ce5a4, bidPrice=0.04347649223336983}
2024-08-11 23:51:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(979502910<open>)] after transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:51:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1127a1ec]
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:51:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60226.0, BidQty - 0.69685, Ask - 60226.01, askQuantity - 5.11769
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.52, BidQty - 5.3967, Ask - 2618.53, askQuantity - 20.733
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.999927440205, BidQty - 0.23463987067047457, Ask - 23.000019094755817, AskQty - 0.22250807614185297
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347822477364846, BidQty - 0.69685, Ask - 0.043478398034071664, AskQty - 20.733
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:51:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:51:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.14, BidQty - 0.76, Ask - 2617.15, askQuantity - 0.1528
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60207.66, BidQty - 0.201151, Ask - 60207.67, askQuantity - 0.15629
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00504747530711, BidQty - 0.033036228280587554, Ask - 23.005139197750218, AskQty - 0.006793699384148233
2024-08-11 23:51:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043468548110232465, BidQty - 0.201151, Ask - 0.04346872142182573, AskQty - 0.1528
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c26b8b3a-63ff-4728-a3f8-5f0fb1043e7a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 06307080-e25f-4f9d-9f54-826bce79c1d9, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 9ee2f65e-7fe1-42ea-9401-41222bb570ad, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(536908982<open>)] for JPA transaction
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1ff79ad6-d2c6-4936-ad05-53477d9a3366, using strategy: org.hibernate.id.Assigned
2024-08-11 23:51:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(536908982<open>)]
2024-08-11 23:51:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:51:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:51:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:51:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.15, askSource=HUOBI, bidQuantity=5.3967, symbol=ETHUSDT, priceDate=2024-08-11T23:51:53.836216500, askQuantity=0.1528, bidSource=BINANCE, priceId=c26b8b3a-63ff-4728-a3f8-5f0fb1043e7a, bidPrice=2618.52}
2024-08-11 23:51:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60207.67, askSource=HUOBI, bidQuantity=0.69685, symbol=BTCUSDT, priceDate=2024-08-11T23:51:53.836216500, askQuantity=0.15629, bidSource=BINANCE, priceId=06307080-e25f-4f9d-9f54-826bce79c1d9, bidPrice=60226.0}
2024-08-11 23:51:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04346872142182573, askSource=HUOBI, bidQuantity=0.69685, symbol=ETHBTC, priceDate=2024-08-11T23:51:53.836216500, askQuantity=0.1528, bidSource=BINANCE, priceId=1ff79ad6-d2c6-4936-ad05-53477d9a3366, bidPrice=0.04347822477364846}
2024-08-11 23:51:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.000019094755817, askSource=BINANCE, bidQuantity=0.033036228280587554, symbol=BTCETH, priceDate=2024-08-11T23:51:53.836216500, askQuantity=0.22250807614185297, bidSource=HUOBI, priceId=9ee2f65e-7fe1-42ea-9401-41222bb570ad, bidPrice=23.00504747530711}
2024-08-11 23:51:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:51:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(536908982<open>)] after transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@48063768]
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60234.93, BidQty - 2.96258, Ask - 60234.94, askQuantity - 0.62753
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2619.15, BidQty - 28.1629, Ask - 2619.16, askQuantity - 3.9496
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.997804639655463, BidQty - 1.2245908007861883, Ask - 22.997896264055132, AskQty - 0.02728640884343871
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348223804987603, BidQty - 2.96258, Ask - 0.04348241128527915, AskQty - 3.9496
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.92, BidQty - 0.6527, Ask - 2618.93, askQuantity - 1.3042
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60231.02, BidQty - 0.101417, Ask - 60231.03, askQuantity - 0.16520077554808543
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99833137960923, BidQty - 0.02838031982523291, Ask - 22.998423014066866, AskQty - 0.007183134923948535
2024-08-11 23:52:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043481242143791995, BidQty - 0.101417, Ask - 0.04348141539027564, AskQty - 1.3042
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0713c11f-0a2e-48c2-8764-58cfd7701118, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bba53f53-878a-40d0-bfa6-30ba3813d44d, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d136d75a-606f-4d3f-9bd7-47cd43f60f26, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1417223022<open>)] for JPA transaction
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 70470d35-2b26-4d1d-9caa-b08cc9c02bfd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1417223022<open>)]
2024-08-11 23:52:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.997896264055132, askSource=BINANCE, bidQuantity=0.02838031982523291, symbol=BTCETH, priceDate=2024-08-11T23:52:03.751859900, askQuantity=0.02728640884343871, bidSource=HUOBI, priceId=d136d75a-606f-4d3f-9bd7-47cd43f60f26, bidPrice=22.99833137960923}
2024-08-11 23:52:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60231.03, askSource=HUOBI, bidQuantity=2.96258, symbol=BTCUSDT, priceDate=2024-08-11T23:52:03.751859900, askQuantity=0.16520077554808543, bidSource=BINANCE, priceId=bba53f53-878a-40d0-bfa6-30ba3813d44d, bidPrice=60234.93}
2024-08-11 23:52:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.93, askSource=HUOBI, bidQuantity=28.1629, symbol=ETHUSDT, priceDate=2024-08-11T23:52:03.751859900, askQuantity=1.3042, bidSource=BINANCE, priceId=0713c11f-0a2e-48c2-8764-58cfd7701118, bidPrice=2619.15}
2024-08-11 23:52:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04348141539027564, askSource=HUOBI, bidQuantity=2.96258, symbol=ETHBTC, priceDate=2024-08-11T23:52:03.751859900, askQuantity=1.3042, bidSource=BINANCE, priceId=70470d35-2b26-4d1d-9caa-b08cc9c02bfd, bidPrice=0.04348223804987603}
2024-08-11 23:52:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1417223022<open>)] after transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:13 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7bc0188b]
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:13 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:13 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60214.0, BidQty - 2.62832, Ask - 60214.01, askQuantity - 0.46082
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.25, BidQty - 32.4845, Ask - 2618.26, askQuantity - 4.529
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99771604042379, BidQty - 1.4125098311024016, Ask - 22.99780769598014, AskQty - 0.02003756210556314
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348240550662545, BidQty - 2.62832, Ask - 0.0434825788022719, AskQty - 4.529
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:13 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2619.31, BidQty - 1.002, Ask - 2619.32, askQuantity - 1.8042
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60237.32, BidQty - 0.292961, Ask - 60237.33, askQuantity - 5.06E-4
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.997312279522927, BidQty - 0.04357030890484504, Ask - 22.997403896446013, AskQty - 2.2002483509810278E-5
2024-08-11 23:52:13 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348316899171992, BidQty - 0.292961, Ask - 0.04348334222040423, AskQty - 0.011636640013438603
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1a9fa1d3-989a-48bd-8aa5-f6878b8db296, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0e71faff-96aa-47ce-aaef-ebcea0588758, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 52883348-3074-4df9-9c5c-bf4287a9b84e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1624678856<open>)] for JPA transaction
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: bd6e5501-6532-40e8-b5c4-9b7c42fbeda3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:13 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1624678856<open>)]
2024-08-11 23:52:13 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:13 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:13 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.0434825788022719, askSource=BINANCE, bidQuantity=0.292961, symbol=ETHBTC, priceDate=2024-08-11T23:52:13.819601, askQuantity=4.529, bidSource=HUOBI, priceId=bd6e5501-6532-40e8-b5c4-9b7c42fbeda3, bidPrice=0.04348316899171992}
2024-08-11 23:52:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60214.01, askSource=BINANCE, bidQuantity=0.292961, symbol=BTCUSDT, priceDate=2024-08-11T23:52:13.819601, askQuantity=0.46082, bidSource=HUOBI, priceId=0e71faff-96aa-47ce-aaef-ebcea0588758, bidPrice=60237.32}
2024-08-11 23:52:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.997403896446013, askSource=HUOBI, bidQuantity=1.4125098311024016, symbol=BTCETH, priceDate=2024-08-11T23:52:13.819601, askQuantity=2.2002483509810278E-5, bidSource=BINANCE, priceId=52883348-3074-4df9-9c5c-bf4287a9b84e, bidPrice=22.99771604042379}
2024-08-11 23:52:13 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.26, askSource=BINANCE, bidQuantity=1.002, symbol=ETHUSDT, priceDate=2024-08-11T23:52:13.819601, askQuantity=4.529, bidSource=HUOBI, priceId=1a9fa1d3-989a-48bd-8aa5-f6878b8db296, bidPrice=2619.31}
2024-08-11 23:52:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:13 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:13 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1624678856<open>)] after transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:23 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@d8280d7]
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:23 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:23 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60212.0, BidQty - 0.94116, Ask - 60212.01, askQuantity - 4.20771
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.6, BidQty - 26.8128, Ask - 2617.61, askQuantity - 4.4265
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.00266273432635, BidQty - 0.94116, Ask - 23.002754431540342, AskQty - 0.18292200668936312
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043473054628138136, BidQty - 0.94116, Ask - 0.04347322792798778, AskQty - 4.4265
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:23 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:23 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.42, BidQty - 0.6, Ask - 2618.43, askQuantity - 4.7377
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60219.8, BidQty - 0.510043, Ask - 60219.81, askQuantity - 5.08E-4
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.998437995287254, BidQty - 0.02608872829202355, Ask - 22.99852964765011, AskQty - 2.2088368594985605E-5
2024-08-11 23:52:23 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043481040541310245, BidQty - 0.510043, Ask - 0.04348121382003925, AskQty - 0.011683206501605925
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 82364e1e-8e82-453e-ad74-fc0c37f635c0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 2c7fa20e-dd9f-4251-937b-69a4ae8e312e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d0d8189a-f75c-4f93-b0c8-929be4b818f0, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1895849787<open>)] for JPA transaction
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 12730298-8a71-4c8e-bd57-6a74dc181e72, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:23 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1895849787<open>)]
2024-08-11 23:52:23 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:23 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:23 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.61, askSource=BINANCE, bidQuantity=0.6, symbol=ETHUSDT, priceDate=2024-08-11T23:52:23.890285200, askQuantity=4.4265, bidSource=HUOBI, priceId=82364e1e-8e82-453e-ad74-fc0c37f635c0, bidPrice=2618.42}
2024-08-11 23:52:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60212.01, askSource=BINANCE, bidQuantity=0.510043, symbol=BTCUSDT, priceDate=2024-08-11T23:52:23.890285200, askQuantity=4.20771, bidSource=HUOBI, priceId=2c7fa20e-dd9f-4251-937b-69a4ae8e312e, bidPrice=60219.8}
2024-08-11 23:52:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.99852964765011, askSource=HUOBI, bidQuantity=0.94116, symbol=BTCETH, priceDate=2024-08-11T23:52:23.890285200, askQuantity=2.2088368594985605E-5, bidSource=BINANCE, priceId=d0d8189a-f75c-4f93-b0c8-929be4b818f0, bidPrice=23.00266273432635}
2024-08-11 23:52:23 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347322792798778, askSource=BINANCE, bidQuantity=0.510043, symbol=ETHBTC, priceDate=2024-08-11T23:52:23.890285200, askQuantity=4.4265, bidSource=HUOBI, priceId=12730298-8a71-4c8e-bd57-6a74dc181e72, bidPrice=0.043481040541310245}
2024-08-11 23:52:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:23 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:23 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1895849787<open>)] after transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:33 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1513d01d]
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:33 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:33 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60205.83, BidQty - 2.30327, Ask - 60205.84, askQuantity - 1.38239
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 4.0381, Ask - 2618.01, askQuantity - 24.7679
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99679145610597, BidQty - 0.17559406092400023, Ask - 22.996883116883115, AskQty - 0.06011205922880571
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434841536967178, BidQty - 2.30327, Ask - 0.043484327016171026, AskQty - 24.7679
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:33 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.27, BidQty - 0.1031, Ask - 2618.36, askQuantity - 4.3042
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60205.84, BidQty - 0.039546, Ask - 60205.85, askQuantity - 0.061449
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.993721260636427, BidQty - 0.004483832731176909, Ask - 22.994515462500047, AskQty - 0.0026723328917372647
2024-08-11 23:52:33 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348863108817499, BidQty - 0.039546, Ask - 0.04349013318309321, AskQty - 1.4129411777448477
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: fb7358ce-ed4b-488c-aa8c-c9637da514a2, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: c3ae2a66-840d-41c0-a287-9a41a3ecc1c3, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 0270a84a-9850-4dc3-8941-bac59b4a9f4a, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1026462746<open>)] for JPA transaction
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: a8e631e0-512f-4702-af1d-188a9484c6ab, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:33 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1026462746<open>)]
2024-08-11 23:52:33 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:33 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:33 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.994515462500047, askSource=HUOBI, bidQuantity=0.17559406092400023, symbol=BTCETH, priceDate=2024-08-11T23:52:33.775371800, askQuantity=0.0026723328917372647, bidSource=BINANCE, priceId=0270a84a-9850-4dc3-8941-bac59b4a9f4a, bidPrice=22.99679145610597}
2024-08-11 23:52:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.043484327016171026, askSource=BINANCE, bidQuantity=0.039546, symbol=ETHBTC, priceDate=2024-08-11T23:52:33.775371800, askQuantity=24.7679, bidSource=HUOBI, priceId=a8e631e0-512f-4702-af1d-188a9484c6ab, bidPrice=0.04348863108817499}
2024-08-11 23:52:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60205.84, askSource=BINANCE, bidQuantity=0.039546, symbol=BTCUSDT, priceDate=2024-08-11T23:52:33.775371800, askQuantity=1.38239, bidSource=HUOBI, priceId=c3ae2a66-840d-41c0-a287-9a41a3ecc1c3, bidPrice=60205.84}
2024-08-11 23:52:33 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2618.01, askSource=BINANCE, bidQuantity=0.1031, symbol=ETHUSDT, priceDate=2024-08-11T23:52:33.775371800, askQuantity=24.7679, bidSource=HUOBI, priceId=fb7358ce-ed4b-488c-aa8c-c9637da514a2, bidPrice=2618.27}
2024-08-11 23:52:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:33 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:33 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1026462746<open>)] after transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:43 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@55ffdbb4]
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:43 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:43 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60205.83, BidQty - 0.30995, Ask - 60205.84, askQuantity - 2.50802
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.79, BidQty - 12.9494, Ask - 2617.8, askQuantity - 22.4945
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.998636259454504, BidQty - 0.30995, Ask - 22.998727934631884, AskQty - 0.10905037909611427
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04348066566299881, BidQty - 0.30995, Ask - 0.04348083898187269, AskQty - 22.4945
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:43 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.75, BidQty - 1.13, Ask - 2617.76, askQuantity - 1.8909
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60207.28, BidQty - 0.048114, Ask - 60207.29, askQuantity - 0.058993
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99954159281217, BidQty - 0.048114, Ask - 22.999633272848822, AskQty - 0.002564953940793548
2024-08-11 23:52:43 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347895412665144, BidQty - 0.048114, Ask - 0.04347912744106693, AskQty - 1.3568119571847683
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1a0dfcee-231e-4a8d-b47b-142980486d2c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 5a6b6d46-9e8e-4af1-ab48-3f88c87150d7, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: f0325f86-1436-429d-bcf1-f1d65503ee2c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(141335651<open>)] for JPA transaction
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 7f916683-1dce-41e4-ade6-f6304fa342ad, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:43 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(141335651<open>)]
2024-08-11 23:52:43 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:43 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:43 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.76, askSource=HUOBI, bidQuantity=12.9494, symbol=ETHUSDT, priceDate=2024-08-11T23:52:43.793346600, askQuantity=1.8909, bidSource=BINANCE, priceId=1a0dfcee-231e-4a8d-b47b-142980486d2c, bidPrice=2617.79}
2024-08-11 23:52:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.998727934631884, askSource=BINANCE, bidQuantity=0.048114, symbol=BTCETH, priceDate=2024-08-11T23:52:43.793346600, askQuantity=0.10905037909611427, bidSource=HUOBI, priceId=f0325f86-1436-429d-bcf1-f1d65503ee2c, bidPrice=22.99954159281217}
2024-08-11 23:52:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60205.84, askSource=BINANCE, bidQuantity=0.048114, symbol=BTCUSDT, priceDate=2024-08-11T23:52:43.793346600, askQuantity=2.50802, bidSource=HUOBI, priceId=5a6b6d46-9e8e-4af1-ab48-3f88c87150d7, bidPrice=60207.28}
2024-08-11 23:52:43 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347912744106693, askSource=HUOBI, bidQuantity=0.30995, symbol=ETHBTC, priceDate=2024-08-11T23:52:43.793346600, askQuantity=1.3568119571847683, bidSource=BINANCE, priceId=7f916683-1dce-41e4-ade6-f6304fa342ad, bidPrice=0.04348066566299881}
2024-08-11 23:52:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:43 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:43 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(141335651<open>)] after transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:52:53 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@10b4ce92]
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:53 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:52:53 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60207.99, BidQty - 4.53285, Ask - 60208.0, askQuantity - 0.253
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2618.0, BidQty - 34.4894, Ask - 2618.01, askQuantity - 3.7882
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99761651025015, BidQty - 1.499694543764042, Ask - 22.99770817417876, AskQty - 0.011001096199840554
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.0434825936752591, BidQty - 4.53285, Ask - 0.043482766988235284, AskQty - 3.7882
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:52:53 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:52:53 DEBUG com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2617.75, BidQty - 1.1528, Ask - 2617.76, askQuantity - 1.3983
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60207.28, BidQty - 0.061871, Ask - 60207.29, askQuantity - 0.008985
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.99954159281217, BidQty - 0.05012273811406196, Ask - 22.999633272848822, AskQty - 3.9065840282796315E-4
2024-08-11 23:52:53 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347895412665144, BidQty - 0.061871, Ask - 0.04347912744106693, AskQty - 0.20665088121141736
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: d35006dc-0bb1-4dd4-bdb7-6e6d367eb43e, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 060c1212-7eb8-402a-8231-90f8cd5fbb78, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: b260d7e5-5b37-4b4d-82b1-83e862cebad1, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1413846591<open>)] for JPA transaction
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: aa6fd529-3f77-4bcb-8692-a5277a43294c, using strategy: org.hibernate.id.Assigned
2024-08-11 23:52:53 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1413846591<open>)]
2024-08-11 23:52:53 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:52:53 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:52:53 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:52:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60207.29, askSource=HUOBI, bidQuantity=4.53285, symbol=BTCUSDT, priceDate=2024-08-11T23:52:53.797673400, askQuantity=0.008985, bidSource=BINANCE, priceId=060c1212-7eb8-402a-8231-90f8cd5fbb78, bidPrice=60207.99}
2024-08-11 23:52:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=22.99770817417876, askSource=BINANCE, bidQuantity=0.05012273811406196, symbol=BTCETH, priceDate=2024-08-11T23:52:53.797673400, askQuantity=0.011001096199840554, bidSource=HUOBI, priceId=b260d7e5-5b37-4b4d-82b1-83e862cebad1, bidPrice=22.99954159281217}
2024-08-11 23:52:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347912744106693, askSource=HUOBI, bidQuantity=4.53285, symbol=ETHBTC, priceDate=2024-08-11T23:52:53.797673400, askQuantity=0.20665088121141736, bidSource=BINANCE, priceId=aa6fd529-3f77-4bcb-8692-a5277a43294c, bidPrice=0.0434825936752591}
2024-08-11 23:52:53 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.76, askSource=HUOBI, bidQuantity=34.4894, symbol=ETHUSDT, priceDate=2024-08-11T23:52:53.796677600, askQuantity=1.3983, bidSource=BINANCE, priceId=d35006dc-0bb1-4dd4-bdb7-6e6d367eb43e, bidPrice=2618.0}
2024-08-11 23:52:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:53 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:52:53 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1413846591<open>)] after transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.example.scheduler.PriceScheduler.fetchAndUpdatePrices]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.h.e.t.internal.TransactionImpl - On TransactionImpl creation, JpaCompliance#isJpaTransactionComplianceEnabled == false
2024-08-11 23:53:03 DEBUG o.h.e.t.internal.TransactionImpl - begin
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@ab08868]
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:53:03 INFO  com.example.service.PriceService - 0. upding best pricess ....
2024-08-11 23:53:03 INFO  com.example.service.PriceService - get best pricess ....
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.binance.com/api/v3/ticker/bookTicker?symbols=%5B%22ETHUSDT%22,%22BTCUSDT%22%5D
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json;charset=UTF-8"
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source BINANCE: Bid - 60204.8, BidQty - 0.36457, Ask - 60204.81, askQuantity - 4.00907
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source BINANCE: Bid - 2617.2, BidQty - 7.1381, Ask - 2617.21, askQuantity - 29.054
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 23.003427313818914, BidQty - 0.3103059340949559, Ask - 23.00351902796882, AskQty - 0.17428072614131665
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.04347160966042414, BidQty - 0.36457, Ask - 0.04347178298075901, AskQty - 29.054
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - HTTP GET https://api.huobi.pro/market/tickers
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Accept=[text/plain, application/json, application/*+json, */*]
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Response 200 OK
2024-08-11 23:53:03 DEBUG o.s.web.client.RestTemplate - Reading to [java.lang.String] as "application/json"
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Updated ETHUSDT with source HUOBI: Bid - 2618.16, BidQty - 0.1028, Ask - 2618.17, askQuantity - 1.0198
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Updated BTCUSDT with source HUOBI: Bid - 60217.84, BidQty - 0.028171, Ask - 60217.85, askQuantity - 0.233212
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Calculated BTCETH: Bid - 22.9999732637682, BidQty - 0.0044695704130204615, Ask - 23.00006493109665, AskQty - 0.010139623548831451
2024-08-11 23:53:03 INFO  com.example.service.PriceService - Calculated ETHBTC: Bid - 0.043478138126817875, BidQty - 0.028171, Ask - 0.04347831141070487, AskQty - 1.0198
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: e9c76dc3-e6ca-4040-99f0-62b9558b77f5, using strategy: org.hibernate.id.Assigned
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 79ba7eb0-30c6-4314-b666-f999b48b3bbd, using strategy: org.hibernate.id.Assigned
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 627dba51-7db4-42ed-9515-85fe0e62afcc, using strategy: org.hibernate.id.Assigned
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(976927207<open>)] for JPA transaction
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 74b534d6-b233-46c4-8a81-546088c634f4, using strategy: org.hibernate.id.Assigned
2024-08-11 23:53:03 INFO  com.example.service.PriceService - 9. upding best pricess ....
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(976927207<open>)]
2024-08-11 23:53:03 DEBUG o.h.e.t.internal.TransactionImpl - committing
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
2024-08-11 23:53:03 DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2024-08-11 23:53:03 DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2024-08-11 23:53:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=60204.81, askSource=BINANCE, bidQuantity=0.028171, symbol=BTCUSDT, priceDate=2024-08-11T23:53:03.737034100, askQuantity=4.00907, bidSource=HUOBI, priceId=79ba7eb0-30c6-4314-b666-f999b48b3bbd, bidPrice=60217.84}
2024-08-11 23:53:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=0.04347178298075901, askSource=BINANCE, bidQuantity=0.028171, symbol=ETHBTC, priceDate=2024-08-11T23:53:03.737034100, askQuantity=29.054, bidSource=HUOBI, priceId=74b534d6-b233-46c4-8a81-546088c634f4, bidPrice=0.043478138126817875}
2024-08-11 23:53:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=2617.21, askSource=BINANCE, bidQuantity=0.1028, symbol=ETHUSDT, priceDate=2024-08-11T23:53:03.737034100, askQuantity=29.054, bidSource=HUOBI, priceId=e9c76dc3-e6ca-4040-99f0-62b9558b77f5, bidPrice=2618.16}
2024-08-11 23:53:03 DEBUG o.h.internal.util.EntityPrinter - com.example.model.TradingPair{askPrice=23.00006493109665, askSource=HUOBI, bidQuantity=0.3103059340949559, symbol=BTCETH, priceDate=2024-08-11T23:53:03.737034100, askQuantity=0.010139623548831451, bidSource=BINANCE, priceId=627dba51-7db4-42ed-9515-85fe0e62afcc, bidPrice=23.003427313818914}
2024-08-11 23:53:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:53:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:53:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:53:03 DEBUG org.hibernate.SQL - 
    insert 
    into
        trading_pair
        (ask_price, ask_quantity, ask_source, bid_price, bid_quantity, bid_source, price_date, symbol, price_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-08-11 23:53:03 DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(976927207<open>)] after transaction
